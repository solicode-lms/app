var Mo=Object.defineProperty;var To=(n,t,e)=>t in n?Mo(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var st=(n,t,e)=>To(n,typeof t!="symbol"?t+"":t,e);/*!
* sweetalert2 v11.15.3
* Released under the MIT License.
*/function si(n,t,e){if(typeof n=="function"?n===t:n.has(t))return arguments.length<3?t:e;throw new TypeError("Private element is not present on this object")}function $o(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wn(n,t){return n.get(si(n,t))}function Uo(n,t,e){$o(n,t),t.set(n,e)}function Po(n,t,e){return n.set(si(n,t),e),e}const Fo=100,P={},Lo=()=>{P.previousActiveElement instanceof HTMLElement?(P.previousActiveElement.focus(),P.previousActiveElement=null):document.body&&document.body.focus()},Oo=n=>new Promise(t=>{if(!n)return t();const e=window.scrollX,i=window.scrollY;P.restoreFocusTimeout=setTimeout(()=>{Lo(),t()},Fo),window.scrollTo(e,i)}),li="swal2-",_o=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],h=_o.reduce((n,t)=>(n[t]=li+t,n),{}),No=["success","warning","info","question","error"],Ht=No.reduce((n,t)=>(n[t]=li+t,n),{}),ci="SweetAlert2:",En=n=>n.charAt(0).toUpperCase()+n.slice(1),Se=n=>{console.warn(`${ci} ${typeof n=="object"?n.join(" "):n}`)},et=n=>{console.error(`${ci} ${n}`)},Yn=[],jo=n=>{Yn.includes(n)||(Yn.push(n),Se(n))},di=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;jo(`"${n}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},Qt=n=>typeof n=="function"?n():n,In=n=>n&&typeof n.toPromise=="function",At=n=>In(n)?n.toPromise():Promise.resolve(n),kn=n=>n&&Promise.resolve(n)===n,Ee=()=>document.body.querySelector(`.${h.container}`),Mt=n=>{const t=Ee();return t?t.querySelector(n):null},Ue=n=>Mt(`.${n}`),V=()=>Ue(h.popup),pt=()=>Ue(h.icon),Bo=()=>Ue(h["icon-content"]),ui=()=>Ue(h.title),Dn=()=>Ue(h["html-container"]),fi=()=>Ue(h.image),An=()=>Ue(h["progress-steps"]),en=()=>Ue(h["validation-message"]),Re=()=>Mt(`.${h.actions} .${h.confirm}`),wt=()=>Mt(`.${h.actions} .${h.cancel}`),tt=()=>Mt(`.${h.actions} .${h.deny}`),Ho=()=>Ue(h["input-label"]),bt=()=>Mt(`.${h.loader}`),Tt=()=>Ue(h.actions),hi=()=>Ue(h.footer),tn=()=>Ue(h["timer-progress-bar"]),Mn=()=>Ue(h.close),Ro=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Tn=()=>{const n=V();if(!n)return[];const t=n.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),e=Array.from(t).sort((r,l)=>{const c=parseInt(r.getAttribute("tabindex")||"0"),u=parseInt(l.getAttribute("tabindex")||"0");return c>u?1:c<u?-1:0}),i=n.querySelectorAll(Ro),o=Array.from(i).filter(r=>r.getAttribute("tabindex")!=="-1");return[...new Set(e.concat(o))].filter(r=>xe(r))},$n=()=>ze(document.body,h.shown)&&!ze(document.body,h["toast-shown"])&&!ze(document.body,h["no-backdrop"]),nn=()=>{const n=V();return n?ze(n,h.toast):!1},Vo=()=>{const n=V();return n?n.hasAttribute("data-loading"):!1},Pe=(n,t)=>{if(n.textContent="",t){const i=new DOMParser().parseFromString(t,"text/html"),o=i.querySelector("head");o&&Array.from(o.childNodes).forEach(l=>{n.appendChild(l)});const r=i.querySelector("body");r&&Array.from(r.childNodes).forEach(l=>{l instanceof HTMLVideoElement||l instanceof HTMLAudioElement?n.appendChild(l.cloneNode(!0)):n.appendChild(l)})}},ze=(n,t)=>{if(!t)return!1;const e=t.split(/\s+/);for(let i=0;i<e.length;i++)if(!n.classList.contains(e[i]))return!1;return!0},zo=(n,t)=>{Array.from(n.classList).forEach(e=>{!Object.values(h).includes(e)&&!Object.values(Ht).includes(e)&&!Object.values(t.showClass||{}).includes(e)&&n.classList.remove(e)})},$e=(n,t,e)=>{if(zo(n,t),!t.customClass)return;const i=t.customClass[e];if(i){if(typeof i!="string"&&!i.forEach){Se(`Invalid type of customClass.${e}! Expected string or iterable object, got "${typeof i}"`);return}H(n,i)}},on=(n,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return n.querySelector(`.${h.popup} > .${h[t]}`);case"checkbox":return n.querySelector(`.${h.popup} > .${h.checkbox} input`);case"radio":return n.querySelector(`.${h.popup} > .${h.radio} input:checked`)||n.querySelector(`.${h.popup} > .${h.radio} input:first-child`);case"range":return n.querySelector(`.${h.popup} > .${h.range} input`);default:return n.querySelector(`.${h.popup} > .${h.input}`)}},gi=n=>{if(n.focus(),n.type!=="file"){const t=n.value;n.value="",n.value=t}},mi=(n,t,e)=>{!n||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(i=>{Array.isArray(n)?n.forEach(o=>{e?o.classList.add(i):o.classList.remove(i)}):e?n.classList.add(i):n.classList.remove(i)}))},H=(n,t)=>{mi(n,t,!0)},_e=(n,t)=>{mi(n,t,!1)},We=(n,t)=>{const e=Array.from(n.children);for(let i=0;i<e.length;i++){const o=e[i];if(o instanceof HTMLElement&&ze(o,t))return o}},Ge=(n,t,e)=>{e===`${parseInt(e)}`&&(e=parseInt(e)),e||parseInt(e)===0?n.style.setProperty(t,typeof e=="number"?`${e}px`:e):n.style.removeProperty(t)},de=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";n&&(n.style.display=t)},we=n=>{n&&(n.style.display="none")},Un=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";n&&new MutationObserver(()=>{$t(n,n.innerHTML,t)}).observe(n,{childList:!0,subtree:!0})},Kn=(n,t,e,i)=>{const o=n.querySelector(t);o&&o.style.setProperty(e,i)},$t=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?de(n,e):we(n)},xe=n=>!!(n&&(n.offsetWidth||n.offsetHeight||n.getClientRects().length)),qo=()=>!xe(Re())&&!xe(tt())&&!xe(wt()),Jn=n=>n.scrollHeight>n.clientHeight,pi=n=>{const t=window.getComputedStyle(n),e=parseFloat(t.getPropertyValue("animation-duration")||"0"),i=parseFloat(t.getPropertyValue("transition-duration")||"0");return e>0||i>0},Pn=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const e=tn();e&&xe(e)&&(t&&(e.style.transition="none",e.style.width="100%"),setTimeout(()=>{e.style.transition=`width ${n/1e3}s linear`,e.style.width="0%"},10))},Wo=()=>{const n=tn();if(!n)return;const t=parseInt(window.getComputedStyle(n).width);n.style.removeProperty("transition"),n.style.width="100%";const e=parseInt(window.getComputedStyle(n).width),i=t/e*100;n.style.width=`${i}%`},Yo=()=>typeof window>"u"||typeof document>"u",Ko=`
 <div aria-labelledby="${h.title}" aria-describedby="${h["html-container"]}" class="${h.popup}" tabindex="-1">
   <button type="button" class="${h.close}"></button>
   <ul class="${h["progress-steps"]}"></ul>
   <div class="${h.icon}"></div>
   <img class="${h.image}" />
   <h2 class="${h.title}" id="${h.title}"></h2>
   <div class="${h["html-container"]}" id="${h["html-container"]}"></div>
   <input class="${h.input}" id="${h.input}" />
   <input type="file" class="${h.file}" />
   <div class="${h.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${h.select}" id="${h.select}"></select>
   <div class="${h.radio}"></div>
   <label class="${h.checkbox}">
     <input type="checkbox" id="${h.checkbox}" />
     <span class="${h.label}"></span>
   </label>
   <textarea class="${h.textarea}" id="${h.textarea}"></textarea>
   <div class="${h["validation-message"]}" id="${h["validation-message"]}"></div>
   <div class="${h.actions}">
     <div class="${h.loader}"></div>
     <button type="button" class="${h.confirm}"></button>
     <button type="button" class="${h.deny}"></button>
     <button type="button" class="${h.cancel}"></button>
   </div>
   <div class="${h.footer}"></div>
   <div class="${h["timer-progress-bar-container"]}">
     <div class="${h["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Jo=()=>{const n=Ee();return n?(n.remove(),_e([document.documentElement,document.body],[h["no-backdrop"],h["toast-shown"],h["has-column"]]),!0):!1},Ze=()=>{P.currentInstance.resetValidationMessage()},Zo=()=>{const n=V(),t=We(n,h.input),e=We(n,h.file),i=n.querySelector(`.${h.range} input`),o=n.querySelector(`.${h.range} output`),r=We(n,h.select),l=n.querySelector(`.${h.checkbox} input`),c=We(n,h.textarea);t.oninput=Ze,e.onchange=Ze,r.onchange=Ze,l.onchange=Ze,c.oninput=Ze,i.oninput=()=>{Ze(),o.value=i.value},i.onchange=()=>{Ze(),o.value=i.value}},Xo=n=>typeof n=="string"?document.querySelector(n):n,Go=n=>{const t=V();t.setAttribute("role",n.toast?"alert":"dialog"),t.setAttribute("aria-live",n.toast?"polite":"assertive"),n.toast||t.setAttribute("aria-modal","true")},Qo=n=>{window.getComputedStyle(n).direction==="rtl"&&H(Ee(),h.rtl)},er=n=>{const t=Jo();if(Yo()){et("SweetAlert2 requires document to initialize");return}const e=document.createElement("div");e.className=h.container,t&&H(e,h["no-transition"]),Pe(e,Ko);const i=Xo(n.target);i.appendChild(e),Go(n),Qo(i),Zo()},Fn=(n,t)=>{n instanceof HTMLElement?t.appendChild(n):typeof n=="object"?tr(n,t):n&&Pe(t,n)},tr=(n,t)=>{n.jquery?nr(t,n):Pe(t,n.toString())},nr=(n,t)=>{if(n.textContent="",0 in t)for(let e=0;e in t;e++)n.appendChild(t[e].cloneNode(!0));else n.appendChild(t.cloneNode(!0))},ir=(n,t)=>{const e=Tt(),i=bt();!e||!i||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?we(e):de(e),$e(e,t,"actions"),or(e,i,t),Pe(i,t.loaderHtml||""),$e(i,t,"loader"))};function or(n,t,e){const i=Re(),o=tt(),r=wt();!i||!o||!r||(un(i,"confirm",e),un(o,"deny",e),un(r,"cancel",e),rr(i,o,r,e),e.reverseButtons&&(e.toast?(n.insertBefore(r,i),n.insertBefore(o,i)):(n.insertBefore(r,t),n.insertBefore(o,t),n.insertBefore(i,t))))}function rr(n,t,e,i){if(!i.buttonsStyling){_e([n,t,e],h.styled);return}H([n,t,e],h.styled),i.confirmButtonColor&&(n.style.backgroundColor=i.confirmButtonColor,H(n,h["default-outline"])),i.denyButtonColor&&(t.style.backgroundColor=i.denyButtonColor,H(t,h["default-outline"])),i.cancelButtonColor&&(e.style.backgroundColor=i.cancelButtonColor,H(e,h["default-outline"]))}function un(n,t,e){const i=En(t);$t(n,e[`show${i}Button`],"inline-block"),Pe(n,e[`${t}ButtonText`]||""),n.setAttribute("aria-label",e[`${t}ButtonAriaLabel`]||""),n.className=h[t],$e(n,e,`${t}Button`)}const ar=(n,t)=>{const e=Mn();e&&(Pe(e,t.closeButtonHtml||""),$e(e,t,"closeButton"),$t(e,t.showCloseButton),e.setAttribute("aria-label",t.closeButtonAriaLabel||""))},sr=(n,t)=>{const e=Ee();e&&(lr(e,t.backdrop),cr(e,t.position),dr(e,t.grow),$e(e,t,"container"))};function lr(n,t){typeof t=="string"?n.style.background=t:t||H([document.documentElement,document.body],h["no-backdrop"])}function cr(n,t){t&&(t in h?H(n,h[t]):(Se('The "position" parameter is not valid, defaulting to "center"'),H(n,h.center)))}function dr(n,t){t&&H(n,h[`grow-${t}`])}var Z={innerParams:new WeakMap,domCache:new WeakMap};const ur=["input","file","range","select","radio","checkbox","textarea"],fr=(n,t)=>{const e=V();if(!e)return;const i=Z.innerParams.get(n),o=!i||t.input!==i.input;ur.forEach(r=>{const l=We(e,h[r]);l&&(mr(r,t.inputAttributes),l.className=h[r],o&&we(l))}),t.input&&(o&&hr(t),pr(t))},hr=n=>{if(!n.input)return;if(!ie[n.input]){et(`Unexpected type of input! Expected ${Object.keys(ie).join(" | ")}, got "${n.input}"`);return}const t=wi(n.input);if(!t)return;const e=ie[n.input](t,n);de(t),n.inputAutoFocus&&setTimeout(()=>{gi(e)})},gr=n=>{for(let t=0;t<n.attributes.length;t++){const e=n.attributes[t].name;["id","type","value","style"].includes(e)||n.removeAttribute(e)}},mr=(n,t)=>{const e=V();if(!e)return;const i=on(e,n);if(i){gr(i);for(const o in t)i.setAttribute(o,t[o])}},pr=n=>{if(!n.input)return;const t=wi(n.input);t&&$e(t,n,"input")},Ln=(n,t)=>{!n.placeholder&&t.inputPlaceholder&&(n.placeholder=t.inputPlaceholder)},Ut=(n,t,e)=>{if(e.inputLabel){const i=document.createElement("label"),o=h["input-label"];i.setAttribute("for",n.id),i.className=o,typeof e.customClass=="object"&&H(i,e.customClass.inputLabel),i.innerText=e.inputLabel,t.insertAdjacentElement("beforebegin",i)}},wi=n=>{const t=V();if(t)return We(t,h[n]||h.input)},Rt=(n,t)=>{["string","number"].includes(typeof t)?n.value=`${t}`:kn(t)||Se(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},ie={};ie.text=ie.email=ie.password=ie.number=ie.tel=ie.url=ie.search=ie.date=ie["datetime-local"]=ie.time=ie.week=ie.month=(n,t)=>(Rt(n,t.inputValue),Ut(n,n,t),Ln(n,t),n.type=t.input,n);ie.file=(n,t)=>(Ut(n,n,t),Ln(n,t),n);ie.range=(n,t)=>{const e=n.querySelector("input"),i=n.querySelector("output");return Rt(e,t.inputValue),e.type=t.input,Rt(i,t.inputValue),Ut(e,n,t),n};ie.select=(n,t)=>{if(n.textContent="",t.inputPlaceholder){const e=document.createElement("option");Pe(e,t.inputPlaceholder),e.value="",e.disabled=!0,e.selected=!0,n.appendChild(e)}return Ut(n,n,t),n};ie.radio=n=>(n.textContent="",n);ie.checkbox=(n,t)=>{const e=on(V(),"checkbox");e.value="1",e.checked=!!t.inputValue;const i=n.querySelector("span");return Pe(i,t.inputPlaceholder||t.inputLabel),e};ie.textarea=(n,t)=>{Rt(n,t.inputValue),Ln(n,t),Ut(n,n,t);const e=i=>parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const i=parseInt(window.getComputedStyle(V()).width),o=()=>{if(!document.body.contains(n))return;const r=n.offsetWidth+e(n);r>i?V().style.width=`${r}px`:Ge(V(),"width",t.width)};new MutationObserver(o).observe(n,{attributes:!0,attributeFilter:["style"]})}}),n};const wr=(n,t)=>{const e=Dn();e&&(Un(e),$e(e,t,"htmlContainer"),t.html?(Fn(t.html,e),de(e,"block")):t.text?(e.textContent=t.text,de(e,"block")):we(e),fr(n,t))},br=(n,t)=>{const e=hi();e&&(Un(e),$t(e,t.footer,"block"),t.footer&&Fn(t.footer,e),$e(e,t,"footer"))},vr=(n,t)=>{const e=Z.innerParams.get(n),i=pt();if(i){if(e&&t.icon===e.icon){Xn(i,t),Zn(i,t);return}if(!t.icon&&!t.iconHtml){we(i);return}if(t.icon&&Object.keys(Ht).indexOf(t.icon)===-1){et(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),we(i);return}de(i),Xn(i,t),Zn(i,t),H(i,t.showClass&&t.showClass.icon)}},Zn=(n,t)=>{for(const[e,i]of Object.entries(Ht))t.icon!==e&&_e(n,i);H(n,t.icon&&Ht[t.icon]),Sr(n,t),yr(),$e(n,t,"icon")},yr=()=>{const n=V();if(!n)return;const t=window.getComputedStyle(n).getPropertyValue("background-color"),e=n.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let i=0;i<e.length;i++)e[i].style.backgroundColor=t},Cr=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,xr=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Xn=(n,t)=>{if(!t.icon&&!t.iconHtml)return;let e=n.innerHTML,i="";t.iconHtml?i=Gn(t.iconHtml):t.icon==="success"?(i=Cr,e=e.replace(/ style=".*?"/g,"")):t.icon==="error"?i=xr:t.icon&&(i=Gn({question:"?",warning:"!",info:"i"}[t.icon])),e.trim()!==i.trim()&&Pe(n,i)},Sr=(n,t)=>{if(t.iconColor){n.style.color=t.iconColor,n.style.borderColor=t.iconColor;for(const e of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Kn(n,e,"background-color",t.iconColor);Kn(n,".swal2-success-ring","border-color",t.iconColor)}},Gn=n=>`<div class="${h["icon-content"]}">${n}</div>`,Er=(n,t)=>{const e=fi();if(e){if(!t.imageUrl){we(e);return}de(e,""),e.setAttribute("src",t.imageUrl),e.setAttribute("alt",t.imageAlt||""),Ge(e,"width",t.imageWidth),Ge(e,"height",t.imageHeight),e.className=h.image,$e(e,t,"image")}};let On=!1,bi=0,vi=0,yi=0,Ci=0;const Ir=n=>{n.addEventListener("mousedown",Vt),document.body.addEventListener("mousemove",zt),n.addEventListener("mouseup",qt),n.addEventListener("touchstart",Vt),document.body.addEventListener("touchmove",zt),n.addEventListener("touchend",qt)},kr=n=>{n.removeEventListener("mousedown",Vt),document.body.removeEventListener("mousemove",zt),n.removeEventListener("mouseup",qt),n.removeEventListener("touchstart",Vt),document.body.removeEventListener("touchmove",zt),n.removeEventListener("touchend",qt)},Vt=n=>{const t=V();if(n.target===t||pt().contains(n.target)){On=!0;const e=xi(n);bi=e.clientX,vi=e.clientY,yi=parseInt(t.style.insetInlineStart)||0,Ci=parseInt(t.style.insetBlockStart)||0,H(t,"swal2-dragging")}},zt=n=>{const t=V();if(On){let{clientX:e,clientY:i}=xi(n);t.style.insetInlineStart=`${yi+(e-bi)}px`,t.style.insetBlockStart=`${Ci+(i-vi)}px`}},qt=()=>{const n=V();On=!1,_e(n,"swal2-dragging")},xi=n=>{let t=0,e=0;return n.type.startsWith("mouse")?(t=n.clientX,e=n.clientY):n.type.startsWith("touch")&&(t=n.touches[0].clientX,e=n.touches[0].clientY),{clientX:t,clientY:e}},Dr=(n,t)=>{const e=Ee(),i=V();if(!(!e||!i)){if(t.toast){Ge(e,"width",t.width),i.style.width="100%";const o=bt();o&&i.insertBefore(o,pt())}else Ge(i,"width",t.width);Ge(i,"padding",t.padding),t.color&&(i.style.color=t.color),t.background&&(i.style.background=t.background),we(en()),Ar(i,t),t.draggable&&!t.toast?(H(i,h.draggable),Ir(i)):(_e(i,h.draggable),kr(i))}},Ar=(n,t)=>{const e=t.showClass||{};n.className=`${h.popup} ${xe(n)?e.popup:""}`,t.toast?(H([document.documentElement,document.body],h["toast-shown"]),H(n,h.toast)):H(n,h.modal),$e(n,t,"popup"),typeof t.customClass=="string"&&H(n,t.customClass),t.icon&&H(n,h[`icon-${t.icon}`])},Mr=(n,t)=>{const e=An();if(!e)return;const{progressSteps:i,currentProgressStep:o}=t;if(!i||i.length===0||o===void 0){we(e);return}de(e),e.textContent="",o>=i.length&&Se("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.forEach((r,l)=>{const c=Tr(r);if(e.appendChild(c),l===o&&H(c,h["active-progress-step"]),l!==i.length-1){const u=$r(t);e.appendChild(u)}})},Tr=n=>{const t=document.createElement("li");return H(t,h["progress-step"]),Pe(t,n),t},$r=n=>{const t=document.createElement("li");return H(t,h["progress-step-line"]),n.progressStepsDistance&&Ge(t,"width",n.progressStepsDistance),t},Ur=(n,t)=>{const e=ui();e&&(Un(e),$t(e,t.title||t.titleText,"block"),t.title&&Fn(t.title,e),t.titleText&&(e.innerText=t.titleText),$e(e,t,"title"))},Si=(n,t)=>{Dr(n,t),sr(n,t),Mr(n,t),vr(n,t),Er(n,t),Ur(n,t),ar(n,t),wr(n,t),ir(n,t),br(n,t);const e=V();typeof t.didRender=="function"&&e&&t.didRender(e),P.eventEmitter.emit("didRender",e)},Pr=()=>xe(V()),Ei=()=>{var n;return(n=Re())===null||n===void 0?void 0:n.click()},Fr=()=>{var n;return(n=tt())===null||n===void 0?void 0:n.click()},Lr=()=>{var n;return(n=wt())===null||n===void 0?void 0:n.click()},vt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ii=n=>{n.keydownTarget&&n.keydownHandlerAdded&&(n.keydownTarget.removeEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!1)},Or=(n,t,e)=>{Ii(n),t.toast||(n.keydownHandler=i=>Nr(t,i,e),n.keydownTarget=t.keydownListenerCapture?window:V(),n.keydownListenerCapture=t.keydownListenerCapture,n.keydownTarget.addEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!0)},bn=(n,t)=>{var e;const i=Tn();if(i.length){n=n+t,n===i.length?n=0:n===-1&&(n=i.length-1),i[n].focus();return}(e=V())===null||e===void 0||e.focus()},ki=["ArrowRight","ArrowDown"],_r=["ArrowLeft","ArrowUp"],Nr=(n,t,e)=>{n&&(t.isComposing||t.keyCode===229||(n.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?jr(t,n):t.key==="Tab"?Br(t):[...ki,..._r].includes(t.key)?Hr(t.key):t.key==="Escape"&&Rr(t,n,e)))},jr=(n,t)=>{if(!Qt(t.allowEnterKey))return;const e=on(V(),t.input);if(n.target&&e&&n.target instanceof HTMLElement&&n.target.outerHTML===e.outerHTML){if(["textarea","file"].includes(t.input))return;Ei(),n.preventDefault()}},Br=n=>{const t=n.target,e=Tn();let i=-1;for(let o=0;o<e.length;o++)if(t===e[o]){i=o;break}n.shiftKey?bn(i,-1):bn(i,1),n.stopPropagation(),n.preventDefault()},Hr=n=>{const t=Tt(),e=Re(),i=tt(),o=wt();if(!t||!e||!i||!o)return;const r=[e,i,o];if(document.activeElement instanceof HTMLElement&&!r.includes(document.activeElement))return;const l=ki.includes(n)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let u=0;u<t.children.length;u++){if(c=c[l],!c)return;if(c instanceof HTMLButtonElement&&xe(c))break}c instanceof HTMLButtonElement&&c.focus()}},Rr=(n,t,e)=>{Qt(t.allowEscapeKey)&&(n.preventDefault(),e(vt.esc))};var gt={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Vr=()=>{const n=Ee();Array.from(document.body.children).forEach(e=>{e.contains(n)||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")||""),e.setAttribute("aria-hidden","true"))})},Di=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},Ai=typeof window<"u"&&!!window.GestureEvent,zr=()=>{if(Ai&&!ze(document.body,h.iosfix)){const n=document.body.scrollTop;document.body.style.top=`${n*-1}px`,H(document.body,h.iosfix),qr()}},qr=()=>{const n=Ee();if(!n)return;let t;n.ontouchstart=e=>{t=Wr(e)},n.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Wr=n=>{const t=n.target,e=Ee(),i=Dn();return!e||!i||Yr(n)||Kr(n)?!1:t===e||!Jn(e)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Jn(i)&&i.contains(t))},Yr=n=>n.touches&&n.touches.length&&n.touches[0].touchType==="stylus",Kr=n=>n.touches&&n.touches.length>1,Jr=()=>{if(ze(document.body,h.iosfix)){const n=parseInt(document.body.style.top,10);_e(document.body,h.iosfix),document.body.style.top="",document.body.scrollTop=n*-1}},Zr=()=>{const n=document.createElement("div");n.className=h["scrollbar-measure"],document.body.appendChild(n);const t=n.getBoundingClientRect().width-n.clientWidth;return document.body.removeChild(n),t};let ct=null;const Xr=n=>{ct===null&&(document.body.scrollHeight>window.innerHeight||n==="scroll")&&(ct=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ct+Zr()}px`)},Gr=()=>{ct!==null&&(document.body.style.paddingRight=`${ct}px`,ct=null)};function Mi(n,t,e,i){nn()?Qn(n,i):(Oo(e).then(()=>Qn(n,i)),Ii(P)),Ai?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),$n()&&(Gr(),Jr(),Di()),Qr()}function Qr(){_e([document.documentElement,document.body],[h.shown,h["height-auto"],h["no-backdrop"],h["toast-shown"]])}function Ye(n){n=ta(n);const t=gt.swalPromiseResolve.get(this),e=ea(this);this.isAwaitingPromise?n.isDismissed||(Pt(this),t(n)):e&&t(n)}const ea=n=>{const t=V();if(!t)return!1;const e=Z.innerParams.get(n);if(!e||ze(t,e.hideClass.popup))return!1;_e(t,e.showClass.popup),H(t,e.hideClass.popup);const i=Ee();return _e(i,e.showClass.backdrop),H(i,e.hideClass.backdrop),na(n,t,e),!0};function Ti(n){const t=gt.swalPromiseReject.get(this);Pt(this),t&&t(n)}const Pt=n=>{n.isAwaitingPromise&&(delete n.isAwaitingPromise,Z.innerParams.get(n)||n._destroy())},ta=n=>typeof n>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},n),na=(n,t,e)=>{var i;const o=Ee(),r=pi(t);typeof e.willClose=="function"&&e.willClose(t),(i=P.eventEmitter)===null||i===void 0||i.emit("willClose",t),r?ia(n,t,o,e.returnFocus,e.didClose):Mi(n,o,e.returnFocus,e.didClose)},ia=(n,t,e,i,o)=>{P.swalCloseEventFinishedCallback=Mi.bind(null,n,e,i,o);const r=function(l){if(l.target===t){var c;(c=P.swalCloseEventFinishedCallback)===null||c===void 0||c.call(P),delete P.swalCloseEventFinishedCallback,t.removeEventListener("animationend",r),t.removeEventListener("transitionend",r)}};t.addEventListener("animationend",r),t.addEventListener("transitionend",r)},Qn=(n,t)=>{setTimeout(()=>{var e;typeof t=="function"&&t.bind(n.params)(),(e=P.eventEmitter)===null||e===void 0||e.emit("didClose"),n._destroy&&n._destroy()})},mt=n=>{let t=V();if(t||new ut,t=V(),!t)return;const e=bt();nn()?we(pt()):oa(t,n),de(e),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},oa=(n,t)=>{const e=Tt(),i=bt();!e||!i||(!t&&xe(Re())&&(t=Re()),de(e),t&&(we(t),i.setAttribute("data-button-to-replace",t.className),e.insertBefore(i,t)),H([n,e],h.loading))},ra=(n,t)=>{t.input==="select"||t.input==="radio"?da(n,t):["text","email","number","tel","textarea"].some(e=>e===t.input)&&(In(t.inputValue)||kn(t.inputValue))&&(mt(Re()),ua(n,t))},aa=(n,t)=>{const e=n.getInput();if(!e)return null;switch(t.input){case"checkbox":return sa(e);case"radio":return la(e);case"file":return ca(e);default:return t.inputAutoTrim?e.value.trim():e.value}},sa=n=>n.checked?1:0,la=n=>n.checked?n.value:null,ca=n=>n.files&&n.files.length?n.getAttribute("multiple")!==null?n.files:n.files[0]:null,da=(n,t)=>{const e=V();if(!e)return;const i=o=>{t.input==="select"?fa(e,Wt(o),t):t.input==="radio"&&ha(e,Wt(o),t)};In(t.inputOptions)||kn(t.inputOptions)?(mt(Re()),At(t.inputOptions).then(o=>{n.hideLoading(),i(o)})):typeof t.inputOptions=="object"?i(t.inputOptions):et(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},ua=(n,t)=>{const e=n.getInput();e&&(we(e),At(t.inputValue).then(i=>{e.value=t.input==="number"?`${parseFloat(i)||0}`:`${i}`,de(e),e.focus(),n.hideLoading()}).catch(i=>{et(`Error in inputValue promise: ${i}`),e.value="",de(e),e.focus(),n.hideLoading()}))};function fa(n,t,e){const i=We(n,h.select);if(!i)return;const o=(r,l,c)=>{const u=document.createElement("option");u.value=c,Pe(u,l),u.selected=$i(c,e.inputValue),r.appendChild(u)};t.forEach(r=>{const l=r[0],c=r[1];if(Array.isArray(c)){const u=document.createElement("optgroup");u.label=l,u.disabled=!1,i.appendChild(u),c.forEach(U=>o(u,U[1],U[0]))}else o(i,c,l)}),i.focus()}function ha(n,t,e){const i=We(n,h.radio);if(!i)return;t.forEach(r=>{const l=r[0],c=r[1],u=document.createElement("input"),U=document.createElement("label");u.type="radio",u.name=h.radio,u.value=l,$i(l,e.inputValue)&&(u.checked=!0);const x=document.createElement("span");Pe(x,c),x.className=h.label,U.appendChild(u),U.appendChild(x),i.appendChild(U)});const o=i.querySelectorAll("input");o.length&&o[0].focus()}const Wt=n=>{const t=[];return n instanceof Map?n.forEach((e,i)=>{let o=e;typeof o=="object"&&(o=Wt(o)),t.push([i,o])}):Object.keys(n).forEach(e=>{let i=n[e];typeof i=="object"&&(i=Wt(i)),t.push([e,i])}),t},$i=(n,t)=>!!t&&t.toString()===n.toString(),ga=n=>{const t=Z.innerParams.get(n);n.disableButtons(),t.input?Ui(n,"confirm"):Nn(n,!0)},ma=n=>{const t=Z.innerParams.get(n);n.disableButtons(),t.returnInputValueOnDeny?Ui(n,"deny"):_n(n,!1)},pa=(n,t)=>{n.disableButtons(),t(vt.cancel)},Ui=(n,t)=>{const e=Z.innerParams.get(n);if(!e.input){et(`The "input" parameter is needed to be set when using returnInputValueOn${En(t)}`);return}const i=n.getInput(),o=aa(n,e);e.inputValidator?wa(n,o,t):i&&!i.checkValidity()?(n.enableButtons(),n.showValidationMessage(e.validationMessage||i.validationMessage)):t==="deny"?_n(n,o):Nn(n,o)},wa=(n,t,e)=>{const i=Z.innerParams.get(n);n.disableInput(),Promise.resolve().then(()=>At(i.inputValidator(t,i.validationMessage))).then(r=>{n.enableButtons(),n.enableInput(),r?n.showValidationMessage(r):e==="deny"?_n(n,t):Nn(n,t)})},_n=(n,t)=>{const e=Z.innerParams.get(n||void 0);e.showLoaderOnDeny&&mt(tt()),e.preDeny?(n.isAwaitingPromise=!0,Promise.resolve().then(()=>At(e.preDeny(t,e.validationMessage))).then(o=>{o===!1?(n.hideLoading(),Pt(n)):n.close({isDenied:!0,value:typeof o>"u"?t:o})}).catch(o=>Pi(n||void 0,o))):n.close({isDenied:!0,value:t})},ei=(n,t)=>{n.close({isConfirmed:!0,value:t})},Pi=(n,t)=>{n.rejectPromise(t)},Nn=(n,t)=>{const e=Z.innerParams.get(n||void 0);e.showLoaderOnConfirm&&mt(),e.preConfirm?(n.resetValidationMessage(),n.isAwaitingPromise=!0,Promise.resolve().then(()=>At(e.preConfirm(t,e.validationMessage))).then(o=>{xe(en())||o===!1?(n.hideLoading(),Pt(n)):ei(n,typeof o>"u"?t:o)}).catch(o=>Pi(n||void 0,o))):ei(n,t)};function Yt(){const n=Z.innerParams.get(this);if(!n)return;const t=Z.domCache.get(this);we(t.loader),nn()?n.icon&&de(pt()):ba(t),_e([t.popup,t.actions],h.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const ba=n=>{const t=n.popup.getElementsByClassName(n.loader.getAttribute("data-button-to-replace"));t.length?de(t[0],"inline-block"):qo()&&we(n.actions)};function Fi(){const n=Z.innerParams.get(this),t=Z.domCache.get(this);return t?on(t.popup,n.input):null}function Li(n,t,e){const i=Z.domCache.get(n);t.forEach(o=>{i[o].disabled=e})}function Oi(n,t){const e=V();if(!(!e||!n))if(n.type==="radio"){const i=e.querySelectorAll(`[name="${h.radio}"]`);for(let o=0;o<i.length;o++)i[o].disabled=t}else n.disabled=t}function _i(){Li(this,["confirmButton","denyButton","cancelButton"],!1)}function Ni(){Li(this,["confirmButton","denyButton","cancelButton"],!0)}function ji(){Oi(this.getInput(),!1)}function Bi(){Oi(this.getInput(),!0)}function Hi(n){const t=Z.domCache.get(this),e=Z.innerParams.get(this);Pe(t.validationMessage,n),t.validationMessage.className=h["validation-message"],e.customClass&&e.customClass.validationMessage&&H(t.validationMessage,e.customClass.validationMessage),de(t.validationMessage);const i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",h["validation-message"]),gi(i),H(i,h.inputerror))}function Ri(){const n=Z.domCache.get(this);n.validationMessage&&we(n.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),_e(t,h.inputerror))}const dt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},va=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],ya={allowEnterKey:void 0},Ca=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Vi=n=>Object.prototype.hasOwnProperty.call(dt,n),zi=n=>va.indexOf(n)!==-1,qi=n=>ya[n],xa=n=>{Vi(n)||Se(`Unknown parameter "${n}"`)},Sa=n=>{Ca.includes(n)&&Se(`The parameter "${n}" is incompatible with toasts`)},Ea=n=>{const t=qi(n);t&&di(n,t)},Ia=n=>{n.backdrop===!1&&n.allowOutsideClick&&Se('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in n)xa(t),n.toast&&Sa(t),Ea(t)};function Wi(n){const t=V(),e=Z.innerParams.get(this);if(!t||ze(t,e.hideClass.popup)){Se("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=ka(n),o=Object.assign({},e,i);Si(this,o),Z.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,n),writable:!1,enumerable:!0}})}const ka=n=>{const t={};return Object.keys(n).forEach(e=>{zi(e)?t[e]=n[e]:Se(`Invalid parameter to update: ${e}`)}),t};function Yi(){const n=Z.domCache.get(this),t=Z.innerParams.get(this);if(!t){Ki(this);return}n.popup&&P.swalCloseEventFinishedCallback&&(P.swalCloseEventFinishedCallback(),delete P.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),P.eventEmitter.emit("didDestroy"),Da(this)}const Da=n=>{Ki(n),delete n.params,delete P.keydownHandler,delete P.keydownTarget,delete P.currentInstance},Ki=n=>{n.isAwaitingPromise?(fn(Z,n),n.isAwaitingPromise=!0):(fn(gt,n),fn(Z,n),delete n.isAwaitingPromise,delete n.disableButtons,delete n.enableButtons,delete n.getInput,delete n.disableInput,delete n.enableInput,delete n.hideLoading,delete n.disableLoading,delete n.showValidationMessage,delete n.resetValidationMessage,delete n.close,delete n.closePopup,delete n.closeModal,delete n.closeToast,delete n.rejectPromise,delete n.update,delete n._destroy)},fn=(n,t)=>{for(const e in n)n[e].delete(t)};var Aa=Object.freeze({__proto__:null,_destroy:Yi,close:Ye,closeModal:Ye,closePopup:Ye,closeToast:Ye,disableButtons:Ni,disableInput:Bi,disableLoading:Yt,enableButtons:_i,enableInput:ji,getInput:Fi,handleAwaitingPromise:Pt,hideLoading:Yt,rejectPromise:Ti,resetValidationMessage:Ri,showValidationMessage:Hi,update:Wi});const Ma=(n,t,e)=>{n.toast?Ta(n,t,e):(Ua(t),Pa(t),Fa(n,t,e))},Ta=(n,t,e)=>{t.popup.onclick=()=>{n&&($a(n)||n.timer||n.input)||e(vt.close)}},$a=n=>!!(n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton);let Kt=!1;const Ua=n=>{n.popup.onmousedown=()=>{n.container.onmouseup=function(t){n.container.onmouseup=()=>{},t.target===n.container&&(Kt=!0)}}},Pa=n=>{n.container.onmousedown=t=>{t.target===n.container&&t.preventDefault(),n.popup.onmouseup=function(e){n.popup.onmouseup=()=>{},(e.target===n.popup||e.target instanceof HTMLElement&&n.popup.contains(e.target))&&(Kt=!0)}}},Fa=(n,t,e)=>{t.container.onclick=i=>{if(Kt){Kt=!1;return}i.target===t.container&&Qt(n.allowOutsideClick)&&e(vt.backdrop)}},La=n=>typeof n=="object"&&n.jquery,ti=n=>n instanceof Element||La(n),Oa=n=>{const t={};return typeof n[0]=="object"&&!ti(n[0])?Object.assign(t,n[0]):["title","html","icon"].forEach((e,i)=>{const o=n[i];typeof o=="string"||ti(o)?t[e]=o:o!==void 0&&et(`Unexpected type of ${e}! Expected "string" or "Element", got ${typeof o}`)}),t};function _a(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return new this(...t)}function Na(n){class t extends this{_main(i,o){return super._main(i,Object.assign({},n,o))}}return t}const ja=()=>P.timeout&&P.timeout.getTimerLeft(),Ji=()=>{if(P.timeout)return Wo(),P.timeout.stop()},Zi=()=>{if(P.timeout){const n=P.timeout.start();return Pn(n),n}},Ba=()=>{const n=P.timeout;return n&&(n.running?Ji():Zi())},Ha=n=>{if(P.timeout){const t=P.timeout.increase(n);return Pn(t,!0),t}},Ra=()=>!!(P.timeout&&P.timeout.isRunning());let ni=!1;const vn={};function Va(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";vn[n]=this,ni||(document.body.addEventListener("click",za),ni=!0)}const za=n=>{for(let t=n.target;t&&t!==document;t=t.parentNode)for(const e in vn){const i=t.getAttribute(e);if(i){vn[e].fire({template:i});return}}};class qa{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,e){const i=this._getHandlersByEventName(t);i.includes(e)||i.push(e)}once(t,e){var i=this;const o=function(){i.removeListener(t,o);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];e.apply(i,l)};this.on(t,o)}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];this._getHandlersByEventName(t).forEach(r=>{try{r.apply(this,i)}catch(l){console.error(l)}})}removeListener(t,e){const i=this._getHandlersByEventName(t),o=i.indexOf(e);o>-1&&i.splice(o,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}P.eventEmitter=new qa;const Wa=(n,t)=>{P.eventEmitter.on(n,t)},Ya=(n,t)=>{P.eventEmitter.once(n,t)},Ka=(n,t)=>{if(!n){P.eventEmitter.reset();return}t?P.eventEmitter.removeListener(n,t):P.eventEmitter.removeAllListeners(n)};var Ja=Object.freeze({__proto__:null,argsToParams:Oa,bindClickHandler:Va,clickCancel:Lr,clickConfirm:Ei,clickDeny:Fr,enableLoading:mt,fire:_a,getActions:Tt,getCancelButton:wt,getCloseButton:Mn,getConfirmButton:Re,getContainer:Ee,getDenyButton:tt,getFocusableElements:Tn,getFooter:hi,getHtmlContainer:Dn,getIcon:pt,getIconContent:Bo,getImage:fi,getInputLabel:Ho,getLoader:bt,getPopup:V,getProgressSteps:An,getTimerLeft:ja,getTimerProgressBar:tn,getTitle:ui,getValidationMessage:en,increaseTimer:Ha,isDeprecatedParameter:qi,isLoading:Vo,isTimerRunning:Ra,isUpdatableParameter:zi,isValidParameter:Vi,isVisible:Pr,mixin:Na,off:Ka,on:Wa,once:Ya,resumeTimer:Zi,showLoading:mt,stopTimer:Ji,toggleTimer:Ba});class Za{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Xi=["swal-title","swal-html","swal-footer"],Xa=n=>{const t=typeof n.template=="string"?document.querySelector(n.template):n.template;if(!t)return{};const e=t.content;return rs(e),Object.assign(Ga(e),Qa(e),es(e),ts(e),ns(e),is(e),os(e,Xi))},Ga=n=>{const t={};return Array.from(n.querySelectorAll("swal-param")).forEach(i=>{Qe(i,["name","value"]);const o=i.getAttribute("name"),r=i.getAttribute("value");!o||!r||(typeof dt[o]=="boolean"?t[o]=r!=="false":typeof dt[o]=="object"?t[o]=JSON.parse(r):t[o]=r)}),t},Qa=n=>{const t={};return Array.from(n.querySelectorAll("swal-function-param")).forEach(i=>{const o=i.getAttribute("name"),r=i.getAttribute("value");!o||!r||(t[o]=new Function(`return ${r}`)())}),t},es=n=>{const t={};return Array.from(n.querySelectorAll("swal-button")).forEach(i=>{Qe(i,["type","color","aria-label"]);const o=i.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(t[`${o}ButtonText`]=i.innerHTML,t[`show${En(o)}Button`]=!0,i.hasAttribute("color")&&(t[`${o}ButtonColor`]=i.getAttribute("color")),i.hasAttribute("aria-label")&&(t[`${o}ButtonAriaLabel`]=i.getAttribute("aria-label")))}),t},ts=n=>{const t={},e=n.querySelector("swal-image");return e&&(Qe(e,["src","width","height","alt"]),e.hasAttribute("src")&&(t.imageUrl=e.getAttribute("src")||void 0),e.hasAttribute("width")&&(t.imageWidth=e.getAttribute("width")||void 0),e.hasAttribute("height")&&(t.imageHeight=e.getAttribute("height")||void 0),e.hasAttribute("alt")&&(t.imageAlt=e.getAttribute("alt")||void 0)),t},ns=n=>{const t={},e=n.querySelector("swal-icon");return e&&(Qe(e,["type","color"]),e.hasAttribute("type")&&(t.icon=e.getAttribute("type")),e.hasAttribute("color")&&(t.iconColor=e.getAttribute("color")),t.iconHtml=e.innerHTML),t},is=n=>{const t={},e=n.querySelector("swal-input");e&&(Qe(e,["type","label","placeholder","value"]),t.input=e.getAttribute("type")||"text",e.hasAttribute("label")&&(t.inputLabel=e.getAttribute("label")),e.hasAttribute("placeholder")&&(t.inputPlaceholder=e.getAttribute("placeholder")),e.hasAttribute("value")&&(t.inputValue=e.getAttribute("value")));const i=Array.from(n.querySelectorAll("swal-input-option"));return i.length&&(t.inputOptions={},i.forEach(o=>{Qe(o,["value"]);const r=o.getAttribute("value");if(!r)return;const l=o.innerHTML;t.inputOptions[r]=l})),t},os=(n,t)=>{const e={};for(const i in t){const o=t[i],r=n.querySelector(o);r&&(Qe(r,[]),e[o.replace(/^swal-/,"")]=r.innerHTML.trim())}return e},rs=n=>{const t=Xi.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(n.children).forEach(e=>{const i=e.tagName.toLowerCase();t.includes(i)||Se(`Unrecognized element <${i}>`)})},Qe=(n,t)=>{Array.from(n.attributes).forEach(e=>{t.indexOf(e.name)===-1&&Se([`Unrecognized attribute "${e.name}" on <${n.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},Gi=10,as=n=>{const t=Ee(),e=V();typeof n.willOpen=="function"&&n.willOpen(e),P.eventEmitter.emit("willOpen",e);const o=window.getComputedStyle(document.body).overflowY;cs(t,e,n),setTimeout(()=>{ss(t,e)},Gi),$n()&&(ls(t,n.scrollbarPadding,o),Vr()),!nn()&&!P.previousActiveElement&&(P.previousActiveElement=document.activeElement),typeof n.didOpen=="function"&&setTimeout(()=>n.didOpen(e)),P.eventEmitter.emit("didOpen",e),_e(t,h["no-transition"])},Jt=n=>{const t=V();if(n.target!==t)return;const e=Ee();t.removeEventListener("animationend",Jt),t.removeEventListener("transitionend",Jt),e.style.overflowY="auto"},ss=(n,t)=>{pi(t)?(n.style.overflowY="hidden",t.addEventListener("animationend",Jt),t.addEventListener("transitionend",Jt)):n.style.overflowY="auto"},ls=(n,t,e)=>{zr(),t&&e!=="hidden"&&Xr(e),setTimeout(()=>{n.scrollTop=0})},cs=(n,t,e)=>{H(n,e.showClass.backdrop),e.animation?(t.style.setProperty("opacity","0","important"),de(t,"grid"),setTimeout(()=>{H(t,e.showClass.popup),t.style.removeProperty("opacity")},Gi)):de(t,"grid"),H([document.documentElement,document.body],h.shown),e.heightAuto&&e.backdrop&&!e.toast&&H([document.documentElement,document.body],h["height-auto"])};var ii={email:(n,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(n)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(n,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(n)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function ds(n){n.inputValidator||(n.input==="email"&&(n.inputValidator=ii.email),n.input==="url"&&(n.inputValidator=ii.url))}function us(n){(!n.target||typeof n.target=="string"&&!document.querySelector(n.target)||typeof n.target!="string"&&!n.target.appendChild)&&(Se('Target parameter is not valid, defaulting to "body"'),n.target="body")}function fs(n){ds(n),n.showLoaderOnConfirm&&!n.preConfirm&&Se(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),us(n),typeof n.title=="string"&&(n.title=n.title.split(`
`).join("<br />")),er(n)}let He;var Nt=new WeakMap;class re{constructor(){if(Uo(this,Nt,void 0),typeof window>"u")return;He=this;for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const o=Object.freeze(this.constructor.argsToParams(e));this.params=o,this.isAwaitingPromise=!1,Po(Nt,this,this._main(He.params))}_main(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ia(Object.assign({},e,t)),P.currentInstance){const r=gt.swalPromiseResolve.get(P.currentInstance),{isAwaitingPromise:l}=P.currentInstance;P.currentInstance._destroy(),l||r({isDismissed:!0}),$n()&&Di()}P.currentInstance=He;const i=gs(t,e);fs(i),Object.freeze(i),P.timeout&&(P.timeout.stop(),delete P.timeout),clearTimeout(P.restoreFocusTimeout);const o=ms(He);return Si(He,i),Z.innerParams.set(He,i),hs(He,o,i)}then(t){return Wn(Nt,this).then(t)}finally(t){return Wn(Nt,this).finally(t)}}const hs=(n,t,e)=>new Promise((i,o)=>{const r=l=>{n.close({isDismissed:!0,dismiss:l})};gt.swalPromiseResolve.set(n,i),gt.swalPromiseReject.set(n,o),t.confirmButton.onclick=()=>{ga(n)},t.denyButton.onclick=()=>{ma(n)},t.cancelButton.onclick=()=>{pa(n,r)},t.closeButton.onclick=()=>{r(vt.close)},Ma(e,t,r),Or(P,e,r),ra(n,e),as(e),ps(P,e,r),ws(t,e),setTimeout(()=>{t.container.scrollTop=0})}),gs=(n,t)=>{const e=Xa(n),i=Object.assign({},dt,t,e,n);return i.showClass=Object.assign({},dt.showClass,i.showClass),i.hideClass=Object.assign({},dt.hideClass,i.hideClass),i.animation===!1&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},ms=n=>{const t={popup:V(),container:Ee(),actions:Tt(),confirmButton:Re(),denyButton:tt(),cancelButton:wt(),loader:bt(),closeButton:Mn(),validationMessage:en(),progressSteps:An()};return Z.domCache.set(n,t),t},ps=(n,t,e)=>{const i=tn();we(i),t.timer&&(n.timeout=new Za(()=>{e("timer"),delete n.timeout},t.timer),t.timerProgressBar&&(de(i),$e(i,t,"timerProgressBar"),setTimeout(()=>{n.timeout&&n.timeout.running&&Pn(t.timer)})))},ws=(n,t)=>{if(!t.toast){if(!Qt(t.allowEnterKey)){di("allowEnterKey"),ys();return}bs(n)||vs(n,t)||bn(-1,1)}},bs=n=>{const t=Array.from(n.popup.querySelectorAll("[autofocus]"));for(const e of t)if(e instanceof HTMLElement&&xe(e))return e.focus(),!0;return!1},vs=(n,t)=>t.focusDeny&&xe(n.denyButton)?(n.denyButton.focus(),!0):t.focusCancel&&xe(n.cancelButton)?(n.cancelButton.focus(),!0):t.focusConfirm&&xe(n.confirmButton)?(n.confirmButton.focus(),!0):!1,ys=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const n=new Date,t=localStorage.getItem("swal-initiation");t?(n.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout(()=>{e.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${n}`)}re.prototype.disableButtons=Ni;re.prototype.enableButtons=_i;re.prototype.getInput=Fi;re.prototype.disableInput=Bi;re.prototype.enableInput=ji;re.prototype.hideLoading=Yt;re.prototype.disableLoading=Yt;re.prototype.showValidationMessage=Hi;re.prototype.resetValidationMessage=Ri;re.prototype.close=Ye;re.prototype.closePopup=Ye;re.prototype.closeModal=Ye;re.prototype.closeToast=Ye;re.prototype.rejectPromise=Ti;re.prototype.update=Wi;re.prototype._destroy=Yi;Object.assign(re,Ja);Object.keys(Aa).forEach(n=>{re[n]=function(){return He&&He[n]?He[n](...arguments):null}});re.DismissReason=vt;re.version="11.15.3";const ut=re;ut.default=ut;typeof document<"u"&&function(n,t){var e=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(e),e.styleSheet)e.styleSheet.disabled||(e.styleSheet.cssText=t);else try{e.innerHTML=t}catch{e.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');let B=class ye{constructor({title:t,type:e,message:i}){this.title=t,this.type=e,this.message=i}show(){switch(this.type){case"info":ye.showInfo(this.title,this.message);break;case"success":ye.showSuccess(this.message);break;case"warning":ye.showWarning(this.title,this.message);break;case"error":ye.showError(this.message);break;default:ye.showInfo(this.message);break}}static show(t,e,i){switch(t){case"info":ye.showInfo(e,i);break;case"success":ye.showSuccess(i);break;case"error":ye.showError(i);break;case"warning":ye.showWarning(e,i);break;default:ye.showInfo(this.message);break}}static showToast(t,e){ut.fire({toast:!0,position:"top-end",icon:t,title:e,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}static confirmAction(t,e,i){ut.fire({title:t,text:e,icon:"warning",showCancelButton:!0,confirmButtonText:"Oui, confirmer",cancelButtonText:"Annuler"}).then(o=>{o.isConfirmed&&typeof i=="function"&&i()})}static showAlert(t,e,i){ut.fire({icon:t,title:e,html:i,confirmButtonText:"OK",width:"auto"})}static showError(t="Une erreur s'est produite."){ye.showAlert("error","Une erreur s'est produite",t)}static showSuccess(t="Opration ralise avec succs."){ye.showToast("success",t)}static showInfo(t="Information",e){ye.showAlert("info",t,e)}static showWarning(t="Avertissement",e){ye.showAlert("warning",t,e)}};class Je{constructor(t="#card_crud"){this.loadingElementId=t+"-gapp-loading",this.containerSelector=t}init(){}show(){const t=document.querySelector(this.containerSelector);if(!t)return console.error("Conteneur de chargement introuvable."),!1;if(!this.isLoadingVisible()){const e=document.createElement("div");e.id=this.loadingElementId,e.className="d-flex justify-content-center align-items-center",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.background="rgba(255, 255, 255, 0.5)",e.style.zIndex="1060",e.innerHTML='<div class="spinner-border text-primary" role="status"></div>',t.appendChild(e)}return!0}showNomBloquante(t){const e=document.querySelector(this.containerSelector),i=t||"Chargement";if(!e)return console.error("Conteneur de chargement introuvable."),!1;let o=document.getElementById(this.loadingElementId);if(o){const r=o.querySelector(".loading-message");r&&(r.textContent=`${i} ...`)}else{const U=10+document.querySelectorAll(".loading-non-bloquant").length*(40+10),x=document.createElement("div");x.id=this.loadingElementId,x.className="loading-non-bloquant d-flex align-items-center p-2 shadow-sm",x.style.position="fixed",x.style.top=`${U}px`,x.style.left="50%",x.style.transform="translateX(-50%)",x.style.background="#f8d7da",x.style.color="#721c24",x.style.border="1px solid #f5c6cb",x.style.borderRadius="5px",x.style.zIndex="999999",x.style.fontSize="14px",x.style.fontWeight="bold",x.style.minWidth="120px",x.style.textAlign="center",x.innerHTML=`
            <span class="spinner-border spinner-border-sm text-danger me-2"></span>
            <span style="padding:2px" class="loading-message">${i} ...</span>
        `,e.appendChild(x)}return!0}hide(){const t=document.querySelector(this.containerSelector);if(!t){console.error("Conteneur de chargement introuvable.");return}const e=document.getElementById(this.loadingElementId);e&&t.removeChild(e),document.querySelectorAll(".loading-non-bloquant").forEach((o,r)=>{const u=10+r*50;o.style.top=`${u}px`})}isLoadingVisible(){return document.getElementById(this.loadingElementId)!==null}}const he=class he{constructor(t,e){this.contextKey=t,this.modelName=e,he.init(),he.viewState[this.contextKey]||(he.viewState[this.contextKey]={})}static init(){const t=window.viewState||{};Object.entries(t).forEach(([e,i])=>{he.viewState[e]=i})}getContext(){return he.viewState[this.contextKey]}getVariable(t){return this.getContext()[t]??null}setVariable(t,e){this.getContext()[t]=e}removeVariable(t){delete this.getContext()[t]}getVariablesByType(t){return Array.isArray(t)||(t=[t]),Object.entries(this.getContext()).filter(([e])=>t.some(i=>e.startsWith(`${i}.${this.modelName}.`))||t.some(i=>e.startsWith(`${i}.global.`))).reduce((e,[i,o])=>(t.forEach(r=>{i.startsWith(`${r}.${this.modelName}.`)?e[i.replace(`${r}.${this.modelName}.`,"")]=o:i.startsWith(`${r}.global.`)&&(e[i.replace(`${r}.global.`,"")]=o)}),e),{})}getStateVariablesByType(t){return Array.isArray(t)||(t=[t]),Object.entries(this.getContext()).filter(([e])=>t.some(i=>e.startsWith(`${i}.${this.modelName}.`))||t.some(i=>e.startsWith(`${i}.global.`))).reduce((e,[i,o])=>(t.forEach(r=>{(i.startsWith(`${r}.${this.modelName}.`)||i.startsWith(`${r}.global.`))&&(e[i]=o)}),e),{})}getScopeVariables(){return this.getVariablesByType(["scope"])}getScopeFormVariables(){return this.getVariablesByType(["scope","scope_form"])}getFormVariables(){return this.getVariablesByType(["scope","scope_form","form"])}getTableVariables(){return this.getVariablesByType(["scope","table"])}getFilterVariables(){return this.getVariablesByType(["scope","filter"])}getStatsVariables(){return this.getVariablesByType(["stats"])}getSortVariables(){return this.getVariablesByType(["sort"])}updatFilterVariables(t){he.viewState[this.contextKey]||(he.viewState[this.contextKey]={}),Object.entries(t).forEach(([i,o])=>{const r=`filter.${this.modelName}.${i}`;o===""||o===null||o===void 0?delete he.viewState[this.contextKey][r]:he.viewState[this.contextKey][r]=o});const e=Object.values(t).some(i=>i!==""&&i!==null&&i!==void 0);this.setVariable(`param.${this.modelName}.reset_filter`,e?0:1)}updatSortVariables(t){he.viewState[this.contextKey]||(he.viewState[this.contextKey]={}),Object.entries(t).forEach(([e,i])=>{const o=`sort.${this.modelName}.${e}`;i===""||i===null||i===void 0?delete he.viewState[this.contextKey][o]:he.viewState[this.contextKey][o]=i})}updateContext(t){Object.assign(this.getContext(),t)}getContextParams(){const t=new URLSearchParams,e={viewState:this.getContext(),contextKey:this.contextKey};return t.append("viewState",JSON.stringify(e)),t.toString()}addContextToConfig(t){const e={...t},i=this.getContextParams();return Object.keys(e).forEach(o=>{if(o.toLowerCase().endsWith("url")&&typeof e[o]=="string"){const r=new URL(e[o],window.location.origin),l=r.search?"&":"?";e[o]=`${r.toString()}${l}${i}`}}),e}toString(){return JSON.stringify(he.viewState)}};st(he,"viewState",window.viewState||{});let Zt=he;class R{static bindEvent(t,e,i){$(document).off(t,e).on(t,e,i)}}class Qi{constructor(t){this.entitiesArray=t||[]}initialize(){if(!Array.isArray(this.entitiesArray)||this.entitiesArray.length===0){console.warn("Aucune configuration valide trouve pour DynamicFieldVisibilityTreatment.");return}this.entitiesArray.forEach(t=>{const{targetDropdownId:e,dataDefinitions:i,fieldMappings:o,typeField:r}=t;if(!i||!e||!o||!r){console.warn("Configuration incomplte pour DynamicFieldVisibilityTreatment:",t);return}if(!document.getElementById(e)){console.warn(`Dropdown avec l'ID "${e}" introuvable.`);return}this.handleVisibility(i,o,r,""),R.bindEvent("change",`#${e}`,u=>{u.preventDefault(),this.handleVisibility(i,o,r,u.target.value)});const c=$(`#${e}`).select2("val");c&&this.handleVisibility(i,o,r,c)})}listEventListeners(t){const e=Object.keys(t).filter(i=>i.startsWith("on")).map(i=>i.slice(2));console.log("vnements supports par",t,":",e)}handleVisibility(t,e,i,o){e.forEach(({fieldId:l})=>{const c=$(`#${l}`);c.length>0&&c.closest(".form-group").hide()});const r=t.find(l=>l.id==o);r&&e.forEach(({type:l,fieldId:c})=>{r[i]===l&&this.toggleFieldVisibility(c,!0)})}toggleFieldVisibility(t,e){const i=$(`#${t}`);i.length>0&&i.closest(".form-group").toggle(e)}}const Cs=window;function eo(n,t,e={}){const i={tab:"	",indentOn:/[({\[]$/,moveToNewLine:/^[)}\]]/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:Cs,...e},o=i.window,r=o.document,l=[],c=[];let u=-1,U=!1,x=()=>{},q;n.setAttribute("contenteditable","plaintext-only"),n.setAttribute("spellcheck",i.spellcheck?"true":"false"),n.style.outline="none",n.style.overflowWrap="break-word",n.style.overflowY="auto",n.style.whiteSpace="pre-wrap";const Y=(f,b)=>{t(f,b)};let Q=!1;n.contentEditable!=="plaintext-only"&&(Q=!0),Q&&n.setAttribute("contenteditable","true");const se=rt(()=>{const f=m();Y(n,f),w(f)},30);let A=!1;const _=f=>!ee(f)&&!ge(f)&&f.key!=="Meta"&&f.key!=="Control"&&f.key!=="Alt"&&!f.key.startsWith("Arrow"),X=rt(f=>{_(f)&&(ue(),A=!1)},300),p=(f,b)=>{l.push([f,b]),n.addEventListener(f,b)};p("keydown",f=>{f.defaultPrevented||(q=le(),i.preserveIdent?L(f):M(f),i.catchTab&&ae(f),i.addClosing&&W(f),i.history&&(be(f),_(f)&&!A&&(ue(),A=!0)),Q&&!Ne(f)&&w(m()))}),p("keyup",f=>{f.defaultPrevented||f.isComposing||(q!==le()&&se(),X(f),x(le()))}),p("focus",f=>{U=!0}),p("blur",f=>{U=!1}),p("paste",f=>{ue(),nt(f),ue(),x(le())}),p("cut",f=>{ue(),it(f),ue(),x(le())});function m(){const f=me(),b={start:0,end:0,dir:void 0};let{anchorNode:E,anchorOffset:T,focusNode:j,focusOffset:K}=f;if(!E||!j)throw"error1";if(E===n&&j===n)return b.start=T>0&&n.textContent?n.textContent.length:0,b.end=K>0&&n.textContent?n.textContent.length:0,b.dir=K>=T?"->":"<-",b;if(E.nodeType===Node.ELEMENT_NODE){const ne=r.createTextNode("");E.insertBefore(ne,E.childNodes[T]),E=ne,T=0}if(j.nodeType===Node.ELEMENT_NODE){const ne=r.createTextNode("");j.insertBefore(ne,j.childNodes[K]),j=ne,K=0}return ot(n,ne=>{if(ne===E&&ne===j)return b.start+=T,b.end+=K,b.dir=T<=K?"->":"<-","stop";if(ne===E)if(b.start+=T,!b.dir)b.dir="->";else return"stop";else if(ne===j)if(b.end+=K,!b.dir)b.dir="<-";else return"stop";ne.nodeType===Node.TEXT_NODE&&(b.dir!="->"&&(b.start+=ne.nodeValue.length),b.dir!="<-"&&(b.end+=ne.nodeValue.length))}),n.normalize(),b}function w(f){var xt,Lt;const b=me();let E,T=0,j,K=0;if(f.dir||(f.dir="->"),f.start<0&&(f.start=0),f.end<0&&(f.end=0),f.dir=="<-"){const{start:ke,end:Le}=f;f.start=Le,f.end=ke}let ne=0;ot(n,ke=>{if(ke.nodeType!==Node.TEXT_NODE)return;const Le=(ke.nodeValue||"").length;if(ne+Le>f.start&&(E||(E=ke,T=f.start-ne),ne+Le>f.end))return j=ke,K=f.end-ne,"stop";ne+=Le}),E||(E=n,T=n.childNodes.length),j||(j=n,K=n.childNodes.length),f.dir=="<-"&&([E,T,j,K]=[j,K,E,T]);{const ke=C(E);if(ke){const je=r.createTextNode("");(xt=ke.parentNode)==null||xt.insertBefore(je,ke),E=je,T=0}const Le=C(j);if(Le){const je=r.createTextNode("");(Lt=Le.parentNode)==null||Lt.insertBefore(je,Le),j=je,K=0}}b.setBaseAndExtent(E,T,j,K),n.normalize()}function C(f){for(;f&&f!==n;){if(f.nodeType===Node.ELEMENT_NODE){const b=f;if(b.getAttribute("contenteditable")=="false")return b}f=f.parentNode}}function v(){const b=me().getRangeAt(0),E=r.createRange();return E.selectNodeContents(n),E.setEnd(b.startContainer,b.startOffset),E.toString()}function k(){const b=me().getRangeAt(0),E=r.createRange();return E.selectNodeContents(n),E.setStart(b.endContainer,b.endOffset),E.toString()}function L(f){if(f.key==="Enter"){const b=v(),E=k();let[T]=Ie(b),j=T;if(i.indentOn.test(b)&&(j+=i.tab),j.length>0?(fe(f),f.stopPropagation(),te(`
`+j)):M(f),j!==T&&i.moveToNewLine.test(E)){const K=m();te(`
`+T),w(K)}}}function M(f){if(Q&&f.key==="Enter")if(fe(f),f.stopPropagation(),k()==""){te(`
 `);const b=m();b.start=--b.end,w(b)}else te(`
`)}function W(f){const b=`([{'"`,E=`)]}'"`;if(b.includes(f.key)){fe(f);const T=m(),j=T.start==T.end?"":me().toString(),K=f.key+j+E[b.indexOf(f.key)];te(K),T.start++,T.end++,w(T)}}function ae(f){if(f.key==="Tab")if(fe(f),f.shiftKey){const b=v();let[E,T]=Ie(b);if(E.length>0){const j=m(),K=Math.min(i.tab.length,E.length);w({start:T,end:T+K}),r.execCommand("delete"),j.start-=K,j.end-=K,w(j)}}else te(i.tab)}function be(f){if(ee(f)){fe(f),u--;const b=c[u];b&&(n.innerHTML=b.html,w(b.pos)),u<0&&(u=0)}if(ge(f)){fe(f),u++;const b=c[u];b&&(n.innerHTML=b.html,w(b.pos)),u>=c.length&&u--}}function ue(){if(!U)return;const f=n.innerHTML,b=m(),E=c[u];if(E&&E.html===f&&E.pos.start===b.start&&E.pos.end===b.end)return;u++,c[u]={html:f,pos:b},c.splice(u+1);const T=300;u>T&&(u=T,c.splice(0,1))}function nt(f){if(f.defaultPrevented)return;fe(f);const E=(f.originalEvent??f).clipboardData.getData("text/plain").replace(/\r\n?/g,`
`),T=m();te(E),Y(n),w({start:Math.min(T.start,T.end)+E.length,end:Math.min(T.start,T.end)+E.length,dir:"<-"})}function it(f){const b=m(),E=me();(f.originalEvent??f).clipboardData.setData("text/plain",E.toString()),r.execCommand("delete"),Y(n),w({start:Math.min(b.start,b.end),end:Math.min(b.start,b.end),dir:"<-"}),fe(f)}function ot(f,b){const E=[];f.firstChild&&E.push(f.firstChild);let T=E.pop();for(;T&&b(T)!=="stop";)T.nextSibling&&E.push(T.nextSibling),T.firstChild&&E.push(T.firstChild),T=E.pop()}function qe(f){return f.metaKey||f.ctrlKey}function ee(f){return qe(f)&&!f.shiftKey&&Fe(f)==="Z"}function ge(f){return qe(f)&&f.shiftKey&&Fe(f)==="Z"}function Ne(f){return qe(f)&&Fe(f)==="C"}function Fe(f){let b=f.key||f.keyCode||f.which;if(b)return(typeof b=="string"?b:String.fromCharCode(b)).toUpperCase()}function te(f){f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),r.execCommand("insertHTML",!1,f)}function rt(f,b){let E=0;return(...T)=>{clearTimeout(E),E=o.setTimeout(()=>f(...T),b)}}function Ie(f){let b=f.length-1;for(;b>=0&&f[b]!==`
`;)b--;b++;let E=b;for(;E<f.length&&/[ \t]/.test(f[E]);)E++;return[f.substring(b,E)||"",b,E]}function le(){return n.textContent||""}function fe(f){f.preventDefault()}function me(){var f;return((f=n.parentNode)==null?void 0:f.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?n.parentNode.getSelection():o.getSelection()}return{updateOptions(f){Object.assign(i,f)},updateCode(f){n.textContent=f,Y(n),x(f)},onUpdate(f){x=f},toString:le,save:m,restore:w,recordHistory:ue,destroy(){for(let[f,b]of l)n.removeEventListener(f,b)}}}var yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var to={exports:{}};(function(n){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(i){var o=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,l={},c={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function p(m){return m instanceof u?new u(m.type,p(m.content),m.alias):Array.isArray(m)?m.map(p):m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(p){return Object.prototype.toString.call(p).slice(8,-1)},objId:function(p){return p.__id||Object.defineProperty(p,"__id",{value:++r}),p.__id},clone:function p(m,w){w=w||{};var C,v;switch(c.util.type(m)){case"Object":if(v=c.util.objId(m),w[v])return w[v];C={},w[v]=C;for(var k in m)m.hasOwnProperty(k)&&(C[k]=p(m[k],w));return C;case"Array":return v=c.util.objId(m),w[v]?w[v]:(C=[],w[v]=C,m.forEach(function(L,M){C[M]=p(L,w)}),C);default:return m}},getLanguage:function(p){for(;p;){var m=o.exec(p.className);if(m)return m[1].toLowerCase();p=p.parentElement}return"none"},setLanguage:function(p,m){p.className=p.className.replace(RegExp(o,"gi"),""),p.classList.add("language-"+m)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(C){var p=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(p){var m=document.getElementsByTagName("script");for(var w in m)if(m[w].src==p)return m[w]}return null}},isActive:function(p,m,w){for(var C="no-"+m;p;){var v=p.classList;if(v.contains(m))return!0;if(v.contains(C))return!1;p=p.parentElement}return!!w}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(p,m){var w=c.util.clone(c.languages[p]);for(var C in m)w[C]=m[C];return w},insertBefore:function(p,m,w,C){C=C||c.languages;var v=C[p],k={};for(var L in v)if(v.hasOwnProperty(L)){if(L==m)for(var M in w)w.hasOwnProperty(M)&&(k[M]=w[M]);w.hasOwnProperty(L)||(k[L]=v[L])}var W=C[p];return C[p]=k,c.languages.DFS(c.languages,function(ae,be){be===W&&ae!=p&&(this[ae]=k)}),k},DFS:function p(m,w,C,v){v=v||{};var k=c.util.objId;for(var L in m)if(m.hasOwnProperty(L)){w.call(m,L,m[L],C||L);var M=m[L],W=c.util.type(M);W==="Object"&&!v[k(M)]?(v[k(M)]=!0,p(M,w,null,v)):W==="Array"&&!v[k(M)]&&(v[k(M)]=!0,p(M,w,L,v))}}},plugins:{},highlightAll:function(p,m){c.highlightAllUnder(document,p,m)},highlightAllUnder:function(p,m,w){var C={callback:w,container:p,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};c.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),c.hooks.run("before-all-elements-highlight",C);for(var v=0,k;k=C.elements[v++];)c.highlightElement(k,m===!0,C.callback)},highlightElement:function(p,m,w){var C=c.util.getLanguage(p),v=c.languages[C];c.util.setLanguage(p,C);var k=p.parentElement;k&&k.nodeName.toLowerCase()==="pre"&&c.util.setLanguage(k,C);var L=p.textContent,M={element:p,language:C,grammar:v,code:L};function W(be){M.highlightedCode=be,c.hooks.run("before-insert",M),M.element.innerHTML=M.highlightedCode,c.hooks.run("after-highlight",M),c.hooks.run("complete",M),w&&w.call(M.element)}if(c.hooks.run("before-sanity-check",M),k=M.element.parentElement,k&&k.nodeName.toLowerCase()==="pre"&&!k.hasAttribute("tabindex")&&k.setAttribute("tabindex","0"),!M.code){c.hooks.run("complete",M),w&&w.call(M.element);return}if(c.hooks.run("before-highlight",M),!M.grammar){W(c.util.encode(M.code));return}if(m&&i.Worker){var ae=new Worker(c.filename);ae.onmessage=function(be){W(be.data)},ae.postMessage(JSON.stringify({language:M.language,code:M.code,immediateClose:!0}))}else W(c.highlight(M.code,M.grammar,M.language))},highlight:function(p,m,w){var C={code:p,grammar:m,language:w};if(c.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=c.tokenize(C.code,C.grammar),c.hooks.run("after-tokenize",C),u.stringify(c.util.encode(C.tokens),C.language)},tokenize:function(p,m){var w=m.rest;if(w){for(var C in w)m[C]=w[C];delete m.rest}var v=new q;return Y(v,v.head,p),x(p,v,m,v.head,0),se(v)},hooks:{all:{},add:function(p,m){var w=c.hooks.all;w[p]=w[p]||[],w[p].push(m)},run:function(p,m){var w=c.hooks.all[p];if(!(!w||!w.length))for(var C=0,v;v=w[C++];)v(m)}},Token:u};i.Prism=c;function u(p,m,w,C){this.type=p,this.content=m,this.alias=w,this.length=(C||"").length|0}u.stringify=function p(m,w){if(typeof m=="string")return m;if(Array.isArray(m)){var C="";return m.forEach(function(W){C+=p(W,w)}),C}var v={type:m.type,content:p(m.content,w),tag:"span",classes:["token",m.type],attributes:{},language:w},k=m.alias;k&&(Array.isArray(k)?Array.prototype.push.apply(v.classes,k):v.classes.push(k)),c.hooks.run("wrap",v);var L="";for(var M in v.attributes)L+=" "+M+'="'+(v.attributes[M]||"").replace(/"/g,"&quot;")+'"';return"<"+v.tag+' class="'+v.classes.join(" ")+'"'+L+">"+v.content+"</"+v.tag+">"};function U(p,m,w,C){p.lastIndex=m;var v=p.exec(w);if(v&&C&&v[1]){var k=v[1].length;v.index+=k,v[0]=v[0].slice(k)}return v}function x(p,m,w,C,v,k){for(var L in w)if(!(!w.hasOwnProperty(L)||!w[L])){var M=w[L];M=Array.isArray(M)?M:[M];for(var W=0;W<M.length;++W){if(k&&k.cause==L+","+W)return;var ae=M[W],be=ae.inside,ue=!!ae.lookbehind,nt=!!ae.greedy,it=ae.alias;if(nt&&!ae.pattern.global){var ot=ae.pattern.toString().match(/[imsuy]*$/)[0];ae.pattern=RegExp(ae.pattern.source,ot+"g")}for(var qe=ae.pattern||ae,ee=C.next,ge=v;ee!==m.tail&&!(k&&ge>=k.reach);ge+=ee.value.length,ee=ee.next){var Ne=ee.value;if(m.length>p.length)return;if(!(Ne instanceof u)){var Fe=1,te;if(nt){if(te=U(qe,ge,p,ue),!te||te.index>=p.length)break;var fe=te.index,rt=te.index+te[0].length,Ie=ge;for(Ie+=ee.value.length;fe>=Ie;)ee=ee.next,Ie+=ee.value.length;if(Ie-=ee.value.length,ge=Ie,ee.value instanceof u)continue;for(var le=ee;le!==m.tail&&(Ie<rt||typeof le.value=="string");le=le.next)Fe++,Ie+=le.value.length;Fe--,Ne=p.slice(ge,Ie),te.index-=ge}else if(te=U(qe,0,Ne,ue),!te)continue;var fe=te.index,me=te[0],f=Ne.slice(0,fe),b=Ne.slice(fe+me.length),E=ge+Ne.length;k&&E>k.reach&&(k.reach=E);var T=ee.prev;f&&(T=Y(m,T,f),ge+=f.length),Q(m,T,Fe);var j=new u(L,be?c.tokenize(me,be):me,it,me);if(ee=Y(m,T,j),b&&Y(m,ee,b),Fe>1){var K={cause:L+","+W,reach:E};x(p,m,w,ee.prev,ge,K),k&&K.reach>k.reach&&(k.reach=K.reach)}}}}}}function q(){var p={value:null,prev:null,next:null},m={value:null,prev:p,next:null};p.next=m,this.head=p,this.tail=m,this.length=0}function Y(p,m,w){var C=m.next,v={value:w,prev:m,next:C};return m.next=v,C.prev=v,p.length++,v}function Q(p,m,w){for(var C=m.next,v=0;v<w&&C!==p.tail;v++)C=C.next;m.next=C,C.prev=m,p.length-=v}function se(p){for(var m=[],w=p.head.next;w!==p.tail;)m.push(w.value),w=w.next;return m}if(!i.document)return i.addEventListener&&(c.disableWorkerMessageHandler||i.addEventListener("message",function(p){var m=JSON.parse(p.data),w=m.language,C=m.code,v=m.immediateClose;i.postMessage(c.highlight(C,c.languages[w],w)),v&&i.close()},!1)),c;var A=c.util.currentScript();A&&(c.filename=A.src,A.hasAttribute("data-manual")&&(c.manual=!0));function _(){c.manual||c.highlightAll()}if(!c.manual){var X=document.readyState;X==="loading"||X==="interactive"&&A&&A.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return c}(t);n.exports&&(n.exports=e),typeof yn<"u"&&(yn.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(i){i.type==="entity"&&(i.attributes.title=i.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(o,r){var l={};l["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[r]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var c={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};c["language-"+r]={pattern:/[\s\S]+/,inside:e.languages[r]};var u={};u[o]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return o}),"i"),lookbehind:!0,greedy:!0,inside:c},e.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(i,o){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+i+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[o,"language-"+o],inside:e.languages[o]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(i){var o=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;i.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+o.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+o.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+o.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+o.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:o,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},i.languages.css.atrule.inside.rest=i.languages.css;var r=i.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var i="Loading",o=function(A,_){return" Error "+A+" while fetching file: "+_},r=" Error: File does not exist or is empty",l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},c="data-src-status",u="loading",U="loaded",x="failed",q="pre[data-src]:not(["+c+'="'+U+'"]):not(['+c+'="'+u+'"])';function Y(A,_,X){var p=new XMLHttpRequest;p.open("GET",A,!0),p.onreadystatechange=function(){p.readyState==4&&(p.status<400&&p.responseText?_(p.responseText):p.status>=400?X(o(p.status,p.statusText)):X(r))},p.send(null)}function Q(A){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(A||"");if(_){var X=Number(_[1]),p=_[2],m=_[3];return p?m?[X,Number(m)]:[X,void 0]:[X,X]}}e.hooks.add("before-highlightall",function(A){A.selector+=", "+q}),e.hooks.add("before-sanity-check",function(A){var _=A.element;if(_.matches(q)){A.code="",_.setAttribute(c,u);var X=_.appendChild(document.createElement("CODE"));X.textContent=i;var p=_.getAttribute("data-src"),m=A.language;if(m==="none"){var w=(/\.(\w+)$/.exec(p)||[,"none"])[1];m=l[w]||w}e.util.setLanguage(X,m),e.util.setLanguage(_,m);var C=e.plugins.autoloader;C&&C.loadLanguages(m),Y(p,function(v){_.setAttribute(c,U);var k=Q(_.getAttribute("data-range"));if(k){var L=v.split(/\r\n?|\n/g),M=k[0],W=k[1]==null?L.length:k[1];M<0&&(M+=L.length),M=Math.max(0,Math.min(M-1,L.length)),W<0&&(W+=L.length),W=Math.max(0,Math.min(W,L.length)),v=L.slice(M,W).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(M+1))}X.textContent=v,e.highlightElement(X)},function(v){_.setAttribute(c,x),X.textContent=v})}}),e.plugins.fileHighlight={highlight:function(_){for(var X=(_||document).querySelectorAll(q),p=0,m;m=X[p++];)e.highlightElement(m)}};var se=!1;e.fileHighlight=function(){se||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),se=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(to);var Ss=to.exports;const Ke=xs(Ss);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;class no{constructor(t={},e="session_"){this.prefix=e,this.init()}init(){this.sessionState=window.sessionState}getVariables(){return this.sessionState.session_data}getValue(t){return this.sessionState.session_data[t]}updateSession(t){this.sessionState={...this.sessionState,...t}}getSessionParams(){const t={};return Object.entries(this.sessionState.session_data).forEach(([e,i])=>{t[`${this.prefix}${e}`]=i}),new URLSearchParams(t).toString()}addSessionToConfig(t){const e={...t};let i;const o={};return Object.entries(this.sessionState.session_data).forEach(([r,l])=>{o[`${this.prefix}${r}`]=l}),i=new URLSearchParams(o).toString(),Object.keys(e).forEach(r=>{if(r.toLowerCase().endsWith("url")&&typeof e[r]=="string"){const l=new URL(e[r],window.location.origin),c=l.search?"&":"?";e[r]=`${l.toString()}${c}${i}`}}),e}}class io{constructor(t){this.isDebug=!1,this.isDebugInfo=!0,this.managerInstance=null,this.parent_manager_id=null,this.entity_name=t.entity_name,this.view_type_variable=`${this.entity_name}_view_type`,this.contextKey=t.contextKey,this.formSelector=t.formSelector,this.dynamicModalSelector=`#${this.entity_name}-crud-dynamic-modal`,this.showContainerSelector=`#${this.entity_name}-crud-show`,this.sessionStatService=new no,this.viewStateService=new Zt(this.contextKey,this.entity_name),this.indexUrl=t.indexUrl,this.editUrl=t.editUrl,this.getEntityUrl=t.getEntityUrl,this.csrfToken=t.csrfToken,this.editTitle=t.edit_title,this.getUserNotificationsUrl=t.getUserNotificationsUrl}init(){Zt.init()}debugInfo(t){this.isDebugInfo&&console.log(`[DEBUG] ${t}`)}toString(){return`${this.id} : ${this.ViewStateService}`}}class Es extends io{constructor(t){super(t),this.id=`${this.entity_name}-crud`,this.isMany=t.isMany,this.data_calcul=t.data_calcul,this.parent_manager_id=t.parent_manager_id,this.editOnFullScreen=t.editOnFullScreen,this.edit_has_many=t.edit_has_many,this.afterCreateAction=t.afterCreateAction,this.crudSelector=t.crudSelector,this.tableSelector=t.tableSelector,this.filterFormSelector=t.filterFormSelector,this.createUrl=t.createUrl,this.showUrl=t.showUrl,this.storeUrl=t.storeUrl,this.updateAttributesUrl=t.updateAttributesUrl,this.deleteUrl=t.deleteUrl,this.createTitle=t.create_title,this.calculationUrl=t.calculationUrl,this.canEdit=t.canEdit,this.searchInputSelector=`${this.crudSelector} .crud-search-input`,this.paginationSelector=`${this.crudSelector} .pagination`,this.dataContainerSelector=`${this.tableSelector}`,this.dataContainerOutSelector=`${this.tableSelector}-out`,this.filterIconSelector=`${this.filterFormSelector} .filter-icon`,this.sortableColumnSelector=`${this.tableSelector} .sortable-column`}}class Is extends io{constructor(t,e,i){super(t,e,i),this.id=`${this.entity_name}-edit-has-many`,this.cardTabSelector=this.cardTabSelector,this.hasTabs=!0}}class oo{constructor(t,e="context-state"){this.config=t,this.ViewStateService=this.config.viewStateService,this.targetClass=e}updateLinks(){const t=this.ViewStateService.getContextParams();document.querySelectorAll(`${this.config.crudSelector} a.${this.targetClass}`).forEach(e=>{const i=new URL(e.href,window.location.origin);t.split("&").forEach(o=>{const[r,l]=o.split("=");r&&l&&i.searchParams.set(r,l)}),e.href=i.toString()})}fetchWithContext(t,e={}){const i=this.ViewStateService.getContextParams(),o=t.includes("?")?"&":"?",r=`${t}${o}${i}`;return fetch(r,e).then(l=>l.json()).catch(l=>console.error("Erreur dans la requte AJAX:",l))}init(){this.updateLinks()}}class ce{static handleError(t,e="Une erreur est survenue."){console.log(t);let i=e;try{if(t.responseJSON)if(t.responseJSON&&t.responseJSON.errors){const o=t.responseJSON.errors;typeof o=="object"&&o!==null?i=Object.values(o).flat().join("<br>"):Array.isArray(o)?i=o.join("<br>"):(console.warn("Format inattendu pour xhr.responseJSON.errors",o),i=String(o))}else t.responseJSON.message?i=t.responseJSON.message:i="Une erreur est survenue.";else if(t.responseText){let o=JSON.parse(t.responseText);o.message?i=o.message:i=t.responseText}}catch{i=t.responseText||"Une erreur inattendue s'est produite."}B.showError(i)}}class Xt{constructor(t,e){this.config=t,this.indexUI=e,this.fixedTitle=!1,this.modalCounter=0,this.curd_id=this.config.id,this.currentModalId=`${this.curd_id}-dynamic-modal`,this.modal=null,this.parentModal=null,this.isParentFullscreen=!1}showModal(t="titre test",e=!1){this.destroy(),$("body").append(`<div><div id="${this.currentModalId}" class="dynamic-modal"></div></div>`),this.parentModal=$(".dynamic-modal").not(`#${this.currentModalId}`).last(),this.parentModal.length>0&&(this.isParentFullscreen=this.parentModal.hasClass("isFullscreen"),this.originalHeaderColor=this.parentModal.data("headerColor")||"#17a2b8",this.parentModal.iziModal("setHeaderColor","#6c757d"),this.parentModal.data("headerColor",this.originalHeaderColor),this.isParentFullscreen||(this.parentModal.iziModal("setFullscreen",!0),this.parentModal.addClass("isFullscreen"))),this.modal=$(`#${this.currentModalId}`).iziModal({title:t,headerColor:"#17a2b8",width:900,minHeight:300,padding:20,radius:10,zindex:1050,appendTo:"body",closeButton:!0,fullscreen:!0,borderBottom:!0,transitionIn:"fadeIn",transitionOut:"fadeOut",overlayClose:!0,autoOpen:!0,onClosed:()=>this.handleClose()}),this.config.editOnFullScreen&&this.modal.iziModal("setFullscreen",!0)}showContent(t){$(`#${this.currentModalId}`).iziModal("stopLoading"),$(`#${this.currentModalId}`).iziModal("setContent",t)}setTitle(t){$(`#${this.currentModalId}`).iziModal("setTitle",t)}setFixedTitle(t){this.fixedTitle||($(`#${this.currentModalId}`).iziModal("setTitle",t),this.fixedTitle=!0)}showLoading(t){this.showModal(t,!0),$(`#${this.currentModalId}`).iziModal("startLoading")}startLoading(){$(`#${this.currentModalId}`).iziModal("startLoading")}stopLoading(){$(`#${this.currentModalId}`).iziModal("stopLoading")}close(){$(`#${this.currentModalId}`).iziModal("close")}closeAll(){$(".dynamic-modal").each(function(){$(this).iziModal("close"),$(this).iziModal("destroy"),$(this).remove()})}destroy(){$(`#${this.currentModalId}`).length>0&&($(`#${this.currentModalId}`).iziModal("destroy"),$(`#${this.currentModalId}`).remove())}showError(t){this.showContent(`<div class="alert alert-danger">${t}</div>`),console.error(`Erreur dans le modal : ${t}`)}handleClose(){this.restoreParentModal(),this.indexUI.tableUI.loadListAction.loadEntities()}restoreParentModal(){if(this.parentModal&&this.parentModal.length>0){const t=this.parentModal.data("headerColor")||"#17a2b8";this.parentModal.iziModal("setHeaderColor",t),this.isParentFullscreen||(this.parentModal.iziModal("setFullscreen",!1),this.parentModal.removeClass("isFullscreen"))}}}st(Xt,"modalCounter",0),st(Xt,"wasFullscreen",!1);class jn{constructor(t){this.config=t,this.loader=new Je(t.tableSelector),this.loader_traitement=new Je("body"),this.viewStateService=this.config.viewStateService,this.SuscesMessage=""}getUrlWithId(t,e){return t.replace(":id",e)}appendParamsToUrl(t,e){if(!e)return t;const i=t.includes("?")?"&":"?";return`${t}${i}${e}`}executeScripts(t){$("<div>").html(t).find("script").each(function(){const i=$(this).text(),o=$(this).attr("src");o?$.getScript(o):i&&new Function(i)()})}}class ks extends jn{constructor(t,e){super(t),this.config=t,this.tableUI=e,this.indexUrl=t.indexUrl,this.lastRequestId=0}loadEntities(t,e={},i=!1){t===void 0&&(t=this.tableUI.indexUI.paginationUI.page);const o=new URLSearchParams({page:t}).toString();let r=this.indexUrl;r=this.appendParamsToUrl(r,o),r=this.appendParamsToUrl(r,this.viewStateService.getContextParams()),i||this.loader.showNomBloquante();const l=++this.lastRequestId;return $.get(r).done(c=>{if(l!==this.lastRequestId){console.debug(" Rponse ignore (requte obsolte)",{requestId:l,last:this.lastRequestId});return}(this.config.viewStateService.getVariable(this.config.view_type_variable)||"table")=="widgets"?($(this.config.dataContainerSelector).html(""),$(this.config.dataContainerOutSelector).html(c)):($(this.config.dataContainerSelector).html(c),$(this.config.dataContainerOutSelector).html("")),i||this.loader.hide(),this.executeScripts(c),this.tableUI.init(),i||this.tableUI.indexUI.filterUI.init(),this.tableUI.indexUI.bulkActionsUI.init(),this.tableUI.indexUI.notificationUI.init(),this.config.data_calcul&&this.config.isMany&&this.config.managerInstance.parent_manager&&this.config.managerInstance.parent_manager.formUI.reloadData()}).fail(c=>{ce.handleError(c,"Erreur lors du chargement des donnes.")}).always(()=>{})}}class Ft extends jn{constructor(t){super(t),this.config=t}handleError(t){B.showAlert("error","Erreur",t)}handleSuccess(t){B.showSuccess(t)}}class yt extends Ft{constructor(t,e,i=null){super(t),this.config=t,this.tableUI=e,this.containerSelector=i||this.config.crudSelector,this.successMessage="Opration effectue avec succs."}pollTraitementStatus(t,e=null){let i=this.loader_traitement;i.showNomBloquante(" Traitement lanc...");let o=!1;$.get("/admin/traitement/start").done(()=>{}).fail(l=>{var u;const c=((u=l.responseJSON)==null?void 0:u.message)||"Erreur lors du dmarrage du traitement.";B.showError(" "+c),i==null||i.hide(),o=!0,this.tableUI.loadListAction.loadEntities()});const r=()=>{$.get("/admin/traitement/status/"+t).done(l=>{const c=l.status,u=l.progress??0,U=l.messageError??"",x=l.label??" Traitement en cours";c==="done"?(i&&i.hide(),this.tableUI.loadListAction.loadEntities(),typeof e=="function"&&e()):c.startsWith("error")?(i&&i.hide(),B.showError(" Erreur traitement : "+U),this.tableUI.loadListAction.loadEntities()):o||(i==null||i.showNomBloquante(`${x} ${u}%`),setTimeout(r,1500))}).fail(()=>{i&&i.hide(),B.showError(" Erreur rseau pendant le polling."),this.tableUI.loadListAction.loadEntities()})};r()}}class Ds extends yt{constructor(t,e){super(t,e),this.config=t,this.tableUI=e,this.SuscesMessage="Nouvelle entit ajoute avec succs."}init(){this.handleAddEntity()}addEntity(){this.createUrl=this.appendParamsToUrl(this.config.createUrl,this.viewStateService.getContextParams()),this.tableUI.indexUI.modalUI.showLoading(this.config.createTitle),$.get(this.createUrl).done(t=>{this.tableUI.indexUI.modalUI.showContent(t),this.executeScripts(t),this.config.init(),this.tableUI.indexUI.formUI.init(()=>this.submitEntity())}).fail(t=>{ce.handleError(t,"Erreur lors de l'ajout.")})}submitEntity(t){const e=$(this.config.formSelector),i=e.attr("action"),o=e.find('input[name="_method"]').val()||"POST",r=e.serialize();if(this.tableUI.indexUI.formUI.loader.show(),!this.tableUI.indexUI.formUI.validateForm()){B.showError("Validation choue. Veuillez corriger les erreurs."),this.tableUI.indexUI.formUI.loader.hide();return}$.ajax({url:i,method:o,data:r}).done(l=>{var u;const c=(u=l.data)==null?void 0:u.traitement_token;c?this.pollTraitementStatus(c,()=>{this.handleSuccess(this.SuscesMessage)}):this.handleSuccess(this.SuscesMessage),this.tableUI.indexUI.formUI.loader.hide(),this.tableUI.indexUI.modalUI.close(),typeof t=="function"&&t(),this.handleAfterCreateAction(l)}).fail(l=>{var c;this.tableUI.indexUI.formUI.loader.hide(),(c=l.responseJSON)!=null&&c.errors&&this.tableUI.indexUI.formUI.showFieldErrors(l.responseJSON.errors),ce.handleError(l,"Erreur lors du traitement du formulaire.")})}handleAddEntity(){R.bindEvent("click",`${this.config.crudSelector} .addEntityButton`,t=>{t.preventDefault(),this.addEntity()})}handleAfterCreateAction(t={}){var c,u,U,x,q,Y;const e=((c=t==null?void 0:t.data)==null?void 0:c.entity_id)??(t==null?void 0:t.entity_id)??(t==null?void 0:t.id),i=Number.parseInt(e,10),o=Number.isInteger(i)&&i>0;let r=(((u=this.config)==null?void 0:u.afterCreateAction)||"").trim().toLowerCase();!r&&((U=this.config)!=null&&U.edit_has_many)&&(r="update");const l=()=>{var Q,se,A;return(A=(se=(Q=this.tableUI)==null?void 0:Q.loadListAction)==null?void 0:se.loadEntities)==null?void 0:A.call(se)};switch(r){case"edit":case"update":o&&((Y=(q=(x=this.tableUI)==null?void 0:x.entityEditor)==null?void 0:q.editEntity)==null||Y.call(q,i)),l();break;case"index":case"":default:l();break}}}var hn=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ft={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},kt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Ce=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},Oe=function(n){return n===!0?1:0};function oi(n,t){var e;return function(){var i=this,o=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,o)},t)}}var gn=function(n){return n instanceof Array?n:[n]};function ve(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function z(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}function jt(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function ro(n,t){if(t(n))return n;if(n.parentNode)return ro(n.parentNode,t)}function Bt(n,t){var e=z("div","numInputWrapper"),i=z("input","numInput "+n),o=z("span","arrowUp"),r=z("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var l in t)i.setAttribute(l,t[l]);return e.appendChild(i),e.appendChild(o),e.appendChild(r),e}function Ae(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var mn=function(){},Gt=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},As={D:mn,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*Oe(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),o=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return o.setDate(o.getDate()-o.getDay()+e.firstDayOfWeek),o},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:mn,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:mn,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},Xe={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Et={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[Et.w(n,t,e)]},F:function(n,t,e){return Gt(Et.n(n,t,e)-1,!1,t)},G:function(n,t,e){return Ce(Et.h(n,t,e))},H:function(n){return Ce(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[Oe(n.getHours()>11)]},M:function(n,t){return Gt(n.getMonth(),!0,t)},S:function(n){return Ce(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return Ce(n.getFullYear(),4)},d:function(n){return Ce(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Ce(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return Ce(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},ao=function(n){var t=n.config,e=t===void 0?ft:t,i=n.l10n,o=i===void 0?kt:i,r=n.isMobile,l=r===void 0?!1:r;return function(c,u,U){var x=U||o;return e.formatDate!==void 0&&!l?e.formatDate(c,u,x):u.split("").map(function(q,Y,Q){return Et[q]&&Q[Y-1]!=="\\"?Et[q](c,x,e):q!=="\\"?q:""}).join("")}},Cn=function(n){var t=n.config,e=t===void 0?ft:t,i=n.l10n,o=i===void 0?kt:i;return function(r,l,c,u){if(!(r!==0&&!r)){var U=u||o,x,q=r;if(r instanceof Date)x=new Date(r.getTime());else if(typeof r!="string"&&r.toFixed!==void 0)x=new Date(r);else if(typeof r=="string"){var Y=l||(e||ft).dateFormat,Q=String(r).trim();if(Q==="today")x=new Date,c=!0;else if(e&&e.parseDate)x=e.parseDate(r,Y);else if(/Z$/.test(Q)||/GMT$/.test(Q))x=new Date(r);else{for(var se=void 0,A=[],_=0,X=0,p="";_<Y.length;_++){var m=Y[_],w=m==="\\",C=Y[_-1]==="\\"||w;if(Xe[m]&&!C){p+=Xe[m];var v=new RegExp(p).exec(r);v&&(se=!0)&&A[m!=="Y"?"push":"unshift"]({fn:As[m],val:v[++X]})}else w||(p+=".")}x=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),A.forEach(function(k){var L=k.fn,M=k.val;return x=L(x,M,U)||x}),x=se?x:void 0}}if(!(x instanceof Date&&!isNaN(x.getTime()))){e.errorHandler(new Error("Invalid date provided: "+q));return}return c===!0&&x.setHours(0,0,0,0),x}}};function Me(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var Ms=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},pn=function(n,t,e){return n*3600+t*60+e},Ts=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},$s={DAY:864e5};function wn(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var o=n.minDate.getHours(),r=n.minDate.getMinutes(),l=n.minDate.getSeconds();t<o&&(t=o),t===o&&e<r&&(e=r),t===o&&e===r&&i<l&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var c=n.maxDate.getHours(),u=n.maxDate.getMinutes();t=Math.min(t,c),t===c&&(e=Math.min(u,e)),t===c&&e===u&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(c){c&&Object.keys(c).forEach(function(u){return n[u]=c[u]})},o=0,r=t;o<r.length;o++){var l=r[o];i(l)}return n});var pe=function(){return pe=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},pe.apply(this,arguments)},ri=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),o=0,t=0;t<e;t++)for(var r=arguments[t],l=0,c=r.length;l<c;l++,o++)i[o]=r[l];return i},Us=300;function Ps(n,t){var e={config:pe(pe({},ft),oe.defaultConfig),l10n:kt};e.parseDate=Cn({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=A,e._setHoursFromDate=Y,e._positionCalendar=je,e.changeMonth=Fe,e.changeYear=me,e.clear=te,e.close=rt,e.onMouseOver=j,e._createElement=z,e.createDay=v,e.destroy=Ie,e.isEnabled=f,e.jumpToDate=p,e.updateValue=Ve,e.open=ne,e.redraw=Hn,e.set=uo,e.setDate=fo,e.toggle=po;function i(){e.utils={getDaysInMonth:function(a,s){return a===void 0&&(a=e.currentMonth),s===void 0&&(s=e.currentYear),a===1&&(s%4===0&&s%100!==0||s%400===0)?29:e.l10n.daysInMonth[a]}}}function o(){e.element=e.input=n,e.isOpen=!1,Lt(),Le(),go(),ho(),i(),e.isMobile||C(),X(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&Y(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ve(!1)),c();var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&a&&je(),G("onReady")}function r(){var a;return((a=e.calendarContainer)===null||a===void 0?void 0:a.getRootNode()).activeElement||document.activeElement}function l(a){return a.bind(e)}function c(){var a=e.config;a.weekNumbers===!1&&a.showMonths===1||a.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var s=(e.days.offsetWidth+1)*a.showMonths;e.daysContainer.style.width=s+"px",e.calendarContainer.style.width=s+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function u(a){if(e.selectedDates.length===0){var s=e.config.minDate===void 0||Me(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),d=wn(e.config);s.setHours(d.hours,d.minutes,d.seconds,s.getMilliseconds()),e.selectedDates=[s],e.latestSelectedDateObj=s}a!==void 0&&a.type!=="blur"&&vo(a);var g=e._input.value;q(),Ve(),e._input.value!==g&&e._debouncedChange()}function U(a,s){return a%12+12*Oe(s===e.l10n.amPM[1])}function x(a){switch(a%24){case 0:case 12:return 12;default:return a%12}}function q(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var a=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,s=(parseInt(e.minuteElement.value,10)||0)%60,d=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(a=U(a,e.amPM.textContent));var g=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&Me(e.latestSelectedDateObj,e.config.minDate,!0)===0,y=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&Me(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var S=pn(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),O=pn(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),D=pn(a,s,d);if(D>O&&D<S){var N=Ts(S);a=N[0],s=N[1],d=N[2]}}else{if(y){var I=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;a=Math.min(a,I.getHours()),a===I.getHours()&&(s=Math.min(s,I.getMinutes())),s===I.getMinutes()&&(d=Math.min(d,I.getSeconds()))}if(g){var F=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;a=Math.max(a,F.getHours()),a===F.getHours()&&s<F.getMinutes()&&(s=F.getMinutes()),s===F.getMinutes()&&(d=Math.max(d,F.getSeconds()))}}Q(a,s,d)}}function Y(a){var s=a||e.latestSelectedDateObj;s&&s instanceof Date&&Q(s.getHours(),s.getMinutes(),s.getSeconds())}function Q(a,s,d){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(a%24,s,d||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=Ce(e.config.time_24hr?a:(12+a)%12+12*Oe(a%12===0)),e.minuteElement.value=Ce(s),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[Oe(a>=12)]),e.secondElement!==void 0&&(e.secondElement.value=Ce(d)))}function se(a){var s=Ae(a),d=parseInt(s.value)+(a.delta||0);(d/1e3>1||a.key==="Enter"&&!/[^\d]/.test(d.toString()))&&me(d)}function A(a,s,d,g){if(s instanceof Array)return s.forEach(function(y){return A(a,y,d,g)});if(a instanceof Array)return a.forEach(function(y){return A(y,s,d,g)});a.addEventListener(s,d,g),e._handlers.push({remove:function(){return a.removeEventListener(s,d,g)}})}function _(){G("onChange")}function X(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(d){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+d+"]"),function(g){return A(g,"click",e[d])})}),e.isMobile){mo();return}var a=oi(K,50);if(e._debouncedChange=oi(_,Us),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&A(e.daysContainer,"mouseover",function(d){e.config.mode==="range"&&j(Ae(d))}),A(e._input,"keydown",T),e.calendarContainer!==void 0&&A(e.calendarContainer,"keydown",T),!e.config.inline&&!e.config.static&&A(window,"resize",a),window.ontouchstart!==void 0?A(window.document,"touchstart",fe):A(window.document,"mousedown",fe),A(window.document,"focus",fe,{capture:!0}),e.config.clickOpens===!0&&(A(e._input,"focus",e.open),A(e._input,"click",e.open)),e.daysContainer!==void 0&&(A(e.monthNav,"click",bo),A(e.monthNav,["keyup","increment"],se),A(e.daysContainer,"click",Rn)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var s=function(d){return Ae(d).select()};A(e.timeContainer,["increment"],u),A(e.timeContainer,"blur",u,{capture:!0}),A(e.timeContainer,"click",m),A([e.hourElement,e.minuteElement],["focus","click"],s),e.secondElement!==void 0&&A(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&A(e.amPM,"click",function(d){u(d)})}e.config.allowInput&&A(e._input,"blur",E)}function p(a,s){var d=a!==void 0?e.parseDate(a):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),g=e.currentYear,y=e.currentMonth;try{d!==void 0&&(e.currentYear=d.getFullYear(),e.currentMonth=d.getMonth())}catch(S){S.message="Invalid date supplied: "+d,e.config.errorHandler(S)}s&&e.currentYear!==g&&(G("onYearChange"),ue()),s&&(e.currentYear!==g||e.currentMonth!==y)&&G("onMonthChange"),e.redraw()}function m(a){var s=Ae(a);~s.className.indexOf("arrow")&&w(a,s.classList.contains("arrowUp")?1:-1)}function w(a,s,d){var g=a&&Ae(a),y=d||g&&g.parentNode&&g.parentNode.firstChild,S=sn("increment");S.delta=s,y&&y.dispatchEvent(S)}function C(){var a=window.document.createDocumentFragment();if(e.calendarContainer=z("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(a.appendChild(ot()),e.innerContainer=z("div","flatpickr-innerContainer"),e.config.weekNumbers){var s=Ne(),d=s.weekWrapper,g=s.weekNumbers;e.innerContainer.appendChild(d),e.weekNumbers=g,e.weekWrapper=d}e.rContainer=z("div","flatpickr-rContainer"),e.rContainer.appendChild(ee()),e.daysContainer||(e.daysContainer=z("div","flatpickr-days"),e.daysContainer.tabIndex=-1),be(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),a.appendChild(e.innerContainer)}e.config.enableTime&&a.appendChild(qe()),ve(e.calendarContainer,"rangeMode",e.config.mode==="range"),ve(e.calendarContainer,"animate",e.config.animate===!0),ve(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(a);var y=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!y&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var S=z("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(S,e.element),S.appendChild(e.element),e.altInput&&S.appendChild(e.altInput),S.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function v(a,s,d,g){var y=f(s,!0),S=z("span",a,s.getDate().toString());return S.dateObj=s,S.$i=g,S.setAttribute("aria-label",e.formatDate(s,e.config.ariaDateFormat)),a.indexOf("hidden")===-1&&Me(s,e.now)===0&&(e.todayDateElem=S,S.classList.add("today"),S.setAttribute("aria-current","date")),y?(S.tabIndex=-1,ln(s)&&(S.classList.add("selected"),e.selectedDateElem=S,e.config.mode==="range"&&(ve(S,"startRange",e.selectedDates[0]&&Me(s,e.selectedDates[0],!0)===0),ve(S,"endRange",e.selectedDates[1]&&Me(s,e.selectedDates[1],!0)===0),a==="nextMonthDay"&&S.classList.add("inRange")))):S.classList.add("flatpickr-disabled"),e.config.mode==="range"&&wo(s)&&!ln(s)&&S.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&a!=="prevMonthDay"&&g%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(s)+"</span>"),G("onDayCreate",S),S}function k(a){a.focus(),e.config.mode==="range"&&j(a)}function L(a){for(var s=a>0?0:e.config.showMonths-1,d=a>0?e.config.showMonths:-1,g=s;g!=d;g+=a)for(var y=e.daysContainer.children[g],S=a>0?0:y.children.length-1,O=a>0?y.children.length:-1,D=S;D!=O;D+=a){var N=y.children[D];if(N.className.indexOf("hidden")===-1&&f(N.dateObj))return N}}function M(a,s){for(var d=a.className.indexOf("Month")===-1?a.dateObj.getMonth():e.currentMonth,g=s>0?e.config.showMonths:-1,y=s>0?1:-1,S=d-e.currentMonth;S!=g;S+=y)for(var O=e.daysContainer.children[S],D=d-e.currentMonth===S?a.$i+s:s<0?O.children.length-1:0,N=O.children.length,I=D;I>=0&&I<N&&I!=(s>0?N:-1);I+=y){var F=O.children[I];if(F.className.indexOf("hidden")===-1&&f(F.dateObj)&&Math.abs(a.$i-I)>=Math.abs(s))return k(F)}e.changeMonth(y),W(L(y),0)}function W(a,s){var d=r(),g=b(d||document.body),y=a!==void 0?a:g?d:e.selectedDateElem!==void 0&&b(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&b(e.todayDateElem)?e.todayDateElem:L(s>0?1:-1);y===void 0?e._input.focus():g?M(y,s):k(y)}function ae(a,s){for(var d=(new Date(a,s,1).getDay()-e.l10n.firstDayOfWeek+7)%7,g=e.utils.getDaysInMonth((s-1+12)%12,a),y=e.utils.getDaysInMonth(s,a),S=window.document.createDocumentFragment(),O=e.config.showMonths>1,D=O?"prevMonthDay hidden":"prevMonthDay",N=O?"nextMonthDay hidden":"nextMonthDay",I=g+1-d,F=0;I<=g;I++,F++)S.appendChild(v("flatpickr-day "+D,new Date(a,s-1,I),I,F));for(I=1;I<=y;I++,F++)S.appendChild(v("flatpickr-day",new Date(a,s,I),I,F));for(var J=y+1;J<=42-d&&(e.config.showMonths===1||F%7!==0);J++,F++)S.appendChild(v("flatpickr-day "+N,new Date(a,s+1,J%y),J,F));var Be=z("div","dayContainer");return Be.appendChild(S),Be}function be(){if(e.daysContainer!==void 0){jt(e.daysContainer),e.weekNumbers&&jt(e.weekNumbers);for(var a=document.createDocumentFragment(),s=0;s<e.config.showMonths;s++){var d=new Date(e.currentYear,e.currentMonth,1);d.setMonth(e.currentMonth+s),a.appendChild(ae(d.getFullYear(),d.getMonth()))}e.daysContainer.appendChild(a),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&j()}}function ue(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var a=function(g){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&g<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&g>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var s=0;s<12;s++)if(a(s)){var d=z("option","flatpickr-monthDropdown-month");d.value=new Date(e.currentYear,s).getMonth().toString(),d.textContent=Gt(s,e.config.shorthandCurrentMonth,e.l10n),d.tabIndex=-1,e.currentMonth===s&&(d.selected=!0),e.monthsDropdownContainer.appendChild(d)}}}function nt(){var a=z("div","flatpickr-month"),s=window.document.createDocumentFragment(),d;e.config.showMonths>1||e.config.monthSelectorType==="static"?d=z("span","cur-month"):(e.monthsDropdownContainer=z("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),A(e.monthsDropdownContainer,"change",function(O){var D=Ae(O),N=parseInt(D.value,10);e.changeMonth(N-e.currentMonth),G("onMonthChange")}),ue(),d=e.monthsDropdownContainer);var g=Bt("cur-year",{tabindex:"-1"}),y=g.getElementsByTagName("input")[0];y.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&y.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(y.setAttribute("max",e.config.maxDate.getFullYear().toString()),y.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var S=z("div","flatpickr-current-month");return S.appendChild(d),S.appendChild(g),s.appendChild(S),a.appendChild(s),{container:a,yearElement:y,monthElement:d}}function it(){jt(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var a=e.config.showMonths;a--;){var s=nt();e.yearElements.push(s.yearElement),e.monthElements.push(s.monthElement),e.monthNav.appendChild(s.container)}e.monthNav.appendChild(e.nextMonthNav)}function ot(){return e.monthNav=z("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=z("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=z("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,it(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(a){e.__hidePrevMonthArrow!==a&&(ve(e.prevMonthNav,"flatpickr-disabled",a),e.__hidePrevMonthArrow=a)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(a){e.__hideNextMonthArrow!==a&&(ve(e.nextMonthNav,"flatpickr-disabled",a),e.__hideNextMonthArrow=a)}}),e.currentYearElement=e.yearElements[0],_t(),e.monthNav}function qe(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var a=wn(e.config);e.timeContainer=z("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var s=z("span","flatpickr-time-separator",":"),d=Bt("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=d.getElementsByTagName("input")[0];var g=Bt("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=g.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Ce(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?a.hours:x(a.hours)),e.minuteElement.value=Ce(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():a.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(d),e.timeContainer.appendChild(s),e.timeContainer.appendChild(g),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var y=Bt("flatpickr-second");e.secondElement=y.getElementsByTagName("input")[0],e.secondElement.value=Ce(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():a.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(z("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(y)}return e.config.time_24hr||(e.amPM=z("span","flatpickr-am-pm",e.l10n.amPM[Oe((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function ee(){e.weekdayContainer?jt(e.weekdayContainer):e.weekdayContainer=z("div","flatpickr-weekdays");for(var a=e.config.showMonths;a--;){var s=z("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(s)}return ge(),e.weekdayContainer}function ge(){if(e.weekdayContainer){var a=e.l10n.firstDayOfWeek,s=ri(e.l10n.weekdays.shorthand);a>0&&a<s.length&&(s=ri(s.splice(a,s.length),s.splice(0,a)));for(var d=e.config.showMonths;d--;)e.weekdayContainer.children[d].innerHTML=`
      <span class='flatpickr-weekday'>
        `+s.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Ne(){e.calendarContainer.classList.add("hasWeeks");var a=z("div","flatpickr-weekwrapper");a.appendChild(z("span","flatpickr-weekday",e.l10n.weekAbbreviation));var s=z("div","flatpickr-weeks");return a.appendChild(s),{weekWrapper:a,weekNumbers:s}}function Fe(a,s){s===void 0&&(s=!0);var d=s?a:a-e.currentMonth;d<0&&e._hidePrevMonthArrow===!0||d>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=d,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,G("onYearChange"),ue()),be(),G("onMonthChange"),_t())}function te(a,s){if(a===void 0&&(a=!0),s===void 0&&(s=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,s===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var d=wn(e.config),g=d.hours,y=d.minutes,S=d.seconds;Q(g,y,S)}e.redraw(),a&&G("onChange")}function rt(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),G("onClose")}function Ie(){e.config!==void 0&&G("onDestroy");for(var a=e._handlers.length;a--;)e._handlers[a].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var s=e.calendarContainer.parentNode;if(s.lastChild&&s.removeChild(s.lastChild),s.parentNode){for(;s.firstChild;)s.parentNode.insertBefore(s.firstChild,s);s.parentNode.removeChild(s)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(d){try{delete e[d]}catch{}})}function le(a){return e.calendarContainer.contains(a)}function fe(a){if(e.isOpen&&!e.config.inline){var s=Ae(a),d=le(s),g=s===e.input||s===e.altInput||e.element.contains(s)||a.path&&a.path.indexOf&&(~a.path.indexOf(e.input)||~a.path.indexOf(e.altInput)),y=!g&&!d&&!le(a.relatedTarget),S=!e.config.ignoredFocusElements.some(function(O){return O.contains(s)});y&&S&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&u(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function me(a){if(!(!a||e.config.minDate&&a<e.config.minDate.getFullYear()||e.config.maxDate&&a>e.config.maxDate.getFullYear())){var s=a,d=e.currentYear!==s;e.currentYear=s||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),d&&(e.redraw(),G("onYearChange"),ue())}}function f(a,s){var d;s===void 0&&(s=!0);var g=e.parseDate(a,void 0,s);if(e.config.minDate&&g&&Me(g,e.config.minDate,s!==void 0?s:!e.minDateHasTime)<0||e.config.maxDate&&g&&Me(g,e.config.maxDate,s!==void 0?s:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(g===void 0)return!1;for(var y=!!e.config.enable,S=(d=e.config.enable)!==null&&d!==void 0?d:e.config.disable,O=0,D=void 0;O<S.length;O++){if(D=S[O],typeof D=="function"&&D(g))return y;if(D instanceof Date&&g!==void 0&&D.getTime()===g.getTime())return y;if(typeof D=="string"){var N=e.parseDate(D,void 0,!0);return N&&N.getTime()===g.getTime()?y:!y}else if(typeof D=="object"&&g!==void 0&&D.from&&D.to&&g.getTime()>=D.from.getTime()&&g.getTime()<=D.to.getTime())return y}return!y}function b(a){return e.daysContainer!==void 0?a.className.indexOf("hidden")===-1&&a.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(a):!1}function E(a){var s=a.target===e._input,d=e._input.value.trimEnd()!==cn();s&&d&&!(a.relatedTarget&&le(a.relatedTarget))&&e.setDate(e._input.value,!0,a.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function T(a){var s=Ae(a),d=e.config.wrap?n.contains(s):s===e._input,g=e.config.allowInput,y=e.isOpen&&(!g||!d),S=e.config.inline&&d&&!g;if(a.keyCode===13&&d){if(g)return e.setDate(e._input.value,!0,s===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),s.blur();e.open()}else if(le(s)||y||S){var O=!!e.timeContainer&&e.timeContainer.contains(s);switch(a.keyCode){case 13:O?(a.preventDefault(),u(),an()):Rn(a);break;case 27:a.preventDefault(),an();break;case 8:case 46:d&&!e.config.allowInput&&(a.preventDefault(),e.clear());break;case 37:case 39:if(!O&&!d){a.preventDefault();var D=r();if(e.daysContainer!==void 0&&(g===!1||D&&b(D))){var N=a.keyCode===39?1:-1;a.ctrlKey?(a.stopPropagation(),Fe(N),W(L(1),0)):W(void 0,N)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:a.preventDefault();var I=a.keyCode===40?1:-1;e.daysContainer&&s.$i!==void 0||s===e.input||s===e.altInput?a.ctrlKey?(a.stopPropagation(),me(e.currentYear-I),W(L(1),0)):O||W(void 0,I*7):s===e.currentYearElement?me(e.currentYear-I):e.config.enableTime&&(!O&&e.hourElement&&e.hourElement.focus(),u(a),e._debouncedChange());break;case 9:if(O){var F=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(De){return De}),J=F.indexOf(s);if(J!==-1){var Be=F[J+(a.shiftKey?-1:1)];a.preventDefault(),(Be||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(s)&&a.shiftKey&&(a.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&s===e.amPM)switch(a.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],q(),Ve();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],q(),Ve();break}(d||le(s))&&G("onKeyDown",a)}function j(a,s){if(s===void 0&&(s="flatpickr-day"),!(e.selectedDates.length!==1||a&&(!a.classList.contains(s)||a.classList.contains("flatpickr-disabled")))){for(var d=a?a.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),g=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),y=Math.min(d,e.selectedDates[0].getTime()),S=Math.max(d,e.selectedDates[0].getTime()),O=!1,D=0,N=0,I=y;I<S;I+=$s.DAY)f(new Date(I),!0)||(O=O||I>y&&I<S,I<g&&(!D||I>D)?D=I:I>g&&(!N||I<N)&&(N=I));var F=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+s));F.forEach(function(J){var Be=J.dateObj,De=Be.getTime(),St=D>0&&De<D||N>0&&De>N;if(St){J.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(at){J.classList.remove(at)});return}else if(O&&!St)return;["startRange","inRange","endRange","notAllowed"].forEach(function(at){J.classList.remove(at)}),a!==void 0&&(a.classList.add(d<=e.selectedDates[0].getTime()?"startRange":"endRange"),g<d&&De===g?J.classList.add("startRange"):g>d&&De===g&&J.classList.add("endRange"),De>=D&&(N===0||De<=N)&&Ms(De,g,d)&&J.classList.add("inRange"))})}}function K(){e.isOpen&&!e.config.static&&!e.config.inline&&je()}function ne(a,s){if(s===void 0&&(s=e._positionElement),e.isMobile===!0){if(a){a.preventDefault();var d=Ae(a);d&&d.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),G("onOpen");return}else if(e._input.disabled||e.config.inline)return;var g=e.isOpen;e.isOpen=!0,g||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),G("onOpen"),je(s)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(a===void 0||!e.timeContainer.contains(a.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function xt(a){return function(s){var d=e.config["_"+a+"Date"]=e.parseDate(s,e.config.dateFormat),g=e.config["_"+(a==="min"?"max":"min")+"Date"];d!==void 0&&(e[a==="min"?"minDateHasTime":"maxDateHasTime"]=d.getHours()>0||d.getMinutes()>0||d.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(y){return f(y)}),!e.selectedDates.length&&a==="min"&&Y(d),Ve()),e.daysContainer&&(Hn(),d!==void 0?e.currentYearElement[a]=d.getFullYear().toString():e.currentYearElement.removeAttribute(a),e.currentYearElement.disabled=!!g&&d!==void 0&&g.getFullYear()===d.getFullYear())}}function Lt(){var a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=pe(pe({},JSON.parse(JSON.stringify(n.dataset||{}))),t),d={};e.config.parseDate=s.parseDate,e.config.formatDate=s.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(F){e.config._enable=zn(F)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(F){e.config._disable=zn(F)}});var g=s.mode==="time";if(!s.dateFormat&&(s.enableTime||g)){var y=oe.defaultConfig.dateFormat||ft.dateFormat;d.dateFormat=s.noCalendar||g?"H:i"+(s.enableSeconds?":S":""):y+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||g)&&!s.altFormat){var S=oe.defaultConfig.altFormat||ft.altFormat;d.altFormat=s.noCalendar||g?"h:i"+(s.enableSeconds?":S K":" K"):S+(" h:i"+(s.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:xt("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:xt("max")});var O=function(F){return function(J){e.config[F==="min"?"_minTime":"_maxTime"]=e.parseDate(J,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:O("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:O("max")}),s.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,d,s);for(var D=0;D<a.length;D++)e.config[a[D]]=e.config[a[D]]===!0||e.config[a[D]]==="true";hn.filter(function(F){return e.config[F]!==void 0}).forEach(function(F){e.config[F]=gn(e.config[F]||[]).map(l)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var D=0;D<e.config.plugins.length;D++){var N=e.config.plugins[D](e)||{};for(var I in N)hn.indexOf(I)>-1?e.config[I]=gn(N[I]).map(l).concat(e.config[I]):typeof s[I]>"u"&&(e.config[I]=N[I])}s.altInputClass||(e.config.altInputClass=ke().className+" "+e.config.altInputClass),G("onParseConfig")}function ke(){return e.config.wrap?n.querySelector("[data-input]"):n}function Le(){typeof e.config.locale!="object"&&typeof oe.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=pe(pe({},oe.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?oe.l10ns[e.config.locale]:void 0),Xe.D="("+e.l10n.weekdays.shorthand.join("|")+")",Xe.l="("+e.l10n.weekdays.longhand.join("|")+")",Xe.M="("+e.l10n.months.shorthand.join("|")+")",Xe.F="("+e.l10n.months.longhand.join("|")+")",Xe.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var a=pe(pe({},t),JSON.parse(JSON.stringify(n.dataset||{})));a.time_24hr===void 0&&oe.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=ao(e),e.parseDate=Cn({config:e.config,l10n:e.l10n})}function je(a){if(typeof e.config.position=="function")return void e.config.position(e,a);if(e.calendarContainer!==void 0){G("onPreCalendarPosition");var s=a||e._positionElement,d=Array.prototype.reduce.call(e.calendarContainer.children,function(Do,Ao){return Do+Ao.offsetHeight},0),g=e.calendarContainer.offsetWidth,y=e.config.position.split(" "),S=y[0],O=y.length>1?y[1]:null,D=s.getBoundingClientRect(),N=window.innerHeight-D.bottom,I=S==="above"||S!=="below"&&N<d&&D.top>d,F=window.pageYOffset+D.top+(I?-d-2:s.offsetHeight+2);if(ve(e.calendarContainer,"arrowTop",!I),ve(e.calendarContainer,"arrowBottom",I),!e.config.inline){var J=window.pageXOffset+D.left,Be=!1,De=!1;O==="center"?(J-=(g-D.width)/2,Be=!0):O==="right"&&(J-=g-D.width,De=!0),ve(e.calendarContainer,"arrowLeft",!Be&&!De),ve(e.calendarContainer,"arrowCenter",Be),ve(e.calendarContainer,"arrowRight",De);var St=window.document.body.offsetWidth-(window.pageXOffset+D.right),at=J+g>window.document.body.offsetWidth,yo=St+g>window.document.body.offsetWidth;if(ve(e.calendarContainer,"rightMost",at),!e.config.static)if(e.calendarContainer.style.top=F+"px",!at)e.calendarContainer.style.left=J+"px",e.calendarContainer.style.right="auto";else if(!yo)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=St+"px";else{var dn=lo();if(dn===void 0)return;var Co=window.document.body.offsetWidth,xo=Math.max(0,Co/2-g/2),So=".flatpickr-calendar.centerMost:before",Eo=".flatpickr-calendar.centerMost:after",Io=dn.cssRules.length,ko="{left:"+D.left+"px;right:auto;}";ve(e.calendarContainer,"rightMost",!1),ve(e.calendarContainer,"centerMost",!0),dn.insertRule(So+","+Eo+ko,Io),e.calendarContainer.style.left=xo+"px",e.calendarContainer.style.right="auto"}}}}function lo(){for(var a=null,s=0;s<document.styleSheets.length;s++){var d=document.styleSheets[s];if(d.cssRules){try{d.cssRules}catch{continue}a=d;break}}return a??co()}function co(){var a=document.createElement("style");return document.head.appendChild(a),a.sheet}function Hn(){e.config.noCalendar||e.isMobile||(ue(),_t(),be())}function an(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Rn(a){a.preventDefault(),a.stopPropagation();var s=function(F){return F.classList&&F.classList.contains("flatpickr-day")&&!F.classList.contains("flatpickr-disabled")&&!F.classList.contains("notAllowed")},d=ro(Ae(a),s);if(d!==void 0){var g=d,y=e.latestSelectedDateObj=new Date(g.dateObj.getTime()),S=(y.getMonth()<e.currentMonth||y.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=g,e.config.mode==="single")e.selectedDates=[y];else if(e.config.mode==="multiple"){var O=ln(y);O?e.selectedDates.splice(parseInt(O),1):e.selectedDates.push(y)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=y,e.selectedDates.push(y),Me(y,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(F,J){return F.getTime()-J.getTime()}));if(q(),S){var D=e.currentYear!==y.getFullYear();e.currentYear=y.getFullYear(),e.currentMonth=y.getMonth(),D&&(G("onYearChange"),ue()),G("onMonthChange")}if(_t(),be(),Ve(),!S&&e.config.mode!=="range"&&e.config.showMonths===1?k(g):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var N=e.config.mode==="single"&&!e.config.enableTime,I=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(N||I)&&an()}_()}}var Ot={locale:[Le,ge],showMonths:[it,c,ee],minDate:[p],maxDate:[p],positionElement:[qn],clickOpens:[function(){e.config.clickOpens===!0?(A(e._input,"focus",e.open),A(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function uo(a,s){if(a!==null&&typeof a=="object"){Object.assign(e.config,a);for(var d in a)Ot[d]!==void 0&&Ot[d].forEach(function(g){return g()})}else e.config[a]=s,Ot[a]!==void 0?Ot[a].forEach(function(g){return g()}):hn.indexOf(a)>-1&&(e.config[a]=gn(s));e.redraw(),Ve(!0)}function Vn(a,s){var d=[];if(a instanceof Array)d=a.map(function(g){return e.parseDate(g,s)});else if(a instanceof Date||typeof a=="number")d=[e.parseDate(a,s)];else if(typeof a=="string")switch(e.config.mode){case"single":case"time":d=[e.parseDate(a,s)];break;case"multiple":d=a.split(e.config.conjunction).map(function(g){return e.parseDate(g,s)});break;case"range":d=a.split(e.l10n.rangeSeparator).map(function(g){return e.parseDate(g,s)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(a)));e.selectedDates=e.config.allowInvalidPreload?d:d.filter(function(g){return g instanceof Date&&f(g,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(g,y){return g.getTime()-y.getTime()})}function fo(a,s,d){if(s===void 0&&(s=!1),d===void 0&&(d=e.config.dateFormat),a!==0&&!a||a instanceof Array&&a.length===0)return e.clear(s);Vn(a,d),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),p(void 0,s),Y(),e.selectedDates.length===0&&e.clear(!1),Ve(s),s&&G("onChange")}function zn(a){return a.slice().map(function(s){return typeof s=="string"||typeof s=="number"||s instanceof Date?e.parseDate(s,void 0,!0):s&&typeof s=="object"&&s.from&&s.to?{from:e.parseDate(s.from,void 0),to:e.parseDate(s.to,void 0)}:s}).filter(function(s){return s})}function ho(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var a=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);a&&Vn(a,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function go(){if(e.input=ke(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=z(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),qn()}function qn(){e._positionElement=e.config.positionElement||e._input}function mo(){var a=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=z("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=a,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=a==="datetime-local"?"Y-m-d\\TH:i:S":a==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}A(e.mobileInput,"change",function(s){e.setDate(Ae(s).value,!1,e.mobileFormatStr),G("onChange"),G("onClose")})}function po(a){if(e.isOpen===!0)return e.close();e.open(a)}function G(a,s){if(e.config!==void 0){var d=e.config[a];if(d!==void 0&&d.length>0)for(var g=0;d[g]&&g<d.length;g++)d[g](e.selectedDates,e.input.value,e,s);a==="onChange"&&(e.input.dispatchEvent(sn("change")),e.input.dispatchEvent(sn("input")))}}function sn(a){var s=document.createEvent("Event");return s.initEvent(a,!0,!0),s}function ln(a){for(var s=0;s<e.selectedDates.length;s++){var d=e.selectedDates[s];if(d instanceof Date&&Me(d,a)===0)return""+s}return!1}function wo(a){return e.config.mode!=="range"||e.selectedDates.length<2?!1:Me(a,e.selectedDates[0])>=0&&Me(a,e.selectedDates[1])<=0}function _t(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(a,s){var d=new Date(e.currentYear,e.currentMonth,1);d.setMonth(e.currentMonth+s),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[s].textContent=Gt(d.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=d.getMonth().toString(),a.value=d.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function cn(a){var s=a||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(d){return e.formatDate(d,s)}).filter(function(d,g,y){return e.config.mode!=="range"||e.config.enableTime||y.indexOf(d)===g}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Ve(a){a===void 0&&(a=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=cn(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=cn(e.config.altFormat)),a!==!1&&G("onValueUpdate")}function bo(a){var s=Ae(a),d=e.prevMonthNav.contains(s),g=e.nextMonthNav.contains(s);d||g?Fe(d?-1:1):e.yearElements.indexOf(s)>=0?s.select():s.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):s.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function vo(a){a.preventDefault();var s=a.type==="keydown",d=Ae(a),g=d;e.amPM!==void 0&&d===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Oe(e.amPM.textContent===e.l10n.amPM[0])]);var y=parseFloat(g.getAttribute("min")),S=parseFloat(g.getAttribute("max")),O=parseFloat(g.getAttribute("step")),D=parseInt(g.value,10),N=a.delta||(s?a.which===38?1:-1:0),I=D+O*N;if(typeof g.value<"u"&&g.value.length===2){var F=g===e.hourElement,J=g===e.minuteElement;I<y?(I=S+I+Oe(!F)+(Oe(F)&&Oe(!e.amPM)),J&&w(void 0,-1,e.hourElement)):I>S&&(I=g===e.hourElement?I-S-Oe(!e.amPM):y,J&&w(void 0,1,e.hourElement)),e.amPM&&F&&(O===1?I+D===23:Math.abs(I-D)>O)&&(e.amPM.textContent=e.l10n.amPM[Oe(e.amPM.textContent===e.l10n.amPM[0])]),g.value=Ce(I)}}return o(),e}function ht(n,t){for(var e=Array.prototype.slice.call(n).filter(function(l){return l instanceof HTMLElement}),i=[],o=0;o<e.length;o++){var r=e[o];try{if(r.getAttribute("data-fp-omit")!==null)continue;r._flatpickr!==void 0&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=Ps(r,t||{}),i.push(r._flatpickr)}catch(l){console.error(l)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return ht(this,n)},HTMLElement.prototype.flatpickr=function(n){return ht([this],n)});var oe=function(n,t){return typeof n=="string"?ht(window.document.querySelectorAll(n),t):n instanceof Node?ht([n],t):ht(n,t)};oe.defaultConfig={};oe.l10ns={en:pe({},kt),default:pe({},kt)};oe.localize=function(n){oe.l10ns.default=pe(pe({},oe.l10ns.default),n)};oe.setDefaults=function(n){oe.defaultConfig=pe(pe({},oe.defaultConfig),n)};oe.parseDate=Cn({});oe.formatDate=ao({});oe.compareDates=Me;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return ht(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=oe);var xn={exports:{}};(function(n,t){(function(e,i){i(t)})(yn,function(e){var i=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},o={firstDayOfWeek:1,weekdays:{shorthand:["dim","lun","mar","mer","jeu","ven","sam"],longhand:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},months:{shorthand:["janv","fvr","mars","avr","mai","juin","juil","aot","sept","oct","nov","dc"],longhand:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},ordinal:function(l){return l>1?"":"er"},rangeSeparator:" au ",weekAbbreviation:"Sem",scrollTitle:"Dfiler pour augmenter la valeur",toggleTitle:"Cliquer pour basculer",time_24hr:!0};i.l10ns.fr=o;var r=i.l10ns;e.French=o,e.default=r,Object.defineProperty(e,"__esModule",{value:!0})})})(xn,xn.exports);var Fs=xn.exports;class Bn{constructor(t,e={}){if(this.triggerElement=t,this.config=e,this.targets=this._parseCsv(t.dataset.targetDynamicDropdown,t.dataset.targetDynamicDropdownApiUrl,t.dataset.targetDynamicDropdownFilter),!this.targets.length){console.warn("DynamicDropdownTreatment : attributs `data-target-dynamic-dropdown`, `data-target-dynamic-dropdown-api-url` ou `data-target-dynamic-dropdown-filter` manquants ou mal forms.");return}const i=e.formSelector&&document.querySelector(e.formSelector)?e.formSelector:e.filterFormSelector&&document.querySelector(e.filterFormSelector)?e.filterFormSelector:"#card_crud";this.loader=new Je(i),this.init()}_parseCsv(t,e,i){if(!t||!e||!i)return[];const o=t.split(",").map(u=>u.trim()),r=e.split(",").map(u=>u.trim()),l=i.split(",").map(u=>u.trim()),c=Math.max(o.length,r.length,l.length);return Array.from({length:c},(u,U)=>({selector:o[U]||o[0],apiUrl:r[U]||r[0],filterParam:l[U]||l[0],cache:new Map}))}init(){const t=this.triggerElement.name;R.bindEvent("change",`[name='${t}']`,async e=>{await this.updateAll(e.target.value)}),this.triggerElement.value&&this.updateAll(this.triggerElement.value)}async updateAll(t){if(t)for(const e of this.targets){const i=document.querySelector(e.selector);if(!i){console.warn(`DynamicDropdownTreatment : cible introuvable "${e.selector}"`);continue}if(e.cache.has(t)){i.disabled=!0,this._populate(i,e.cache.get(t)),i.disabled=!1;continue}this.loader.showNomBloquante();try{let o=`${e.apiUrl}?filter=${e.filterParam}&value=${encodeURIComponent(t)}`;o=new jn(this.config).appendParamsToUrl(o,this.config.viewStateService.getContextParams()),console.log(o),i.disabled=!0;const l=await fetch(o);if(!l.ok)throw new Error(`HTTP ${l.status}`);const c=await l.json();e.cache.set(t,c),this._populate(i,c)}catch(o){ce.handleError(o,o.message)}finally{i.disabled=!1,this.loader.hide()}}}_populate(t,e){const i=t.multiple,o=i?Array.from(t.selectedOptions).map(r=>r.value):t.value;if(t.innerHTML="",!i){const r=t.querySelector('option[value=""]')||new Option("","");t.appendChild(r)}e.forEach(r=>{const l=new Option(r.label??r.toString,r.id??r.value);i&&Array.isArray(o)&&o.includes(l.value)&&(l.selected=!0),t.appendChild(l)}),i||(t.value=Array.from(t.options).some(r=>r.value==o)?o:"")}}class so extends yt{constructor(t,e,i=null){super(t,e),this.config=t,this.tableUI=e,this.containerSelector=i||this.config.crudSelector,this.SuscesMessage="Entit modifie avec succs."}init(){this.handleEditEntity(),this.handleSubmitForm()}editEntity(t){let e=this.getUrlWithId(this.config.editUrl,t);e=this.appendParamsToUrl(e,this.viewStateService.getContextParams()),this.tableUI.indexUI.modalUI.showLoading(this.config.editTitle),$.get(e).done(i=>{this.tableUI.indexUI.modalUI.showContent(i),this.executeScripts(i),this.tableUI.indexUI.modalUI.setTitle(window.modalTitle),this.tableUI.indexUI.formUI.init(()=>this.submitEntity(),!1)}).fail(i=>{this.tableUI.indexUI.modalUI.close(),ce.handleError(i,"Erreur lors de la modification.")})}handleEditEntity(){R.bindEvent("click",`${this.containerSelector} .editEntity`,t=>{t.preventDefault();const e=$(t.currentTarget).data("id");this.editEntity(e)})}submitEntity(t){const e=$(this.config.formSelector),i=e.attr("action"),o=e.find('input[name="_method"]').val()||"POST";let r=e.serialize();if(this.tableUI.indexUI.formUI.loader.show(),!this.tableUI.indexUI.formUI.validateForm()){B.showError("Validation choue. Veuillez corriger les erreurs."),this.tableUI.indexUI.formUI.loader.hide();return}$.ajax({url:i,method:o,data:r}).done(l=>{var u;const c=(u=l.data)==null?void 0:u.traitement_token;c?this.pollTraitementStatus(c,()=>{B.show(l.type,l.title,l.message)}):B.show(l.type,l.title,l.message),this.tableUI.indexUI.formUI.loader.hide(),this.tableUI.indexUI.modalUI.close(),typeof t=="function"&&t()}).fail(l=>{var c;this.tableUI.indexUI.formUI.loader.hide(),(c=l.responseJSON)!=null&&c.errors&&this.tableUI.indexUI.formUI.showFieldErrors(l.responseJSON.errors),ce.handleError(l,"Erreur lors du traitement du formulaire.")})}handleSubmitForm(){R.bindEvent("submit",this.config.formSelector,t=>{t.preventDefault(),this.submitEntity()})}update_attributes(t,e){var l,c;let i=!1;this.loader.showNomBloquante("Mise  jour");const o=this.config.updateAttributesUrl,r=this.appendParamsToUrl(o,((c=(l=this.viewStateService)==null?void 0:l.getContextParams)==null?void 0:c.call(l))||"");$.ajax({url:r,method:"POST",data:{...t,_token:this.config.csrfToken}}).done(u=>{var x;const U=(x=u.data)==null?void 0:x.traitement_token;U?(i=!0,this.pollTraitementStatus(U,()=>{})):B.show(u.type,u.title,u.message),this.loader.hide(),typeof e=="function"&&e(u,i)}).fail(u=>{this.loader.hide(),ce.handleError(u,"Erreur lors de la mise  jour.")})}}class Ls{constructor(t,e,i=""){this.config=t,this.indexUI=e,this.containerSelector=i||this.config.showContainerSelector,this.entityEditor=new so(t,this.indexUI.tableUI,this.containerSelector),this.viewStateService=this.config.viewStateService,this.loader=new Je(this.containerSelector)}init(){Dt.init(),this.loader.init(),this.handleCardFooter(),this.handleCancelButton(),this.entityEditor.init(),this.initTooltip(),this.initializeDate(),this.initCodeJar(),window.dynamicFieldVisibilityTreatments&&new Qi(window.dynamicFieldVisibilityTreatments).initialize(),document.querySelectorAll(this.containerSelector+" [data-target-dynamic-dropdown]").forEach(t=>new Bn(t,this.config)),this.config.isDebug&&this.highlightStateFields()}handleCardFooter(){const t=`${this.containerSelector}`;$(t).find(".card-footer").removeClass("card-footer").addClass("modal-footer")}initTooltip(){$('[data-toggle="tooltip"]',this.containerSelector).tooltip()}initializeDate(){oe(this.containerSelector+" .datetimepicker",{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,locale:Fs.French,allowInput:!1,weekNumbers:!0,clickOpens:!1})}initCodeJar(){document.querySelectorAll(this.containerSelector+" .code-editor").forEach(e=>{const i=o=>{try{const r=JSON.stringify(JSON.parse(o.textContent),null,2);o.innerHTML=Ke.highlight(r,Ke.languages.json,"json")}catch{o.innerHTML=Ke.highlight(o.textContent,Ke.languages.json,"json")}};eo(e,i),i(e)})}highlightStateFields(){const t=this.viewStateService.getScopeShowVariables();Object.keys(t).forEach(e=>{const i=document.querySelector(`${this.containerSelector} #${e}`);i&&(i.parentElement.style.backgroundColor="lightyellow")})}showNotification(t,e="info"){B[e==="error"?"showError":"show"](t)}handleCancelButton(){R.bindEvent("click",`${this.containerSelector} .form-cancel-button`,t=>{t.preventDefault(),this.indexUI.modalUI.close()})}}class Os extends Ft{constructor(t,e){super(t),this.config=t,this.tableUI=e}init(){this.handleShowEntity()}showEntity(t){let e=this.getUrlWithId(this.config.showUrl,t);e=this.appendParamsToUrl(e,this.viewStateService.getContextParams()),this.tableUI.indexUI.modalUI.showLoading("Chargement..."),$.get(e).done(i=>{this.tableUI.indexUI.modalUI.showContent(i),this.executeScripts(i),this.tableUI.indexUI.modalUI.setTitle(window.modalTitle),this.tableUI.indexUI.showUI.init()}).fail(i=>{this.tableUI.indexUI.modalUI.close(),ce.handleError(i,"Erreur lors du chargement des dtails de l'entit.")})}handleShowEntity(){R.bindEvent("click",`${this.config.crudSelector} .showEntity`,t=>{t.preventDefault();const e=$(t.currentTarget).data("id");this.showEntity(e)})}}class _s extends yt{constructor(t,e){super(t,e),this.config=t,this.tableUI=e,this.suscesMessage="Entit supprime avec succs."}init(){this.handleDeleteEntity()}deleteEntity(t){let e=this.getUrlWithId(this.config.deleteUrl,t);e=this.appendParamsToUrl(e,this.viewStateService.getContextParams()),B.confirmAction("tes-vous sr ?","Cette action est irrversible.",()=>{B.showToast("info","Suppression en cours..."),$.ajax({url:e,method:"DELETE",data:{_token:this.config.csrfToken}}).done(i=>{var r;const o=(r=i==null?void 0:i.data)==null?void 0:r.traitement_token;o?this.pollTraitementStatus(o,()=>{this.handleSuccess(this.suscesMessage)}):this.handleSuccess(this.suscesMessage),$(`#${this.config.entity_name}-row-${t}`).fadeOut()}).fail(i=>{ce.handleError(i,"Erreur lors de la suppression de l'entit.")})})}handleDeleteEntity(){R.bindEvent("click",`${this.config.crudSelector} .deleteEntity`,t=>{t.preventDefault();const e=$(t.currentTarget).data("id");this.deleteEntity(e)})}}class Ns extends Ft{constructor(t,e){super(t),this.config=t,this.tableUI=e,this.successMessage="Opration effectue avec succs."}init(){this.bindEntityActions()}executeAction(t,e){if(e=this.appendParamsToUrl(e,this.viewStateService.getContextParams()),t==="confirm")B.confirmAction("Confirmation requise","Cette action est irrversible. tes-vous sr de vouloir continuer ?",()=>{B.showToast("info","Action en cours..."),$.ajax({url:e,method:"GET",data:{_token:this.config.csrfToken}}).done(i=>{B.show(i.type,i.title,i.message),this.tableUI.loadListAction.loadEntities()}).fail(i=>{ce.handleError(i,"Erreur lors de l'excution de l'action sur l'entit.")})});else if(t==="form")this.loadForm(e);else if(t==="downloadMode"){B.showToast("info","Tlchargement en cours...");const i=this.appendParamsToUrl(e,this.viewStateService.getContextParams()),o=document.createElement("a");o.href=i,o.setAttribute("download",""),document.body.appendChild(o),o.click(),document.body.removeChild(o)}else console.error("Type d'action inconnu :",t)}loadForm(t){this.tableUI.indexUI.modalUI.showLoading("Chargement..."),$.get(t).done(e=>{this.tableUI.indexUI.modalUI.showContent(e),this.executeScripts(e),this.tableUI.loadListAction.loadEntities()}).fail(e=>{ce.handleError(e,"Erreur lors du chargement du formulaire.")})}submitForm(){const t=$(this.config.formSelector),e=t.attr("action"),i=t.find('input[name="_method"]').val()||"POST",o=t.serialize();if(this.tableUI.indexUI.formUI.loader.show(),!this.tableUI.indexUI.formUI.validateForm()){B.showError("Validation choue. Veuillez corriger les erreurs."),this.tableUI.indexUI.formUI.loader.hide();return}$.ajax({url:e,method:i,data:o}).done(()=>{this.tableUI.indexUI.formUI.loader.hide(),this.handleSuccess(this.successMessage),this.tableUI.indexUI.modalUI.close(),this.tableUI.loadListAction.loadEntities()}).fail(r=>{var l;this.tableUI.indexUI.formUI.loader.hide(),(l=r.responseJSON)!=null&&l.errors&&this.tableUI.indexUI.formUI.showFieldErrors(r.responseJSON.errors),ce.handleError(r,"Erreur lors du traitement du formulaire.")})}bindEntityActions(){R.bindEvent("click",`${this.config.crudSelector} .actionEntity`,t=>{t.preventDefault();const e=$(t.currentTarget).data("id"),i=$(t.currentTarget).data("url"),o=$(t.currentTarget).data("action-type");i&&o?this.executeAction(o,i):console.error("URL ou type d'action non dfini pour l'entit",e)})}}class js extends Ft{constructor(t,e){super(t),this.config=t,this.tableUI=e,this.viewState=t.viewStateService,this.view_type_variable=this.config.view_type_variable}init(){this.handleViewSwitchClick(),this.highlightActiveView()}handleViewSwitchClick(){R.bindEvent("click",".view-switch-option",t=>{t.preventDefault();const e=$(t.currentTarget).data("view-type"),i=$(t.currentTarget).data("icon")||"";$("#exportDropdown i").attr("class",i);const o=`${this.view_type_variable}`;this.viewState.setVariable(o,e),this.highlightActiveView(e),this.tableUI.loadListAction.loadEntities(1),this.tableUI.indexUI.filterUI.init()})}highlightActiveView(t=null){const e=t||this.viewState.getVariable(this.view_type_variable)||`${this.config.entity_name}_table`;$(".view-switch-option").removeClass("active"),$(`.view-switch-option[data-view-type="${e}"]`).addClass("active")}}class Bs extends Ft{constructor(t,e){super(t),this.config=t,this.tableUI=e,this.SuscesMessage="Index charg avec succs."}init(){this.handleShowIndex()}handleShowIndex(){R.bindEvent("click",`${this.config.crudSelector} .showIndex`,t=>{t.preventDefault();const e=$(t.currentTarget),i=e.attr("href");e.hasClass("readOnly")?this.loadIndexContent(i,!0):this.loadIndexContent(i,!1)})}loadIndexContent(t,e){const i=this.appendParamsToUrl(t,this.viewStateService.getContextParams());this.tableUI.indexUI.modalUI.showLoading("Chargement..."),$.get(i).done(o=>{this.tableUI.indexUI.modalUI.showContent(o),this.executeScripts(o),this.tableUI.indexUI.modalUI.setTitle(window.modalTitle),this.tableUI.indexUI.formUI.init(),e&&this.tableUI.indexUI.formUI.setToReadOnly()}).fail(o=>{this.tableUI.indexUI.modalUI.close(),ce.handleError(o,"Erreur lors du chargement des dtails de l'entit.")})}}class Hs extends yt{constructor(t,e){super(t,e),this.config=t,this.tableUI=e,this.successMessage="Action en masse effectue avec succs.",this.isSelectingRows=!1}init(){this.bindRowSelectionWatcher(),this.bindBulkActionButton()}bindRowSelectionWatcher(){R.bindEvent("change",`${this.config.tableSelector} .check-row`,()=>{const t=this.getSelectedIds().length;this.isSelectingRows=t>0,console.log(t),console.log("isSelectingRows :",this.isSelectingRows,"Total :",t)})}bindBulkActionButton(){R.bindEvent("click",`${this.config.crudSelector} .bulkActionButton`,t=>{t.preventDefault();const e=t.currentTarget,i=e.dataset.url,o=e.dataset.method||"POST",r=e.dataset.confirm||null,l=e.dataset.actionType||"ajax",c=this.getSelectedIds();this.isSelectingRows=!1;const u=c.length;if(u===0)return;const U=()=>{if(l==="modal"){const x=this.appendParamsToUrl(i,this.viewStateService.getContextParams());this.tableUI.indexUI.modalUI.showLoading("Modification en masse..."),$.get(x,{ids:c}).done(q=>{this.tableUI.indexUI.modalUI.showContent(q),this.executeScripts(q),this.tableUI.indexUI.modalUI.setTitle(window.modalTitle),this.tableUI.indexUI.formUI.init(()=>this.submitEntity(),!1),this.tableUI.indexUI.formUI.disableRequiredAttributes(),R.bindEvent("change",`${this.config.formSelector} input, ${this.config.formSelector} select, ${this.config.formSelector} textarea`,Y=>{var A;const se=(A=Y.currentTarget.name)==null?void 0:A.replace("[]","");if(se){const _=document.getElementById(`bulk_field_${se}`);_&&(_.checked=!0)}})}).fail(q=>{this.tableUI.indexUI.modalUI.close(),ce.handleError(q,"Erreur lors du chargement du formulaire.")})}else B.showToast("info",`Traitement de ${u} lment(s) en cours...`),$.ajax({url:this.appendParamsToUrl(i,this.viewStateService.getContextParams()),method:o,data:{ids:c,_token:this.config.csrfToken}}).done(x=>{B.show(x.type,x.title,x.message||`${u} lment(s) trait(s).`),this.tableUI.loadListAction.loadEntities()}).fail(x=>{ce.handleError(x,"Erreur lors de l'action en masse.")})};r?B.confirmAction("Confirmation",`${r} (${u} lment(s))`,U):U()})}submitEntity(t){const e=$(this.config.formSelector),i=e.attr("action"),o=e.find('input[name="_method"]').val()||"POST",r=e.serialize();if(this.isSelectingRows=!1,this.tableUI.indexUI.formUI.loader.show(),!this.tableUI.indexUI.formUI.validateForm()){B.showError("Validation choue. Veuillez corriger les erreurs."),this.tableUI.indexUI.formUI.loader.hide();return}$.ajax({url:i,method:o,data:r}).done(l=>{var u;const c=(u=l.data)==null?void 0:u.traitement_token;c?this.pollTraitementStatus(c,()=>{B.show(l.type,l.title,l.message)}):B.show(l.type,l.title,l.message),this.tableUI.indexUI.formUI.loader.hide(),this.tableUI.indexUI.modalUI.close(),typeof t=="function"&&t(),this.tableUI.loadListAction.loadEntities()}).fail(l=>{var c;this.tableUI.indexUI.formUI.loader.hide(),(c=l.responseJSON)!=null&&c.errors&&this.tableUI.indexUI.formUI.showFieldErrors(l.responseJSON.errors),ce.handleError(l,"Erreur lors du traitement du formulaire.")})}getSelectedIds(){const t=document.querySelectorAll(`${this.config.crudSelector} .check-row:checked`);return Array.from(t).map(e=>e.dataset.id)}}class Rs{constructor(t,e){this.config=t,this.tableUI=e,this.entityEditor=this.tableUI.entityEditor}init(){this.config.canEdit&&this.initSortable()}initSortable(){const t=this;$(`${this.config.tableSelector} tbody`).sortable({items:"tr",cursor:"move",axis:"y",handle:".sortable-button",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",update:function(e,i){var c;const o=i.item,r=(c=o.attr("id"))==null?void 0:c.replace(/^.*-/,"");if(!r)return;const l=o.index()+1;t.entityEditor.update_attributes({id:r,ordre:l},()=>{B.showSuccess("Ordre mis  jour."),t.tableUI.loadListAction.loadEntities()})}}),$(`${this.config.tableSelector} .sortable-button`).css("cursor","move")}}class Vs{constructor(){this.map=new Map}register(t,e){this.map.set(t,e)}create(t,e){if(!this.map.has(t))throw new Error(`Aucun diteur enregistr pour le type ${t}`);return this.map.get(t)(e)}}const Ct=new Vs;Ct.register("text",n=>{let t;return{mount(e,{value:i,onCommit:o,onCancel:r,autoFocus:l}){t=document.createElement("input"),t.type="text",t.className="form-control form-control-sm",t.value=i??"",t.addEventListener("keydown",c=>{c.key==="Escape"&&r(),c.key==="Enter"&&o(t.value)}),t.addEventListener("blur",()=>o(t.value)),e.innerHTML="",e.appendChild(t),l&&t.focus()},destroy(){t=null},focus(){t==null||t.focus()}}});Ct.register("number",n=>{let t;return{mount(e,{value:i,onCommit:o,onCancel:r,autoFocus:l}){t=document.createElement("input"),t.type="number",t.className="form-control form-control-sm",t.value=i??"",t.addEventListener("keydown",c=>{c.key==="Escape"&&r(),c.key==="Enter"&&o(t.valueAsNumber)}),t.addEventListener("blur",()=>o(t.valueAsNumber)),e.innerHTML="",e.appendChild(t),l&&t.focus()},destroy(){t=null},focus(){t==null||t.focus()}}});Ct.register("date",n=>{let t;return{mount(e,{value:i,onCommit:o,onCancel:r,autoFocus:l}){t=document.createElement("input"),t.type="date",t.className="form-control form-control-sm",t.value=i??"",t.addEventListener("keydown",c=>{c.key==="Escape"&&r(),c.key==="Enter"&&o(t.value)}),t.addEventListener("blur",()=>o(t.value)),e.innerHTML="",e.appendChild(t),l&&t.focus()},destroy(){t=null},focus(){t==null||t.focus()}}});Ct.register("boolean",n=>{let t;return{mount(e,{value:i,onCommit:o,onCancel:r}){t=document.createElement("input"),t.type="checkbox",t.checked=!!i,t.addEventListener("keydown",l=>{l.key==="Escape"&&r(),l.key==="Enter"&&o(t.checked)}),t.addEventListener("change",()=>o(t.checked)),e.innerHTML="",e.appendChild(t),t.focus()},destroy(){t=null},focus(){t==null||t.focus()}}});Ct.register("select",n=>{let t;return{mount(e,{meta:i,value:o,onCommit:r,onCancel:l}){var c;t=document.createElement("select"),t.className="form-control form-control-sm",(((c=i.options)==null?void 0:c.values)||[]).forEach(u=>{const U=document.createElement("option");U.value=String(u.value),U.textContent=u.label,String(u.value)===String(o)&&(U.selected=!0),t.appendChild(U)}),t.addEventListener("keydown",u=>{u.key==="Escape"&&l(),u.key==="Enter"&&r(t.value)}),t.addEventListener("change",()=>r(t.value)),e.innerHTML="",e.appendChild(t),t.focus()},destroy(){t=null},focus(){t==null||t.focus()}}});class zs{constructor(){this.cache=new Map,this.ttl=5*60*1e3}_key(t,e,i){return`${t}:${e}:${i}`}get(t,e,i){const o=this._key(t,e,i),r=this.cache.get(o);return r&&r.expire>Date.now()?r.meta:null}set(t,e,i,o){const r=this._key(t,e,i);this.cache.set(r,{meta:o,expire:Date.now()+this.ttl})}async getMeta(t,e,i){const o=this.get(t,e,i);if(o)return o;const r=await fetch(`/admin/PkgRealisationTache/realisationTaches/${e}/field/${i}/meta`);if(!r.ok)throw new Error(`Erreur API meta: ${r.status}`);const l=await r.json();return this.set(t,e,i,l),l}}const ai=new zs;class qs extends yt{constructor(t,e){super(t,e),this.config=t,this.tableUI=e,this.active=null,this.editor=null,this.loader=new Je(this.config.tableSelector)}init(){this.bindTable(this.config.tableSelector)}bindTable(t){var e;(e=document.querySelector(t))==null||e.addEventListener("dblclick",i=>{const o=i.target.closest(".editable-cell");o&&this.activateCell(o)}),document.addEventListener("keydown",i=>{if(this.active&&(i.key==="Escape"&&this.cancelEdit(),i.key==="Enter")){i.preventDefault();const o=this.active.querySelector("input,select,textarea");this.commitChange(this.active,this.active._meta,o==null?void 0:o.value)}})}async activateCell(t){this.active&&this.active!==t&&this.cancelEdit();const e=t.dataset.id,i=t.dataset.field;try{this.loader.showNomBloquante("");const o=await ai.getMeta("realisationTache",e,i);this.loader.hide(),t.dataset.original||(t.dataset.original=t.innerHTML),this.editor=Ct.create(o.type,{});const r=o.value??t.textContent;this.active=t,this.editor.mount(t,{meta:o,value:r,autoFocus:!0,onCommit:l=>this.commitChange(t,o,l),onCancel:()=>this.cancelEdit()})}catch(o){B.showError("Impossible d'activer ldition."),console.error("Erreur activation cellule:",o)}}async commitChange(t,e,i){const o=t.dataset.id,r=t.dataset.field,l=t.dataset.original??t.innerHTML;t.classList.add("updating"),this.loader.showNomBloquante("Mise  jour en cours...");let c=this.getUrlWithId(this.config.editUrl,o);c=`/admin/PkgRealisationTache/realisationTaches/${o}/inline`,c=this.appendParamsToUrl(c,this.viewStateService.getContextParams()),$.ajax({url:c,method:"PATCH",headers:{"If-Match":e.etag,"X-CSRF-TOKEN":this.config.csrfToken},contentType:"application/json",data:JSON.stringify({changes:{[r]:i}})}).done(u=>{var x;const U=u==null?void 0:u.traitement_token;U&&this.pollTraitementStatus(U,()=>{}),t.innerHTML=((x=u.display[r])==null?void 0:x.html)??i,t.classList.remove("updating"),e.etag=u.etag,e.value=i,ai.set("realisationTache",o,r,e),B.showSuccess("Valeur mise  jour avec succs.")}).fail(u=>{if(t.innerHTML=l,t.classList.remove("updating"),u.status===409){B.showError(" Conflit de version. Rechargez la ligne.");return}ce.handleError(u,"Erreur lors de la mise  jour.")}).always(()=>{this.loader.hide(),this.active=null,this.editor=null})}cancelEdit(){!this.active||!this.editor||(this.active.innerHTML=this.active.dataset.original||this.active.textContent,this.editor.destroy(),this.active=null,this.editor=null)}}class rn{constructor(t,e){this.config=t,this.indexUI=e,this.entityCreator=new Ds(t,this),this.entityViewer=new Os(t,this),this.showIndex=new Bs(t,this),this.entityEditor=new so(t,this),this.entityDeleter=new _s(t,this),this.loadListAction=new ks(t,this),this.entityAction=new Ns(t,this),this.bulkAction=new Hs(t,this),this.viewSwitcherAction=new js(t,this),this.ordreColumn=new Rs(t,this),this.cellOrchestrator=new qs(t,this)}init(){this.viewSwitcherAction.init(),this.entityEditor.init(),this.entityCreator.init(),this.entityDeleter.init(),this.entityViewer.init(),this.showIndex.init(),this.entityAction.init(),this.bulkAction.init(),this.handleSorting(),rn.initTooltip(),this.initTruncatText(),this.initWidgets(),this.ordreColumn.init(),this.cellOrchestrator.init()}updateSortArray(t,e){const i=t.find(o=>o.startsWith(e+"_"));if(i){const o=i.split("_").pop();if(o==="asc")return t.map(r=>r.startsWith(e+"_")?`${e}_desc`:r);if(o==="desc")return t.filter(r=>!r.startsWith(e+"_"))}return[...t,`${e}_asc`]}handleSorting(){R.bindEvent("click",this.config.sortableColumnSelector,t=>{t.preventDefault();const e=$(t.currentTarget).data("sort"),i=this.config.viewStateService.getSortVariables(),o=i[e];let r=null;o==="asc"?r="desc":o==="desc"?r=null:r="asc",Object.keys(i).forEach(c=>{this.config.viewStateService.removeVariable(`sort.${this.config.entity_name}.${c}`)}),r!==null&&this.config.viewStateService.setVariable(`sort.${this.config.entity_name}.${e}`,r);const l=this.config.viewStateService.getSortVariables();this.updateSortInURL(l),this.loadListAction.loadEntities(1)})}updateSortInURL(t){const e=new URL(window.location.href),i=`sort.${this.config.entity_name}.`;for(const[o]of e.searchParams.entries())o.startsWith(i)&&e.searchParams.delete(o);Object.entries(t).forEach(([o,r])=>{e.searchParams.set(`sort.${this.config.entity_name}.${o}`,r)}),window.history.replaceState({},"",e)}initTruncatText(){$('.text-truncate[data-toggle="tooltip"]').tooltip("dispose"),$(".text-truncate").each(function(){const t=$(this);this.offsetWidth<this.scrollWidth?(t.attr("title",t.text().trim()),t.attr("data-toggle","tooltip")):t.removeAttr("title").removeAttr("data-toggle")}),$('.text-truncate[data-toggle="tooltip"]').tooltip({placement:"auto"}).on("shown.bs.tooltip",function(){const t=$(this);setTimeout(()=>{t.tooltip("hide")},3e3)})}static initTooltip(){$(".tooltip").remove(),$('[data-toggle="tooltip"]').tooltip("dispose"),$('[data-toggle="tooltip"]').tooltip({placement:"auto"}).on("shown.bs.tooltip",function(){const e=$(this);setTimeout(()=>{e.tooltip("hide")},3e3)})}initWidgets(){const t=this;$(".widgets_container").sortable({placeholder:"sort-highlight",handle:".card-header, .nav-tabs, .icon",forcePlaceholderSize:!0,zIndex:999999,tolerance:"pointer",update:function(i,o){const r=o.item,l=r.data("id"),c=r.index()+1;t.entityEditor.update_attributes({id:l,ordre:c},()=>NotificationHandler.showSuccess("Ordre mis  jour."))}}),$(".widgets_container .card-header").css("cursor","move"),$(".widgets_container .icon").css("cursor","move");const e=`${this.config.dataContainerOutSelector} [data-card-widget="remove"]`;R.bindEvent("click",e,i=>{i.preventDefault();const r=$(i.currentTarget).closest(".widget"),l=r.data("id");l&&t.entityEditor.update_attributes({id:l,visible:0},()=>{r.fadeOut(),NotificationHandler.showSuccess("Widget masqu avec succs.")})}),this.widgetStateLocalStorage()}widgetStateLocalStorage(){document.querySelectorAll('[data-card-widget="collapse"]').forEach(t=>{const e=t.closest(".card"),i=t.dataset.storeKey;if(!e||!i)return;localStorage.getItem(i)==="collapsed"&&!e.classList.contains("collapsed-card")&&t.click(),new MutationObserver(l=>{for(const c of l)c.attributeName==="class"&&(e.classList.contains("collapsed-card")?localStorage.setItem(i,"collapsed"):localStorage.setItem(i,"expanded"))}).observe(e,{attributes:!0})})}}class Ws{constructor(t,e){this.config=t,this.indexUI=e}init(){this.config.init(),this.bindCheckAllHandler(),this.bindCheckRowHandler(),this.updateCheckAllState()}updateCheckAllState(){const t=document.querySelectorAll(`${this.config.crudSelector} .check-row`),e=document.querySelector(`${this.config.crudSelector} .check-all-rows`),i=document.querySelectorAll(`${this.config.crudSelector} .check-row:checked`).length;if(!e)return;e.checked=i===t.length,e.indeterminate=i>0&&i<t.length;const o=document.querySelector(`${this.config.crudSelector} .crud-bulk-action`),r=document.querySelector(`${this.config.crudSelector} .bulk-selected-count`);o&&r&&(i>0?(o.classList.remove("d-none"),$(`${this.config.crudSelector} .card-header:not(:first)`).show(),r.textContent=i):(o.classList.add("d-none"),this.indexUI.filterUI.initFilterToogle(),r.textContent=0))}bindCheckAllHandler(){R.bindEvent("change",`${this.config.crudSelector} .check-all-rows`,t=>{const e=t.currentTarget.checked;document.querySelectorAll(`${this.config.crudSelector} .check-row`).forEach(o=>{o.checked=e,o.dispatchEvent(new Event("change",{bubbles:!0}))}),this.updateCheckAllState()})}bindCheckRowHandler(){R.bindEvent("change",`${this.config.crudSelector} .check-row`,()=>{this.updateCheckAllState()})}}class Ys{constructor(t,e){this.config=t,this.indexUI=e,this.debounceTimeout=null,this.debounceDelay=500,this.page=0}init(){this.config.init(),this.initFilterToogle(),this.handleFormInput(),this.adapterPourContext(),this.initializeFilterResetHandler(),this.initStats(),document.querySelectorAll(this.config.filterFormSelector+" [data-target-dynamic-dropdown]").forEach(t=>{new Bn(t,this.config)})}getFormData(t=!1){const e=$(this.config.filterFormSelector),i={};return e.serializeArray().forEach(({name:r,value:l})=>{i[r]=l}),e.serializeArray().forEach(r=>{const l=r.value.trim();(t||l)&&(r.name=r.name.replace("/","."),i[r.name]=l)}),i}getFormDataAsStateVariables(){const t={},e=this.getFormData(!0);return Object.entries(e).forEach(([i,o])=>{t[`filter.${this.config.entity_name}.${i}`]=o}),t}getUrlParams(){const t={};return Object.entries(this.getFormData()).forEach(([e,i])=>{t[`${e}`]=i}),new URLSearchParams(t).toString()}submitForm(t=1){const e=this.getFormData(!0);e.page=t,this.config.viewStateService.updatFilterVariables(this.getFormData(!0)),this.indexUI.updateURLParameters(this.getFormDataAsStateVariables()),this.indexUI.tableUI.loadListAction.loadEntities(t,e)}handleFormInput(){const t=this.config.filterFormSelector;R.bindEvent("input",`${t} input, ${t} select`,()=>{clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.updateFilterState(),this.submitForm()},this.debounceDelay)}),R.bindEvent("submit",t,e=>{e.preventDefault(),this.submitForm()})}adapterPourContext(){const t=this.config.viewStateService.getScopeVariables(),e=this.config.viewStateService.getFilterVariables();Object.keys(t).forEach(i=>{const o=document.querySelector(`${this.config.filterFormSelector} [name="${i}"]`);o&&(this.config.isDebug?o.parentElement.style.backgroundColor="lightblue":o.parentElement.style.display="none")}),Object.keys(e).forEach(i=>{const o=document.querySelector(`${this.config.filterFormSelector} [name="${i}"]:not([data-filter-ignore])`);o&&(o.type==="checkbox"?o.checked=e[i]==="1"||e[i]===1||e[i]===!0:o.tagName==="INPUT"||o.tagName==="TEXTAREA"?o.value=e[i]:o.tagName==="SELECT"&&(o.value=e[i],o.dispatchEvent(new Event("change"))))})}updateFilterState(){const t=document.querySelector(this.config.filterIconSelector),e=document.querySelector(this.config.filterFormSelector);if(!e)return;const i=new FormData(e);let o=!1;for(let[r,l]of i.entries())if(l.trim()!==""&&r!=="page"){o=!0;break}o?(t.classList.remove("fa-filter"),t.classList.add("fa-times-circle")):(t.classList.remove("fa-times-circle"),t.classList.add("fa-filter"))}initializeFilterResetHandler(){document.querySelector(this.config.filterIconSelector);const t=document.querySelector(this.config.filterFormSelector);R.bindEvent("click",this.config.filterIconSelector,e=>{t.querySelectorAll("input, select").forEach(i=>{i.value=""}),$(t).find(".select2").val(null).trigger("change"),this.updateFilterState(),this.submitForm()}),this.updateFilterState()}initStats(){const t=document.querySelector(`${this.config.crudSelector} .stats-summary-items`);if(!t){console.warn("Le conteneur des statistiques n'a pas t trouv.");return}const e=this.config.viewStateService.getStatsVariables();if(!e||!Array.isArray(e.stats)||e.stats.length===0){t.innerHTML='<span class="text-muted">Aucune statistique disponible</span>';return}t.innerHTML=e.stats.map(i=>`
            <span class="badge badge-info mr-2 p-1" style="margin-bottom: 4px">
                <i class="${i.icon}"></i> ${i.label} : ${i.value}
            </span>
        `).join("")}initFilterToogle(){const t=`${this.config.crudSelector} #toggle-filter`,e=$(t),i=$(`${this.config.crudSelector} #card_crud`),o=`toggle_filter_state_${this.config.crudSelector}`,r=i.find(".card-header:not(:first)"),l=u=>{u?(r.show(),e.attr("data-visible","1")):(r.hide(),e.attr("data-visible","0")),e.html('<i class="fas fa-filter"></i>'),localStorage.setItem(o,u?"1":"0")},c=localStorage.getItem(o);l(c==="1"),R.bindEvent("click",t,u=>{u.preventDefault();const x=$(u.currentTarget).attr("data-visible")==="1";l(!x)})}}class Ks{constructor(t,e){this.config=t,this.indexUI=e,this.page=1}init(){this.handlePaginationClick()}handlePaginationClick(){R.bindEvent("click",this.config.paginationSelector,t=>{t.preventDefault();const e=$(t.currentTarget).data("page")||$(t.target).text().trim();if(e){const i=this.indexUI.filterUI.getFormData(!0);i.page=e,this.page=e,this.indexUI.updateURLParameters(i),this.indexUI.tableUI.loadListAction.loadEntities(e,i)}})}}const It=class It{constructor(t,e){this.config=t,this.indexUI=e,this.loader=new Je("#notificationUI"),this.isTabActive=!0,this.initVisibilityDetection()}init(){this.loadNotifications(),It.autoRefreshStarted||(this.startAutoRefresh(),It.autoRefreshStarted=!0)}startAutoRefresh(){this.config.viewStateService.getVariable("app.is_xdebug")||setInterval(()=>{this.isTabActive&&(this.loadNotifications(),this.indexUI.tableUI.loadListAction.loadEntities(void 0,{},!0))},15e3)}loadNotifications(){if(!this.config.getUserNotificationsUrl)return;const t=document.querySelector("#notificationDropdown"),e=t&&t.getAttribute("aria-expanded")==="true";$.ajax({url:this.config.getUserNotificationsUrl,method:"GET"}).done(i=>{if(this.updateNotificationUI(i),e){const o=document.querySelector("#notificationDropdown");$(o).dropdown("show")}}).fail(i=>{const o=i.responseText||"Erreur lors du chargement des notifications.";console.log("NotificationUI : "+o),console.log(i)}).always(()=>{})}updateNotificationUI(t){const e=document.querySelector("#notificationUI");e&&(e.innerHTML=t)}initVisibilityDetection(){R.bindEvent("visibilitychange",document,()=>{this.isTabActive=!document.hidden})}};st(It,"autoRefreshStarted",!1);let Sn=It;class Js{constructor(t){this.config=t,this.parent_manager=null,this.notificationUI=new Sn(t,this),this.filterUI=new Ys(t,this),this.tableUI=new rn(t,this),this.bulkActionsUI=new Ws(t,this),this.paginationUI=new Ks(t,this),this.formUI=new Te(t,this),this.showUI=new Ls(t,this),this.modalUI=new Xt(t,this),this.contexteEventHandler=new oo(t),window.crudModalManagers&&this.config.parent_manager_id!=null&&(this.parent_manager=window.crudModalManagers[this.config.parent_manager_id])}init(){this.filterUI.init(),this.tableUI.init(),this.bulkActionsUI.init(),this.paginationUI.init(),this.notificationUI.init(),this.config.isMany&&this.adapterUiPour_isMany(),this.applyActionFromURL(),this.config.debugInfo("Init : "+this.config)}adapterUiPour_isMany(){const t=document.querySelector(`#${this.config.entity_name}-crud-header`);t&&(t.style.display="none");const e=document.querySelector(`#${this.config.entity_name}-crud-table #card_crud`);e&&e.classList.remove("card-info")}updateURLParameters(t){const e=new URL(window.location.href);Object.entries(t).forEach(([i,o])=>{o==null||o===""?e.searchParams.delete(i):e.searchParams.set(i,o)}),window.history.replaceState({},"",e)}applyActionFromURL(){const t=new URL(window.location.href),e=t.searchParams.get("action"),i=t.searchParams.get("id"),o=t.searchParams.get("contextKey");if(!(o&&this.config.contextKey!=o)&&!(!e||!i))switch(e.toLowerCase()){case"edit":this.tableUI.entityEditor.editEntity(i);break;case"show":this.tableUI.entityEditor.showEntity(i);break;default:console.warn(`Action inconnue : ${e}`);break}}}class Zs{constructor(t){this.config=t,this.formUI=new Te(t,this),this.modalUI=new Xt(t,this),this.contexteEventHandler=new oo(t)}init(){this.contexteEventHandler.init(),this.config.debugInfo("Init : "+this.config)}submitEntityAndRedirect(t){this.submitEntity(()=>{window.location.href=this.config.indexUrl})}submitEntity(t){const e=$(this.config.formSelector),i=e.attr("action"),o=e.find('input[name="_method"]').val()||"POST",r=e.serialize();if(this.tableUI.indexUI.formUI.loader.show(),!this.tableUI.indexUI.formUI.validateForm()){B.showError("Validation choue. Veuillez corriger les erreurs."),this.tableUI.indexUI.formUI.loader.hide();return}$.ajax({url:i,method:o,data:r}).done(()=>{this.tableUI.indexUI.formUI.loader.hide(),B.showSuccess(this.SuscesMessage),typeof t=="function"&&t()}).fail(l=>{var u;this.tableUI.indexUI.formUI.loader.hide();const c=((u=l.responseJSON)==null?void 0:u.message)||"Une erreur s'est produite lors de la modification.";this.handleError(c)})}}const lt=class lt{static init(){lt.initCrudModalManagers(),lt.initEditWithTabPanelManagers(),window.crudModalManagersConfig=[],window.editWithTabPanelManagersConfig=[]}static initCrudModalManagers(){!window.crudModalManagersConfig||!Array.isArray(window.crudModalManagersConfig)||window.crudModalManagersConfig.forEach(t=>{const e=new Es(t),i=e.id||JSON.stringify(t);lt.processedManagers.add(i);const o=new Js(e);o.init(),window.crudModalManagers||(window.crudModalManagers={}),e.managerInstance=o,window.crudModalManagers[e.id]=o})}static initEditWithTabPanelManagers(){!window.editWithTabPanelManagersConfig||!Array.isArray(window.editWithTabPanelManagersConfig)||window.editWithTabPanelManagersConfig.forEach(t=>{const e=new Is(t);e.id||JSON.stringify(t);const i=new Zs(e);i.init(),window.editWithTabPanelManagers||(window.editWithTabPanelManagers={}),window.editWithTabPanelManagers[e.id]=i})}};st(lt,"processedManagers",new Set);let Dt=lt;class Xs{constructor(t,e){this.formUI=e,this.config=t,this.debounceDelay=500,this.currentRequest=null,this.lastSentData=null,this.loader=new Je(this.config.formSelector),this.disableCalcul=!0,this.CrudAction=new yt(this.config,this.formUI.indexUI.tableUI)}init(){R.bindEvent("input",`${this.config.formSelector} [data-calcul="true"]:not(select, [type="checkbox"], [type="radio"])`,t=>{this.debouncedCalculate(t.currentTarget)}),R.bindEvent("change",`${this.config.formSelector} [data-calcul="true"]`,t=>{this.debouncedCalculate(t.currentTarget)})}debouncedCalculate(t){this.disableCalcul&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.triggerCalculation(t)},this.debounceDelay))}triggerCalculation(t){let i=$(this.config.formSelector).serializeArray();i=i.filter(o=>o.name!=="_method"),i=$.param(i),this.lastSentData!==i&&(this.lastSentData=i,this.currentRequest!==null&&this.currentRequest.abort(),this.loader.showNomBloquante(),this.currentRequest=$.ajax({url:this.config.calculationUrl,method:"POST",data:i,dataType:"json"}).done(o=>{console.log(o);const r=o.traitement_token;console.log(r),r&&this.CrudAction.pollTraitementStatus(r,()=>{}),this.updateDependentFields(t,o.entity)}).fail((o,r)=>{var l;r!=="abort"&&((l=o.responseJSON)!=null&&l.errors?this.formUI.showFieldErrors(o.responseJSON.errors):ce.handleError(o,"Erreur lors du recalcul."))}).always(()=>{this.loader.hide(),this.currentRequest=null}))}updateDependentFields(t,e){const{hasManyInputsToUpdate:i,...o}=e;this.formUI.showFields(o,t,i)}}class Gs{constructor(t,e){this.formUI=e,this.config=t,this.formSelector=this.config.formSelector}init(){document.querySelectorAll(`${this.formSelector} [data-store-key]`).forEach(e=>{const i=e.dataset.storeKey,o=localStorage.getItem(i);e.type==="checkbox"?o!==null&&(e.checked=o==="true"):o!==null&&e.value===""&&(e.value=o);const r=["checkbox","radio","select-one"].includes(e.type)||e.tagName==="SELECT"?"change":"input";R.bindEvent(r,e,()=>{e.type==="checkbox"?localStorage.setItem(i,e.checked.toString()):localStorage.setItem(i,e.value)})})}}class Te{constructor(t,e,i=""){this.config=t,this.indexUI=e,this.formSelector=i,this.formSelector==""&&(this.formSelector=this.config.formSelector),this.viewStateService=this.config.viewStateService,this.loader=new Je(this.formSelector),this.dynamicCalculationTreatment=new Xs(t,this),this.localStorageDefaultTreatment=new Gs(t,this),this.reloadHasManyComposants=!0}init(t,e=!0){Dt.init(),this.handleCancelButton(),this.handleCardFooter(),this.handleFormSubmission(t),this.loader.init(),this.adapterPourContext(e),this.initializeSelect2_in_modal(),Te.initializeRichText(),Te.initSelect2Color(),Te.initializeDate(),Te.initCodeJar(),Te.initTooltip(),this.dynamicCalculationTreatment.init(),e&&this.localStorageDefaultTreatment.init(),window.dynamicFieldVisibilityTreatments&&new Qi(window.dynamicFieldVisibilityTreatments).initialize(),document.querySelectorAll(this.formSelector+" [data-target-dynamic-dropdown]").forEach(i=>{new Bn(i,this.config)}),R.bindEvent("input",`${this.formSelector} input[type="number"][max]`,i=>{const o=i.target,r=parseFloat(o.min)||0,l=parseFloat(o.max);let c=parseFloat(o.value);isNaN(l)?c<r&&(o.value=r):c>l?o.value=l:c<r&&(o.value=r)})}disableRequiredAttributes(){const t=document.querySelector(this.formSelector);t&&t.querySelectorAll("[required]").forEach(e=>{e.removeAttribute("required")})}adapterPourContext(t){const e=this.config.viewStateService.getScopeFormVariables(),i=this.config.viewStateService.getFormVariables();Object.keys(e).forEach(o=>{const r=document.querySelector(`${this.formSelector} #${o}`);r&&(this.config.isDebug?r.parentElement.style.backgroundColor="lightblue":r.parentElement.style.display="none")}),t&&Object.keys(i).forEach(o=>{const r=document.querySelector(`${this.formSelector} #${o}`);r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"?r.value=i[o]:r.tagName==="SELECT"&&(r.value=i[o],r.dispatchEvent(new Event("change"))))})}handleCancelButton(){R.bindEvent("click",`${this.formSelector} .form-cancel-button`,t=>{t.preventDefault(),this.indexUI.modalUI.close()}),R.bindEvent("click",`${this.config.dynamicModalSelector} .form-cancel-button`,t=>{t.preventDefault(),this.indexUI.modalUI.close()})}handleCardFooter(){const t=`${this.formSelector}`;$(t).find(".card-footer").removeClass("card-footer").addClass("modal-footer"),$(t).find(".card-body").removeClass("card-body")}handleFormSubmission(t){$(document).off("submit",this.formSelector),R.bindEvent("submit",this.formSelector,e=>{e.preventDefault(),t()})}setToReadOnly(){const t=$(this.formSelector);t.find("input, select, textarea, button").each(function(){const e=$(this);e.is("input")||e.is("textarea")?e.attr("readonly",!0):(e.is("select")||e.is("button"))&&e.attr("disabled",!0)}),t.find(".btn").not(".form-cancel-button").addClass("d-none")}resetForm(){const t=$(this.formSelector);t.trigger("reset"),t.find("input, select, textarea, button").each(function(){$(this).removeAttr("readonly").removeAttr("disabled")}),t.find(".btn").removeClass("d-none")}getFormData(){const e=$(this.formSelector).serializeArray();return this.validateForm(e)?e:null}validateForm(){const t=$(this.formSelector);let e=!0;return t.find(".error-message").remove(),t.find("[required]").each(function(){const i=$(this),o=i.val();if(i.is(":checkbox"))i.is(":checked")?i.removeClass("is-invalid"):(i.addClass("is-invalid"),i.next(".error-message").length||i.after('<span class="error-message text-danger">Ce champ est obligatoire..</span>'),e=!1);else if(i.is("select[multiple]"))!o||o.length===0?(i.addClass("is-invalid"),i.after('<span class="error-message text-danger">Veuillez slectionner au moins un lment.</span>'),e=!1):i.removeClass("is-invalid");else if(i.is("select"))!o||o==="default"?(i.addClass("is-invalid"),i.next(".error-message").length||i.after('<span class="error-message text-danger">Veuillez slectionner une option.</span>'),e=!1):i.removeClass("is-invalid");else if(i.hasClass("richText")){const r=i.val().trim(),l=i.next(".note-editor");!r||r==="<br>"?(l.addClass("richText_is_invalid"),l.next(".error-message").length||l.after('<span class="error-message text-danger">Ce champ ne peut pas tre vide.</span>'),e=!1):(l.removeClass("richText_is_invalid"),l.next(".error-message").remove())}else typeof o!="string"||!o.trim()?(i.addClass("is-invalid"),i.next(".error-message").length||i.after('<span class="error-message text-danger">Ce champ ne peut pas tre vide.</span>'),e=!1):i.removeClass("is-invalid")}),e}initializeSelect2_in_modal(){$(".select2").each(function(){if(!$(this).is("select"))return;let e=$(this).data("label")||"Slectionnez une option";$(this).select2({placeholder:e,width:"100%",allowClear:!0})})}static initSelect2Color(){function t(e){if(!e.id)return e.text;let i=$(e.element).data("color");return $('<span class="color-option"><span class="color-box" style="background-color:'+i+';"></span>'+e.text+"</span>")}$(".select2Color").each(function(){const e=$(this);e.is("select")&&(e.data("initialized")||(e.select2({templateResult:t,templateSelection:t,width:"100%"}),e.data("initialized",!0),console.log(e.data("initialized"))))})}static initializeSelect2(){$(".select2").each(function(){if(!$(this).is("select"))return;let e=$(this).data("label")||"Slectionnez une option";$(this).select2({placeholder:e,width:"100%",allowClear:!0})})}static initializeRichText(){$(".richText").each(function(){const t=$(this),e=t.prop("disabled");t.summernote({height:80,toolbar:e?!1:void 0,airMode:e?!1:void 0,callbacks:e?{onInit:function(){t.siblings(".note-editor").find(".note-editable").attr("contenteditable",!1)}}:{}}),t.on("input",function(){t.summernote("code",t.val())}),t.on("summernote.change",function(i,o){t.val(o)})})}getFormDataArray(){return $(this.formSelector).serializeArray()}static initializeDate(){oe(".datetimepicker",{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,locale:"fr",allowInput:!0,weekNumbers:!0})}static initCodeJar(){document.querySelectorAll(".code-editor").forEach(e=>{const i=e.nextElementSibling,o=l=>{try{const c=JSON.stringify(JSON.parse(l.textContent),null,2);l.innerHTML=Ke.highlight(c,Ke.languages.json,"json")}catch{l.innerHTML=Ke.highlight(l.textContent,Ke.languages.json,"json")}};eo(e,o).onUpdate(l=>{try{const c=JSON.stringify(JSON.parse(e.textContent),null,2);e.style.borderColor="",i.value=c}catch{e.style.borderColor="red"}}),i.addEventListener("change",()=>{try{e.textContent=JSON.stringify(JSON.parse(i.value),null,2),o(e)}catch(l){console.error("Erreur lors de la mise  jour de l'diteur :",l)}}),R.bindEvent("change",`#${i.id}`,()=>{try{e.textContent=i.value,o(e)}catch(l){B.showError("Mettre  jour JSON : "+l),console.error("Erreur lors de la mise  jour de l'diteur :",l)}}),i.value&&(e.textContent=JSON.stringify(JSON.parse(i.value),null,2),o(e))})}showFieldErrors(t){const e=$(this.formSelector);e.find(".error-message").remove(),Object.entries(t).forEach(([i,o])=>{let r=e.find(`[name="${i}"]`);r.length>0&&(r.addClass("is-invalid"),o.forEach(l=>{r.after(`<div class="error-message text-danger">${l}</div>`)}))})}static initTooltip(){$(".tooltip").remove(),$('[data-toggle="tooltip"]').tooltip("dispose"),$('[data-toggle="tooltip"]').tooltip({placement:"auto"}).on("shown.bs.tooltip",function(){const e=$(this);setTimeout(()=>{e.tooltip("hide")},3e3)})}reloadData(){const t=document.querySelector(this.formSelector);if(!t)return;const e=t.querySelector('[name="id"]');if(!e||!e.value){B.showError("Aucun ID trouv pour le rechargement.");return}const i=e.value,o=this.config.getEntityUrl.replace(":id",i);this.loader.showNomBloquante("Mise  jour des donnes de formulaire"),this.dynamicCalculationTreatment.disableCalcul=!1,this.reloadHasManyComposants=!1,$.ajax({url:o,method:"GET",dataType:"json"}).done(r=>{this.showFields(r,"",{})}).fail(r=>{var c;const l=((c=r.responseJSON)==null?void 0:c.message)||"Erreur lors du chargement des donnes.";B.showError(l)}).always(()=>{this.loader.hide(),setTimeout(()=>{this.dynamicCalculationTreatment.disableCalcul=!0,this.reloadHasManyComposants=!0},200)})}showFields(t,e="",i){Object.entries(t).forEach(([o,r])=>{const l=$(`${this.config.formSelector} [name="${o}"], ${this.config.formSelector} [name="${o}[]"]`);if(!l.is(e)&&l.length>0)if(l.is("select[multiple]")){let c=[];Array.isArray(r)&&(c=r.map(u=>typeof u=="object"&&u!==null?u.id:u)),l.val(c).trigger("change")}else!l.is("select[multiple]")&&l.is("select")?l.val(r).trigger("change"):l.is(":checkbox, :radio")?l.prop("checked",!!r):(l.val(r),l.hasClass("richText")&&typeof l.summernote=="function"?l.summernote("code",r):l.trigger("change"))}),this.reloadHasManyComposants&&i&&typeof i=="object"&&Object.entries(i).forEach(([o,r])=>{var c;const l=(c=window.crudModalManagers)==null?void 0:c[r];l&&l.tableUI.loadListAction.loadEntities()})}}class Qs{constructor(t){this.sessionStatService=new no(t),this.user={role:this.sessionStatService.getValue("user_role")},this.mainSidebarSelector="#main-sidebar",this.dashboardContainer="#dashboard-content"}init(){this.customizeSidebar()}customizeSidebar(){$(this.sidebarSelector).removeClass(function(e,i){return(i.match(/(^|\s)sidebar-dark-\S+/g)||[]).join(" ")})}}class el{static init(){let t=localStorage.getItem("sidebarState")||"collapsed",e=JSON.parse(localStorage.getItem("activeMenuPackageItems"))||[],i=$(".nav-sidebar .nav-item:not(.has-treeview) .nav-link.active").parent().attr("id");localStorage.setItem("activeMenuItem",i||""),t==="collapsed"?($("body").addClass("sidebar-collapse"),o()):l(),$('.nav-link[data-widget="pushmenu"]').on("click",function(){setTimeout(()=>{$("body").hasClass("sidebar-collapse")?(localStorage.setItem("sidebarState","collapsed"),o()):(localStorage.setItem("sidebarState","expanded"),l())},200)}),$(".sidebar").hover(function(){$("body").hasClass("sidebar-collapse")&&($("body").removeClass("sidebar-collapse").addClass("sidebar-open"),l())},function(){$("body").hasClass("sidebar-open")&&($("body").removeClass("sidebar-open").addClass("sidebar-collapse"),o())}),$(".nav-sidebar .nav-link").on("click",function(c){let u=$(this).parent(),U=u.attr("id");u.hasClass("has-treeview")&&(r(U),u.hasClass("menu-open")?e=e.filter(x=>x!==U):e=[U],localStorage.setItem("activeMenuPackageItems",JSON.stringify(e)))});function o(){$(".nav-sidebar .nav-item").removeClass("menu-open"),$(".nav-sidebar .nav-item .nav-link").removeClass("active"),$(".nav-sidebar .nav-item .nav-treeview").slideUp()}function r(c){$(".nav-sidebar .nav-item").each(function(){let u=$(this);u.attr("id")!==c&&(u.removeClass("menu-open"),u.children(".nav-link").removeClass("active"),u.children(".nav-treeview").slideUp())})}function l(){$(".nav-sidebar .nav-item").each(function(){let c=$(this),u=c.attr("id");e.includes(u)&&(c.addClass("menu-open"),c.children(".nav-link").addClass("active"),c.children(".nav-treeview").show()),i==u&&c.children(".nav-link").addClass("active")})}}}document.addEventListener("DOMContentLoaded",function(){let n=window.sessionState;new Qs(n).init(),Dt.init(),window.notifications.forEach(e=>{new B(e).show()}),Te.initializeSelect2(),Te.initSelect2Color(),Te.initializeRichText(),Te.initializeDate(),Te.initCodeJar(),rn.initTooltip(),el.init()});$(".widget").sortable({placeholder:"sort-highlight",handle:".handle",forcePlaceholderSize:!0,zIndex:999999});
//# sourceMappingURL=admin-12evCoo3.js.map
