### Tutoriel pour configurer un serveur Ubuntu pour ex√©cuter une application Laravel et un site web statique

#### √âtape 1 : Pr√©paration du serveur
1. **Mettre √† jour les packages :**
   ```bash
   sudo apt update && sudo apt upgrade -y
   ```

2. **Installer les outils essentiels :**
   ```bash
   sudo apt install curl zip unzip git -y
   ```

#### √âtape 2 : Installation des d√©pendances pour Laravel
1. **Installer PHP et extensions n√©cessaires :**
   Laravel requiert PHP 8.0 ou sup√©rieur. Installez PHP avec les extensions :
   ```bash
   sudo apt install php-cli php-mbstring php-xml php-bcmath php-curl php-zip php-mysql -y
   ```

2. **Installer Composer :**
   ```bash
   curl -sS https://getcomposer.org/installer | php
   sudo mv composer.phar /usr/local/bin/composer
   ```















Oui, pour utiliser **Laravel** avec **Nginx**, vous devez installer **PHP-FPM** (FastCGI Process Manager). PHP-FPM est une passerelle entre Nginx et PHP, car Nginx ne traite pas les fichiers PHP directement comme Apache le fait.

Voici pourquoi et comment l'installer :

---

### **Pourquoi installer `php8.1-fpm` ?**
- **Nginx ne peut pas ex√©cuter PHP directement :** Il utilise PHP-FPM pour traiter les requ√™tes PHP.
- **Performance :** PHP-FPM est plus performant et consomme moins de ressources qu‚ÄôApache mod_php.
- **Configuration requise pour Laravel :** Laravel s'appuie sur PHP-FPM pour ex√©cuter les scripts PHP via Nginx.

---

### **√âtapes pour installer `php8.1-fpm`**

#### **1. Ajouter le d√©p√¥t PHP (si n√©cessaire)**
Si vous n‚Äôavez pas encore le d√©p√¥t `ondrej/php` pour les versions r√©centes de PHP, ajoutez-le :
```bash
sudo apt update
sudo apt install software-properties-common -y
sudo add-apt-repository ppa:ondrej/php -y
sudo apt update
```

#### **2. Installer PHP-FPM**
Installez `php8.1-fpm` avec la commande suivante :
```bash
sudo apt install php8.1-fpm -y
```

#### **3. V√©rifier que PHP-FPM est actif**
Une fois install√©, assurez-vous que le service PHP-FPM fonctionne :
```bash
sudo systemctl status php8.1-fpm
```

Vous devriez voir un message indiquant que le service est **active (running)**. Si ce n‚Äôest pas le cas, d√©marrez-le :
```bash
sudo systemctl start php8.1-fpm
sudo systemctl enable php8.1-fpm
```

---

### **Configurer Nginx pour utiliser PHP-FPM**

Assurez-vous que votre configuration Nginx pointe correctement vers le socket PHP-FPM. Dans votre fichier de configuration Nginx pour Laravel (par exemple `/etc/nginx/sites-available/laravel`), v√©rifiez cette section :

```nginx
location ~ \.php$ {
    include snippets/fastcgi-php.conf;
    fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}
```

Apr√®s modification, red√©marrez Nginx :
```bash
sudo systemctl restart nginx
```

---

### **Tester la configuration**

1. Cr√©ez un fichier de test PHP dans votre r√©pertoire Nginx (par exemple : `/var/www/html/info.php`) :
   ```php
   <?php phpinfo(); ?>
   ```

2. Acc√©dez √† ce fichier depuis votre navigateur : `http://votre-ip/info.php`.

Si la page PHP s‚Äôaffiche, cela signifie que PHP-FPM est correctement configur√© et que Nginx fonctionne avec PHP.

---

Si tu as des probl√®mes ou des questions suppl√©mentaires, n‚Äôh√©site pas ! üòä







#### √âtape 3 : Configurer un serveur web

1. **Installer Nginx :**
   ```bash
   sudo apt install nginx -y
   ```

2. **Configurer Nginx pour Laravel :**
   Cr√©ez un fichier de configuration pour Laravel.
   ```bash
   sudo nano /etc/nginx/sites-available/laravel
   ```
   Exemple de configuration :
   ```nginx
   server {
       listen 80;
       server_name votre-domaine.com;

       root /var/www/app/public;
       index index.php index.html;

       location / {
           try_files $uri $uri/ /index.php?$query_string;
       }

       location ~ \.php$ {
           include snippets/fastcgi-php.conf;
           fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
           fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
           include fastcgi_params;
       }

       location ~ /\.ht {
           deny all;
       }
   }
   ```

3. **Activer la configuration :**
   ```bash
   sudo ln -s /etc/nginx/sites-available/laravel /etc/nginx/sites-enabled/
   sudo systemctl restart nginx
   ```

#### 

git config --global --add safe.directory /var/www/app


#### √âtape 6 : D√©ployer Laravel
1. **Cloner votre projet Laravel :**
   ```bash
   git clone https://github.com/votre-repo/laravel.git /var/www/laravel
   ```

2. **Installer les d√©pendances :**
   ```bash
   cd /var/www/laravel
   composer install
   ```

3. **Configurer `.env` :**
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```

4. **Configurer les permissions :**
   ```bash
   sudo chown -R www-data:www-data /var/www/laravel
   sudo chmod -R 775 /var/www/laravel/storage /var/www/laravel/bootstrap/cache
   ```

5. **Migrer la base de donn√©es :**
   ```bash
   php artisan migrate
   ```

Vous avez maintenant un serveur configur√© pour ex√©cuter votre application Laravel et h√©berger un site web statique.