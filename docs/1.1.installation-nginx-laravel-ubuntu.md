### **Tutoriel Complet : Configurer un Serveur Ubuntu pour D√©ployer une Application Laravel avec Nginx, PHP, GD, et MySQL**

---

### **Introduction**

Ce tutoriel vous guide pour configurer un serveur Ubuntu pour h√©berger une application Laravel. Nous allons couvrir :
1. **Nginx** : Serveur web performant.
2. **PHP** : Traitement des scripts Laravel.
3. **MySQL** : Base de donn√©es pour Laravel.
4. **GD** : Extension pour la manipulation d‚Äôimages.
5. **Composer** : Gestion des d√©pendances PHP.

---

### **√âtape 1 : Pr√©parer le Serveur**

1. **Mettre √† jour les paquets :**
   ```bash
   sudo apt update && sudo apt upgrade -y
   ```

2. **Installer les outils essentiels :**
   ```bash
   sudo apt install curl zip unzip git software-properties-common -y
   ```

---

### **√âtape 2 : Installer et Configurer MySQL**

1. **Installer MySQL :**
   ```bash
   sudo apt install mysql-server -y
   ```

2. **Configurer MySQL pour Laravel :**
   - Connectez-vous √† MySQL en tant que root :
     ```bash
     sudo mysql
     ```
   - Cr√©ez une base de donn√©es et un utilisateur pour Laravel :
     ```sql
     CREATE DATABASE laravel_db;
     CREATE USER 'laravel_user'@'localhost' IDENTIFIED BY 'password';
     GRANT ALL PRIVILEGES ON laravel_db.* TO 'laravel_user'@'localhost';
     FLUSH PRIVILEGES;
     EXIT;
     ```

3. **Tester la connexion MySQL :**
   ```bash
   mysql -u laravel_user -p
   ```
   Entrez le mot de passe `password` pour v√©rifier l'acc√®s.

---

### **√âtape 3 : Installer PHP et ses Extensions**

1. **Ajouter le d√©p√¥t PHP :**
   ```bash
   sudo add-apt-repository ppa:ondrej/php -y
   sudo apt update
   ```

2. **Installer PHP 8.2 et les extensions n√©cessaires pour Laravel :**
   ```bash
   sudo apt install php8.2 php8.2-cli php8.2-fpm php8.2-mysql php8.2-curl php8.2-zip php8.2-mbstring php8.2-xml php8.2-bcmath php8.2-gd php8.2-dom -y
   ```

3. **Red√©marrer PHP-FPM :**
   ```bash
   sudo systemctl restart php8.2-fpm
   ```

4. **V√©rifier que PHP fonctionne :**
   ```bash
   php -v
   ```

---

### **√âtape 4 : Installer et Configurer Nginx**

1. **Installer Nginx :**
   ```bash
   sudo apt install nginx -y
   ```

2. **V√©rifier que Nginx est actif :**
   ```bash
   sudo systemctl status nginx
   ```

3. **Cr√©er une configuration pour Laravel :**
   ```bash
   sudo nano /etc/nginx/sites-available/laravel
   ```

   Ajoutez cette configuration (remplacez `/var/www/laravel` par le chemin de votre projet) :
   ```nginx
   server {
       listen 80;

       root /var/www/app/public;
       index index.php index.html;

       location / {
           try_files $uri $uri/ /index.php?$query_string;
       }

       location ~ \.php$ {
           include snippets/fastcgi-php.conf;
           fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
           fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
           include fastcgi_params;
       }

       location ~ /\.ht {
           deny all;
       }
   }
   ```

4. **Activer la configuration :**
   ```bash
   sudo ln -s /etc/nginx/sites-available/laravel /etc/nginx/sites-enabled/
   ```

5. **V√©rifier la configuration Nginx :**
   ```bash
   sudo nginx -t
   ```

6. **Red√©marrer Nginx :**
   ```bash
   sudo systemctl restart nginx
   ```

---

### **√âtape 5 : Installer Composer**

1. **T√©l√©charger et installer Composer :**
   ```bash
   curl -sS https://getcomposer.org/installer | php
   sudo mv composer.phar /usr/local/bin/composer
   ```

2. **V√©rifier l‚Äôinstallation :**
   ```bash
   composer --version
   ```

---

### **√âtape 6 : D√©ployer Laravel**

1. **Cloner le projet Laravel :**
   ```bash
   sudo git clone https://github.com/votre-repo/laravel.git /var/www/laravel
   ```

2. **Attribuer les bonnes permissions :**
   ```bash
   sudo chown -R www-data:www-data /var/www/laravel
   sudo chmod -R 775 /var/www/laravel/storage /var/www/laravel/bootstrap/cache
   ```

3. **Installer les d√©pendances Laravel :**
   ```bash
   cd /var/www/laravel
   composer install
   ```

4. **Configurer le fichier `.env` :**
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```

5. **Configurer la base de donn√©es dans le fichier `.env` :**
   ```env
   DB_CONNECTION=mysql
   DB_HOST=127.0.0.1
   DB_PORT=3306
   DB_DATABASE=laravel_db
   DB_USERNAME=laravel_user
   DB_PASSWORD=password
   ```

6. **Migrer la base de donn√©es :**
   ```bash
   php artisan migrate
   ```

---

### **√âtape 7 : Installer et Activer GD**

1. **V√©rifier que GD est activ√© :**
   ```bash
   php -m | grep gd
   ```

2. **Si GD n‚Äôest pas activ√©, installez-le :**
   ```bash
   sudo apt install php8.2-gd -y
   ```

3. **Red√©marrer PHP-FPM et Ngin


### **√âtape 7 (suite) : Installer et Activer GD**

4. **Red√©marrer PHP-FPM et Nginx** :
   Une fois l‚Äôextension `gd` install√©e, red√©marrez les services pour appliquer les modifications :
   ```bash
   sudo systemctl restart php8.2-fpm
   sudo systemctl restart nginx
   ```

5. **V√©rifier que l‚Äôextension GD est active** :
   Utilisez la commande suivante pour confirmer que `gd` est bien activ√© :
   ```bash
   php -m | grep gd
   ```

   Si `gd` appara√Æt sans erreur, l'installation est r√©ussie. Vous pouvez √©galement cr√©er un fichier `info.php` dans `/var/www/laravel/public` pour v√©rifier via un navigateur :
   ```bash
   sudo nano /var/www/laravel/public/info.php
   ```
   Ajoutez ceci :
   ```php
   <?php phpinfo(); ?>
   ```
   Acc√©dez √† `http://votre-domaine.com/info.php` et recherchez "gd" dans la liste des extensions PHP.

---

### **√âtape 8 : Tester l‚ÄôApplication Laravel**

1. **Lancer le serveur Laravel en local** (facultatif, pour test rapide) :
   ```bash
   php artisan serve
   ```
   Acc√©dez √† `http://127.0.0.1:8000` pour voir si l'application fonctionne.

2. **Tester avec Nginx** :
   Ouvrez un navigateur et acc√©dez √† `http://votre-domaine.com` ou √† l‚Äôadresse IP de votre serveur. Si tout est correctement configur√©, la page d‚Äôaccueil de votre application Laravel devrait s‚Äôafficher.

---

### **√âtape 9 : S√©curiser le Serveur avec SSL (Facultatif)**

Pour s√©curiser votre site avec HTTPS, utilisez **Certbot** pour obtenir un certificat SSL gratuit.

1. **Installer Certbot** :
   ```bash
   sudo apt install certbot python3-certbot-nginx -y
   ```

2. **G√©n√©rer un certificat SSL** :
   Remplacez `votre-domaine.com` par votre domaine :
   ```bash
   sudo certbot --nginx -d votre-domaine.com
   ```

3. **Tester le renouvellement automatique** :
   V√©rifiez que le certificat se renouvelle automatiquement :
   ```bash
   sudo certbot renew --dry-run
   ```

---

### **√âtape 10 : R√©solution des Probl√®mes Courants**

1. **Extension PHP manquante :**
   Si une extension est signal√©e comme manquante, installez-la (par exemple, pour `ext-dom`) :
   ```bash
   sudo apt install php8.2-xml -y
   ```

2. **Erreur de permissions :**
   Assurez-vous que Laravel dispose des permissions appropri√©es :
   ```bash
   sudo chown -R www-data:www-data /var/www/laravel
   sudo chmod -R 775 /var/www/laravel/storage /var/www/laravel/bootstrap/cache
   ```

3. **Erreur "403 Forbidden" avec Nginx :**
   V√©rifiez que le r√©pertoire racine est correct dans votre configuration Nginx :
   ```nginx
   root /var/www/laravel/public;
   ```

4. **Red√©marrer les services apr√®s modification :**
   Toujours red√©marrer Nginx et PHP-FPM apr√®s des changements :
   ```bash
   sudo systemctl restart nginx
   sudo systemctl restart php8.2-fpm
   ```

---

### **R√©sum√©**

1. **Installation de MySQL** : Base de donn√©es pour Laravel.
2. **Configuration de PHP 8.2** : Extensions n√©cessaires (GD, mbstring, etc.).
3. **Installation de Nginx** : Serveur pour h√©berger Laravel.
4. **D√©ploiement de Laravel** : Configuration `.env`, installation des d√©pendances.
5. **S√©curisation avec SSL** : Utilisation de Certbot.

---

Si vous rencontrez des probl√®mes sp√©cifiques ou des erreurs, n‚Äôh√©sitez pas √† les partager pour un d√©pannage plus pr√©cis ! üòä



Pour changer le mot de passe de l'utilisateur **root** en **admin@123** dans MySQL, voici les √©tapes d√©taill√©es :

---

### **√âtape 1 : Se connecter √† MySQL en tant que root**

1. Si vous √™tes d√©j√† connect√© en tant qu'utilisateur root sans mot de passe :
   ```bash
   sudo mysql
   ```

2. Si un mot de passe existe d√©j√† pour root, connectez-vous avec :
   ```bash
   mysql -u root -p
   ```
   Saisissez le mot de passe actuel lorsque MySQL le demande.

---

### **√âtape 2 : Modifier le mot de passe root**

1. Une fois connect√© √† MySQL, ex√©cutez la commande suivante pour changer le mot de passe de root :
   ```sql
   ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'admin@123';
   ```

2. Rechargez les privil√®ges pour appliquer les modifications :
   ```sql
   FLUSH PRIVILEGES;
   ```

---

### **√âtape 3 : Tester la modification**

1. Quittez MySQL :
   ```sql
   EXIT;
   ```

2. Essayez de vous reconnecter en utilisant le nouveau mot de passe :
   ```bash
   mysql -u root -p
   ```
   Lorsque demand√©, entrez le mot de passe **admin@123**.

---

### **√âtape 4 : V√©rifier la s√©curit√© (facultatif)**

1. Ex√©cutez l'assistant de s√©curit√© pour renforcer la configuration de votre serveur MySQL :
   ```bash
   sudo mysql_secure_installation
   ```
2. Lorsque l'on vous demande de d√©finir un mot de passe root, s√©lectionnez "Non" (puisque vous l'avez d√©j√† chang√©).

---

### **√âtape 5 : R√©solution des probl√®mes courants**

1. **Erreur : `Access denied for user 'root'@'localhost'`**
   - Assurez-vous que MySQL utilise `mysql_native_password` pour l'authentification de root :
     ```sql
     ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'admin@123';
     ```

2. **Erreur de connexion √† distance (facultatif)** :
   Si vous voulez permettre √† `root` de se connecter depuis un autre h√¥te :
   ```sql
   GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'admin@123' WITH GRANT OPTION;
   FLUSH PRIVILEGES;
   ```

3. Red√©marrez MySQL apr√®s toute modification majeure :
   ```bash
   sudo systemctl restart mysql
   ```

---

### **R√©sum√©**

- Le mot de passe de root est maintenant **admin@123**.
- Vous pouvez vous connecter avec :
  ```bash
  mysql -u root -p
  ```
  Puis entrez **admin@123**.

Si vous rencontrez des probl√®mes ou avez besoin d'une configuration sp√©cifique, faites-le-moi savoir ! üòä


