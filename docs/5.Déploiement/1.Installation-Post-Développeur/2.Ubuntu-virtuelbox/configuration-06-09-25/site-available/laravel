server {
    listen 80;
    server_name localhost;
    return 301 https://$host$request_uri;  # Redirection automatique vers HTTPS
}  


 server {
     
       listen 443 ssl;
       server_name localhost;

       root /var/www/app/public;
       index index.php index.html;


       ssl_certificate /etc/nginx/ssl/certificate.crt;  
       ssl_certificate_key /etc/nginx/ssl/private.key; 


       location / {
           try_files $uri $uri/ /index.php?$query_string;
       }

       location ~ \.php$ {
           include snippets/fastcgi-php.conf;
           fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
           fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
           include fastcgi_params;
       }

       location ~ /\.ht {
           deny all;
       }
   }